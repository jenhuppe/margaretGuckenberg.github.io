webpackJsonp([1],{575:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(576),g=a(579),b=s(g),T=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.props.dispatch((0,v.applicationModeCard)())}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,v.applicationModeReset)())}},{key:"render",value:function(){return m["default"].createElement(b["default"],{className:"CardView"},this.props.children)}}]),t}(m["default"].Component);T.propTypes={children:m["default"].PropTypes.object,dispatch:m["default"].PropTypes.func.isRequired},t["default"]=(0,y.connect)()(T)},579:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PageView=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(566),g=s(v),b=a(580),T=s(b),E=a(576),P=a(582),w=s(P),C=a(583),S=s(C),_=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.updateDimensions=(0,T["default"])(a.updateDimensions.bind(a),250),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"updateDimensions",value:function(){this.props.dispatch((0,E.layoutSet)(S["default"].getLayout())),this.props.dispatch((0,E.dimensionsSet)({height:window.innerHeight,width:window.innerWidth}))}},{key:"componentDidMount",value:function(){this.updateDimensions(),window.onresize=this.updateDimensions}},{key:"componentWillUnmount",value:function(){window.onresize=null}},{key:"render",value:function(){var e=this.props,t=e.children,a=e.dimensions,s={};return a?s.height=a.height:s.height="100vh",m["default"].createElement("div",{id:"PageView",className:this.props.className,style:s},m["default"].createElement(g["default"],{title:"Periscope"}),t)}}]),t}(m["default"].Component);_.propTypes={className:m["default"].PropTypes.string,dispatch:m["default"].PropTypes.func,dimensions:m["default"].PropTypes.object,children:m["default"].PropTypes.oneOfType([m["default"].PropTypes.element,m["default"].PropTypes.arrayOf(m["default"].PropTypes.element)])},t.PageView=_,t["default"]=(0,y.connect)((0,w["default"])(["dimensions"]))(_)},580:function(e,t,a){function s(e,t,a){function s(t){var a=g,s=b;return g=b=void 0,C=t,E=e.apply(s,a)}function d(e){return C=e,P=setTimeout(h,t),S?s(e):E}function c(e){var a=e-w,s=e-C,i=t-a;return _?u(i,T-s):i}function p(e){var a=e-w,s=e-C;return void 0===w||a>=t||a<0||_&&s>=T}function h(){var e=n();return p(e)?f(e):void(P=setTimeout(h,c(e)))}function f(e){return P=void 0,M&&g?s(e):(g=b=void 0,E)}function m(){C=0,g=w=b=P=void 0}function y(){return void 0===P?E:f(n())}function v(){var e=n(),a=p(e);if(g=arguments,b=this,w=e,a){if(void 0===P)return d(w);if(_)return P=setTimeout(h,t),s(w)}return void 0===P&&(P=setTimeout(h,t)),E}var g,b,T,E,P,w,C=0,S=!1,_=!1,M=!0;if("function"!=typeof e)throw new TypeError(o);return t=r(t)||0,i(a)&&(S=!!a.leading,_="maxWait"in a,T=_?l(r(a.maxWait)||0,t):T,M="trailing"in a?!!a.trailing:M),v.cancel=m,v.flush=y,v}var i=a(419),n=a(581),r=a(495),o="Expected a function",l=Math.max,u=Math.min;e.exports=s},581:function(e,t){function a(){return Date.now()}e.exports=a},583:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(517),n=s(i),r=a(578),o=r.DESKTOP,l=n["default"].isServer(),u=void 0;u=l?{getLayout:function(){return o}}:function(){var e=function(){if(l)return o;var e=window.getComputedStyle(document.querySelector("body"),":before").getPropertyValue("content");return e&&"string"==typeof e?(e=e.replace(/\"/g,""),e?e:o):o};return{getLayout:e}}(),t["default"]=u},662:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(243),g=a(661),b=a(663),T=s(b),E=a(664),P=a(672),w=s(P),C=a(363),S={baseClass:"ViewerBadge-mode",liveClass:"live",replayClass:"replay"},_=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"getViewers",value:function(){var e=this.props,t=e.isLive,a=e.chat,s=e.viewers;return t&&a&&a.occupancy||s}},{key:"hideViewerCount",value:function(){return 0===this.props.viewers}},{key:"renderCountText",value:function(){if(!this.hideViewerCount())return this.props.isLive?m["default"].createElement(w["default"],{useSmallIcon:this.props.isConjoined,count:this.getViewers()}):m["default"].createElement(w["default"],{includeIcon:!1,count:this.props.viewers})}},{key:"renderMode",value:function(){var e=[S.baseClass],t=void 0;if(this.props.isLive)t=g.live,e.push(S.liveClass);else{if(!this.props.includeEndedLabel)return;t=g.ended,e.push(S.replayClass)}return m["default"].createElement(v.FormattedMessage,t,function(t){return m["default"].createElement("span",{className:e.join(" ")},t)})}},{key:"render",value:function(){var e=["ViewerBadge"];if(this.props.isHidden&&e.push("ViewerBadge--hidden"),this.props.isConjoined&&!this.hideViewerCount()&&e.push("ViewerBadge--conjoined"),this.props.isLive){var t=String((0,C.abbreviatedInteger)(this.getViewers())).length;e.push("ViewerBadge--"+t+"Digits")}return m["default"].createElement("div",{className:e.join(" ")},this.renderMode(),m["default"].createElement("div",{className:"ViewerBadge-count"},this.renderCountText()))}}]),t}(m["default"].Component);_.propTypes={viewers:m["default"].PropTypes.number,intl:m["default"].PropTypes.object,isLive:m["default"].PropTypes.bool,isHidden:m["default"].PropTypes.bool,isConjoined:m["default"].PropTypes.bool,includeEndedLabel:m["default"].PropTypes.bool,chat:E.chatPropType},_.defaultProps={isLive:!1,isHidden:!1,isConjoined:!1,includeEndedLabel:!1,viewers:0},t["default"]=(0,y.connect)(T["default"])((0,v.injectIntl)(_))},663:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t={};return e.Chat&&(t.chat=e.Chat,t.chatPending=e.Chat.pending,t.chatFailed=e.Chat.failed),t}function n(e){var t=i(e);return t.chat={chatSession:t.chat.chatSession,moderation:t.chat.moderation,paused:t.chat.paused,sessionError:t.chat.sessionError},t}Object.defineProperty(t,"__esModule",{value:!0}),t.chatSessionPropType=void 0,t.chatSessionMapper=n;var r=a(1),o=s(r);t.chatSessionPropType=o["default"].PropTypes.shape({chatSession:o["default"].PropTypes.object,moderation:o["default"].PropTypes.object,paused:o["default"].PropTypes.bool.isRequired,sessionError:o["default"].PropTypes.bool.isRequired});t["default"]=i},672:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(673),g=a(363),b=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"getCountWithText",value:function(){var e=this.props.count;return 0===e?this.props.intl.formatMessage(v.countLabelNoViewers):1===e?this.props.intl.formatMessage(v.countLabelOneViewer):this.props.intl.formatMessage(v.countLabelPlural,{viewerCount:(0,g.abbreviatedInteger)(e)})}},{key:"determineLabel",value:function(){return this.props.includeIcon?""+(0,g.abbreviatedInteger)(this.props.count):m["default"].createElement("span",null,this.getCountWithText())}},{key:"render",value:function(){var e=["Viewers"];return this.props.useSmallIcon&&e.push("Viewers--small"),this.props.includeIcon||e.push("Viewers--noIcon"),m["default"].createElement("div",{className:e.join(" "),title:this.getCountWithText()},this.determineLabel())}}]),t}(m["default"].Component);b.propTypes={intl:y.intlShape.isRequired,count:m["default"].PropTypes.number.isRequired,includeIcon:m["default"].PropTypes.bool,useSmallIcon:m["default"].PropTypes.bool},b.defaultProps={useSmallIcon:!1,includeIcon:!0,count:0},t["default"]=(0,y.injectIntl)(b)},673:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.countLabelPlural=t.countLabelOneViewer=t.countLabelNoViewers=void 0;var s=a(243),i=(0,s.defineMessages)({countLabelNoViewers:{id:"viewers.COUNT_LABEL_NO_VIEWERS",defaultMessage:"No Viewers"},countLabelOneViewer:{id:"viewers.COUNT_LABEL_ONE_VIEWER",defaultMessage:"1 Viewer"},countLabelPlural:{id:"viewers.COUNT_LABEL_PLURAL",defaultMessage:"{viewerCount} Viewers"}}),n=i.countLabelNoViewers,r=i.countLabelOneViewer,o=i.countLabelPlural;t["default"]={countLabelNoViewers:n,countLabelOneViewer:r,countLabelPlural:o},t.countLabelNoViewers=n,t.countLabelOneViewer=r,t.countLabelPlural=o},687:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(688),g=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.toggleMute=a.toggleMute.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"toggleMute",value:function(){this.props.muted?this.props.dispatchAudioOn():this.props.dispatchAudioOff()}},{key:"render",value:function(){return m["default"].createElement("a",{href:"#",className:"MuteButton",onClick:this.toggleMute},this.props.muted?m["default"].createElement("div",{className:"MuteButton-off"}):m["default"].createElement("div",{className:"MuteButton-on"}))}}]),t}(m["default"].Component);g.defaultProps={muted:!1},g.propTypes={dispatchAudioOff:m["default"].PropTypes.func,dispatchAudioOn:m["default"].PropTypes.func,muted:m["default"].PropTypes.bool},t["default"]=(0,y.connect)(function(){return{}},v.videoPlayerDispatchMapper)(g)},694:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.fillModeValues=void 0;var i=a(383),n=s(i),r={CONTAIN:"contain",COVER:"cover"},o=(0,n["default"])(r).map(function(e){return r[e]});t.fillModeValues=o,t["default"]=r},695:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(603),b=s(g),T=a(389),E=s(T),P=a(391),w=s(P),C=a(696),S=s(C),_=a(519),M=s(_),k=a(697),R=s(k),I=.004,N=.025,A=1.1,O=.85,D=5,L=Math.PI/2,U=.7*L,B=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));return a.handleMouseDown=a.handleMouseDown.bind(a),a.handleMouseUp=a.handleMouseUp.bind(a),a.handleMouseMove=a.handleMouseMove.bind(a),a.handleTouchStart=a.handleTouchStart.bind(a),a.handleTouchEnd=a.handleTouchEnd.bind(a),a.handleTouchCancel=a.handleTouchCancel.bind(a),a.handleTouchMove=a.handleTouchMove.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.onCanPlay=a.onCanPlay.bind(a),a.render360=a.render360.bind(a),a.isPanning=!1,a.startX=0,a.startY=0,a.startT=0,a.velocityX=0,a.velocityY=0,a.pitch=0,a.yaw=0,a.keyStates={},a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"shouldRender360",value:function(){return this.props.is360&&M["default"].isEnabled("360")}},{key:"possiblyRenderCanvas",value:function(){var e=this;if(this.shouldRender360())return v["default"].createElement("canvas",{className:"VideoAs360",ref:function(t){e.canvasRef=t}})}},{key:"render",value:function(){var e=this;return v["default"].createElement("div",{className:"VideoWrapper"},v["default"].createElement(R["default"],(0,n["default"])({ref:function(t){e.videoRef=t}},this.props,{onCanPlay:this.onCanPlay})),this.possiblyRenderCanvas())}},{key:"componentDidMount",value:function(){this.shouldRender360()&&(this.videoRef&&this.attachRenderer(),this.canvasRef&&(this.props.touchEnabled&&(this.canvasRef.addEventListener("mousedown",this.handleMouseDown),this.canvasRef.addEventListener("mouseup",this.handleMouseUp),this.canvasRef.addEventListener("mousemove",this.handleMouseMove),this.canvasRef.addEventListener("touchstart",this.handleTouchStart),this.canvasRef.addEventListener("touchend",this.handleTouchEnd),this.canvasRef.addEventListener("touchcancel",this.handleTouchCancel),this.canvasRef.addEventListener("touchmove",this.handleTouchMove)),this.props.keyboardEnabled&&(window.addEventListener("keydown",this.handleKeyDown),window.addEventListener("keyup",this.handleKeyUp))))}},{key:"componentWillUnmount",value:function(){this.canvasRef&&(this.props.touchEnabled&&(this.canvasRef.removeEventListener("mousedown",this.handleMouseDown),this.canvasRef.removeEventListener("mouseup",this.handleMouseUp),this.canvasRef.removeEventListener("mousemove",this.handleMouseMove),this.canvasRef.removeEventListener("touchstart",this.handleTouchStart),this.canvasRef.removeEventListener("touchend",this.handleTouchEnd),this.canvasRef.removeEventListener("touchcancel",this.handleTouchCancel),this.canvasRef.removeEventListener("touchmove",this.handleTouchMove)),this.props.keyboardEnabled&&(window.removeEventListener("keydown",this.handleKeyDown),window.removeEventListener("keyup",this.handleKeyUp)))}},{key:"play",value:function(){this.videoRef&&this.videoRef.play()}},{key:"pause",value:function(){this.videoRef&&this.videoRef.pause()}},{key:"setTime",value:function(e){this.videoRef&&this.videoRef.setTime(e)}},{key:"getPlayerState",value:function(){var e=b["default"].NOT_FOUND;return this.videoRef&&(e=this.videoRef.getPlayerState()),e}},{key:"handleKeyboardInputs",value:function(){this.keyStates[E["default"].I]&&(this.pitch=this.clamp(this.pitch+N,-U,U)),this.keyStates[E["default"].J]&&(this.yaw+=N),this.keyStates[E["default"].K]&&(this.pitch=this.clamp(this.pitch-N,-U,U)),this.keyStates[E["default"].L]&&(this.yaw-=N)}},{key:"registerKeyDown",value:function(e){this.keyStates[e]=!0}},{key:"registerKeyUp",value:function(e){delete this.keyStates[e]}},{key:"handleKeyDown",value:function(e){switch(e.keyCode){case E["default"].I:case E["default"].J:case E["default"].K:case E["default"].L:this.registerKeyDown(e.keyCode)}}},{key:"handleKeyUp",value:function(e){switch(e.keyCode){case E["default"].I:case E["default"].J:case E["default"].K:case E["default"].L:this.registerKeyUp(e.keyCode)}}},{key:"handleMouseDown",value:function(e){this.isPanning=!0,this.startX=e.offsetX,this.startY=e.offsetY,this.startT=Date.now(),event.preventDefault(),event.stopPropagation()}},{key:"handleMouseUp",value:function(){this.isPanning=!1,event.preventDefault(),event.stopPropagation()}},{key:"handlePan",value:function(e,t){this.yaw+=e,this.pitch=this.clamp(this.pitch+t,-U,U);var a=Date.now()-this.startT;a>0&&(this.velocityX=e/a*D,this.velocityY=t/a*D)}},{key:"handleFlick",value:function(){this.isPanning||(this.yaw+=this.velocityX,this.pitch=this.clamp(this.pitch+this.velocityY,-U,U),this.velocityX*=O,this.velocityY*=O)}},{key:"handleMouseMove",value:function(e){if(this.isPanning){var t=(e.offsetX-this.startX)*I,a=(e.offsetY-this.startY)*I;this.handlePan(t,a),this.startX=e.offsetX,this.startY=e.offsetY,this.startT=Date.now(),event.preventDefault(),event.stopPropagation()}}},{key:"handleTouchStart",value:function(e){this.isPanning=!0,this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.startT=Date.now(),event.stopPropagation()}},{key:"handleTouchEnd",value:function(e){this.isPanning=!1,event.stopPropagation(),e.preventDefault()}},{key:"handleTouchCancel",value:function(e){this.isPanning=!1,this.event.stopPropagation(),e.preventDefault()}},{key:"handleTouchMove",value:function(e){if(this.isPanning){var t=(e.touches[0].pageX-this.startX)*I,a=(e.touches[0].pageY-this.startY)*I;this.handlePan(t,a),this.startX=e.touches[0].pageX,this.startY=e.touches[0].pageY,this.startT=Date.now(),event.stopPropagation(),e.preventDefault()}}},{key:"hideCanvasEl",value:function(){this.canvasRef.style.visibility="hidden"}},{key:"onCanPlay",value:function(){this.props.onCanPlay(),this.shouldRender360()&&this.gl?requestAnimationFrame(this.render360):this.canvasRef&&this.hideCanvasEl()}},{key:"render360",value:function(){this.props.touchEnabled&&this.handleFlick(),this.props.keyboardEnabled&&this.handleKeyboardInputs();var e=new S["default"](this.videoRef.getVideoPlayer,this.videoRef.getRotation),t=e.getVideoEl,a=t();if(a)try{var s=this.gl,i=this.indexBuffer,n=this.matrixMultiply3x3,r=this.matrixRotateX,o=this.matrixRotateY,l=this.pitch,u=this.shaderProgram,d=this.vertexBuffer,c=this.videoTexture,p=this.yaw;s.bindTexture(s.TEXTURE_2D,c),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.CLAMP_TO_EDGE),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.CLAMP_TO_EDGE),s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,a),s.bindTexture(s.TEXTURE_2D,null),s.useProgram(u),s.disable(s.CULL_FACE),s.disable(s.BLEND),s.disable(s.SCISSOR_TEST),s.disable(s.DEPTH_TEST),s.depthFunc(s.ALWAYS),s.clearColor(0,0,0,0),s.clear(s.COLOR_BUFFER_BIT);var h=n(r(l),o(p));s.uniformMatrix4fv(s.getUniformLocation(u,"viewMatrix"),!1,new Float32Array(h)),s.uniform1f(s.getUniformLocation(u,"nearPlane"),A),s.uniform1f(s.getUniformLocation(u,"aspectRatio"),this.props.windowWidth/this.props.windowHeight),s.bindBuffer(s.ARRAY_BUFFER,d),s.enableVertexAttribArray(s.getAttribLocation(u,"vs_Position")),s.vertexAttribPointer(s.getAttribLocation(u,"vs_Position"),2,s.FLOAT,!1,0,0),s.activeTexture(s.TEXTURE0),s.bindTexture(s.TEXTURE_2D,c),s.uniform1i(s.getUniformLocation(u,"texture0"),0),s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,i),s.drawElements(s.TRIANGLES,6,s.UNSIGNED_SHORT,0),requestAnimationFrame(this.render360)}catch(f){this.hideCanvasEl()}}},{key:"attachRenderer",value:function(){var e=parseFloat(getComputedStyle(this.canvasRef).width),t=parseFloat(getComputedStyle(this.canvasRef).height);this.canvasRef.width===e&&this.canvasRef.height===t||(this.canvasRef.width=e,this.canvasRef.height=t),this.gl=null;try{this.gl=this.canvasRef.getContext("experimental-webgl")}catch(a){w["default"].warn(a)}this.gl&&(this.fragmentShader=this.compileShader(this.gl.VERTEX_SHADER,this.fsSource()),this.vertexShader=this.compileShader(this.gl.FRAGMENT_SHADER,this.vsSource()),this.shaderProgram=this.gl.createProgram(),this.gl.attachShader(this.shaderProgram,this.vertexShader),this.gl.attachShader(this.shaderProgram,this.fragmentShader),this.gl.linkProgram(this.shaderProgram),this.gl.getProgramParameter(this.shaderProgram,this.gl.LINK_STATUS)||w["default"].log("Unable to initialize the shader program:\n          "+this.gl.getProgramInfoLog(this.shaderProgram)),this.vertexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.vertexBuffer),this.gl.bufferData(this.gl.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,1,1]),this.gl.STATIC_DRAW),this.indexBuffer=this.gl.createBuffer(),this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.indexBuffer),this.gl.bufferData(this.gl.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2,1,3,2]),this.gl.STATIC_DRAW),this.videoTexture=this.gl.createTexture())}},{key:"compileShader",value:function(e,t){var a=this.gl.createShader(e);return this.gl.shaderSource(a,t),this.gl.compileShader(a),this.gl.getShaderParameter(a,this.gl.COMPILE_STATUS)?a:(w["default"].log("An error occurred compiling the shaders: "+this.gl.getShaderInfoLog(a)),null)}},{key:"fsSource",value:function(){return"attribute vec2 vs_Position;varying vec3 fs_RayDir;uniform mat4 viewMatrix;uniform float nearPlane;uniform float aspectRatio;void main() {   highp vec2 viewportPos = vs_Position * 2.0 - 1.0;   fs_RayDir = (viewMatrix * vec4(viewportPos.xy * vec2(aspectRatio, -1.0),                 nearPlane, 0.0)).xyz;   gl_Position = vec4(viewportPos * vec2(1.0, -1.0), 0.0, 1.0);}"}},{key:"vsSource",value:function(){return"varying highp vec3 fs_RayDir;uniform sampler2D texture0;const highp float kInvPi = (1.0 / 3.14159265358);const highp float kInv2Pi = (0.5 / 3.14159265358);mediump vec2 projectEquirectangular(highp vec3 nrmDir) {  return vec2(fract(0.5 + atan(nrmDir.x, nrmDir.z) * kInv2Pi),              0.5 - asin(nrmDir.y) * kInvPi);}void main() {  mediump vec2 texCoord = projectEquirectangular(normalize(fs_RayDir));  lowp vec3 rgb = texture2D(texture0, texCoord).xyz;  gl_FragColor = vec4(rgb, 1.0);}"}},{key:"matrixRotateX",value:function(e){var t=Math.cos(e),a=Math.sin(e);return[1,0,0,0,t,-a,0,a,t]}},{key:"matrixRotateY",value:function(e){var t=Math.cos(e),a=Math.sin(e);return[t,0,a,0,1,0,-a,0,t]}},{key:"matrixMultiply3x3",value:function(e,t){for(var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],s=0;s<3;s++)for(var i=0;i<3;i++)for(var n=0;n<3;n++)a[4*s+i]+=e[3*s+n]*t[3*n+i];return a}},{key:"clamp",value:function(e,t,a){return Math.min(Math.max(t,e),a)}}]),t}(v["default"].Component);B.defaultProps={is360:!1,touchEnabled:!1,keyboardEnabled:!1,onCanPlay:function(){}},B.propTypes={is360:v["default"].PropTypes.bool,onCanPlay:v["default"].PropTypes.func,touchEnabled:v["default"].PropTypes.bool,keyboardEnabled:v["default"].PropTypes.bool,windowHeight:v["default"].PropTypes.number.isRequired,windowWidth:v["default"].PropTypes.number.isRequired},t["default"]=B},696:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){function a(e,t,a){switch(e){case 90:return[0,-a];case 180:return[-t,-a];case-90:return[-t,0];default:return[0,0]}}function s(e,t,a){switch(e){case-90:case 90:return[a,t];case 180:default:return[t,a]}}function i(){var t=e();return t&&t.element&&t.element.querySelector?t.element.querySelector("video")||{}:{}}function n(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50,s=i().readyState>=2,r=t>0;s&&r?e():r&&setTimeout(function(){return n(e,t-a,a)},a)}function o(){var e=document.createElement("canvas"),n=i(),o=n.videoWidth,l=n.videoHeight,u=e.getContext("2d");if(!o||!l)return new ImageData(1,1);var d=t()||0,c=s(d,o,l),p=(0,r["default"])(c,2),h=p[0],f=p[1],m=a(d,o,l),y=(0,r["default"])(m,2),v=y[0],g=y[1];return e.width=h,e.height=f,u.clearRect(0,0,h,f),u.rotate(d*Math.PI/180),u.translate(v,g),u.drawImage(n,0,0),u.getImageData(0,0,h,f)}return{onceVideoReady:n,captureFrame:o,getVideoEl:i}}Object.defineProperty(t,"__esModule",{value:!0});var n=a(543),r=s(n);t["default"]=i},697:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return parseFloat(e[t].replace(/\x03/,""))}Object.defineProperty(t,"__esModule",{value:!0}),t.BASE_VIDEO_INDENTIFIER=void 0;var n=a(552),r=s(n),o=a(267),l=s(o),u=a(293),d=s(u),c=a(341),p=s(c),h=a(294),f=s(h),m=a(345),y=s(m),v=a(1),g=s(v),b=a(30),T=s(b),E=a(694),P=s(E),w=a(603),C=s(w),S=a(517),_=s(S),M=a(363),k=s(M),R=a(519),I=s(R),N=a(696),A=s(N),O=1e3,D=t.BASE_VIDEO_INDENTIFIER="BaseVideo",L=function(e){function t(e){(0,d["default"])(this,t);var a=(0,f["default"])(this,(t.__proto__||(0,l["default"])(t)).call(this,e));return a.state={playerWidth:null,playerHeight:null,orientation:0},a.setupPlayerTimeout=null,a.autoplayTimeout=null,a.videoRoot=!0,a.instance=++t.Instances,a.videoPlayer=null,a.textTracks=[],a.addedTracks=[],a.propsHaveChanged=k["default"].propsHaveChanged(),a.throttledHandleVideoPlayerMetadata=k["default"].throttle(a.processMetadata.bind(a),O),a.getRotation=a.getRotation.bind(a),a.getVideoPlayer=a.getVideoPlayer.bind(a),a.handleAddTrack=a.handleAddTrack.bind(a),a.handleCueChange=a.handleCueChange.bind(a),a.handleInitialized=a.handleInitialized.bind(a),a.handlePlay=a.handlePlay.bind(a),a.handlePause=a.handlePause.bind(a),a.handlePlaying=a.handlePlaying.bind(a),a.handleSeeking=a.handleSeeking.bind(a),a.handleSeeked=a.handleSeeked.bind(a),a.handleTimeUpdate=a.handleTimeUpdate.bind(a),a.handleEnded=a.handleEnded.bind(a),a.handleError=a.handleError.bind(a),a.handleStalled=a.handleStalled.bind(a),e.onCreate(),a}return(0,y["default"])(t,e),(0,p["default"])(t,[{key:"processMetadata",value:function(e){if(e.metadata.TIT3){var t=i(e.metadata,"TIT3");this.props.onNTP({ntp:t})}if(e.metadata.TKEY){var a=i(e.metadata,"TKEY");a=90*Math.floor((Math.floor(a)+45)/90)%360,this.props.onOrientation({orientation:a}),this.setState({orientation:a})}if(e.metadata.TMED&&e.metadata.TMOO){var s=i(e.metadata,"TMED"),n=i(e.metadata,"TMOO");this.setPlayerDimensions({playerWidth:s,playerHeight:n})}}},{key:"instanceId",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=this.props.id,a=t?[t]:[D,this.instance];return e&&a.push(e),a.join("-")}},{key:"componentDidMount",value:function(){var e=this;this.props.onMount(),this.setupPlayerTimeout=setTimeout(function(){e.setupPlayer()})}},{key:"componentWillUnmount",value:function(){this.props.onUnmount(),this.setupPlayerTimeout&&clearTimeout(this.setupPlayerTimeout),this.autoplayTimeout&&clearTimeout(this.autoplayTimeout),this.removeMetadataListeners(),theoplayer&&this.videoPlayer&&theoplayer.destroy(this.videoPlayer),this.videoPlayer=null}},{key:"componentWillReceiveProps",value:function(e){this.controlPlayback(e),this.controlVolume(e)}},{key:"shouldComponentUpdate",value:function(e,t){return this.pauseChanged(e)||this.orientationChanged(e,t)||this.windowDimensionsChanged(e)||this.videoDimensionsChanged(e,t)||this.fillModeChanged(e)||this.srcChanged(e)}},{key:"componentDidUpdate",value:function(e,t){(this.orientationChanged(e,t)||this.windowDimensionsChanged(e)||this.videoDimensionsChanged(e,t)||this.fillModeChanged(e))&&this.resizeVideo(),this.srcChanged(e)&&this.updateVideoSource()}},{key:"pauseChanged",value:function(e){return this.propsHaveChanged("paused",e)}},{key:"fillModeChanged",value:function(e){return this.propsHaveChanged("fillMode",e)}},{key:"orientationChanged",value:function(e,t){return this.propsHaveChanged("orientation",e)||this.state.orientation!==t.orientation}},{key:"windowDimensionsChanged",value:function(e){return this.propsHaveChanged(["windowWidth","windowHeight"],e)}},{key:"videoDimensionsChanged",value:function(e,t){return this.propsHaveChanged(["playerWidth","playerHeight"],e)||this.state.playerWidth!==t.playerWidth||this.state.playerHeight!==t.playerHeight}},{key:"srcChanged",value:function(e){return this.propsHaveChanged("url",e)}},{key:"isMobileAutoplay",value:function(){return this.props.autoplay&&(I["default"].isEnabled("MobilePlayback")||I["default"].isEnabled("iPadPlayback"))&&!_["default"].isDesktop()&&_["default"].hasInlineAutoplayVideo()}},{key:"setupPlayer",value:function(){var e=this,t=T["default"].findDOMNode(this.refs.video);if(t){var a=document.createElement("video");a.src=this.props.url,a.id=this.instanceId(),a.autoplay=this.props.autoplay,this.isMobileAutoplay()&&(a.muted=!0),a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline",""),a.style.transformStyle="preserve-3d",a.style.overflow="hidden",a.style.position="absolute",a.className=D,t.appendChild(a),this.videoPlayer=theoplayer(a,{withCredentials:this.props.isReplay}),this.controlVolume(this.props),this.attachVideoEvents(),this.isMobileAutoplay()&&(this.autoplayTimeout=setTimeout(function(){e.setAutoplayAttributes(),e.videoPlayer.play()}))}}},{key:"setAutoplayAttributes",value:function(){var e=document.querySelector("#"+this.instanceId()+" video");e&&(e.muted=!0,e.autoplay=!0)}},{key:"setPlayerState",value:function(e){this.playerState=e}},{key:"setPlayerStalled",value:function(){this.playerState!==C["default"].STOPPED&&this.setPlayerState(C["default"].STALLED)}},{key:"handleInitialized",value:function(){this.props.requestedTimecode!==-1&&this.setTime(this.props.requestedTimecode),this.setPlayerState(C["default"].INITIALIZING),this.resizeVideo(),this.addMetadataListener(),this.props.onInitialized()}},{key:"handlePlay",value:function(){_["default"].hasInlineVideo()||this.setPlayerState(C["default"].PLAYING),this.props.onPlay()}},{key:"handlePlaying",value:function(){this.setPlayerState(C["default"].PLAYING),this.ensurePlayerDimensions(),this.props.onPlaying()}},{key:"handlePause",value:function(){_["default"].hasInlineVideo()||this.setPlayerState(C["default"].PAUSED),this.props.onPause()}},{key:"handleSeeking",value:function(){this.setPlayerStalled(),this.props.onSeeking()}},{key:"handleSeeked",value:function(){this.setPlayerState(C["default"].PLAYING),this.props.onSeeked()}},{key:"handleTimeUpdate",value:function(){if(this.videoPlayer){var e=Number(this.videoPlayer.currentTime),t=Number(this.videoPlayer.duration),a=this.videoPlayer.currentMonotonicTime;this.props.onTimeUpdate({currentTime:e,duration:t,currentMonotonicTime:a})}}},{key:"handleStalled",value:function(){this.setPlayerStalled(),this.props.onStalled()}},{key:"handleEnded",value:function(){this.setPlayerState(C["default"].STOPPED),this.props.onEnded()}},{key:"handleError",value:function(){this.setPlayerState(C["default"].UNAVAILABLE),this.props.onError()}},{key:"attachVideoEvents",value:function(){var e=this,t=new A["default"](function(){return e.videoPlayer},this.getRotation);this.props.onSetupCapture({videoUtils:t,getCurrentMonotonicTime:function(){return e.videoPlayer&&e.videoPlayer.currentMonotonicTime||0}}),this.videoPlayer.addEventListener("initialized",this.handleInitialized),this.videoPlayer.addEventListener("play",this.handlePlay),this.videoPlayer.addEventListener("pause",this.handlePause),this.videoPlayer.addEventListener("canplay",this.props.onCanPlay),this.videoPlayer.addEventListener("playing",this.handlePlaying),this.videoPlayer.addEventListener("seeking",this.handleSeeking),this.videoPlayer.addEventListener("seeked",this.handleSeeked),this.videoPlayer.addEventListener("timeupdate",this.handleTimeUpdate),this.videoPlayer.addEventListener("ended",this.handleEnded),this.videoPlayer.addEventListener("error",this.handleError),this.videoPlayer.addEventListener("waiting",this.handleStalled),this.videoPlayer.addEventListener("stalled",this.handleStalled),this.videoPlayer.addEventListener("offline",this.handleStalled)}},{key:"addMetadataListener",value:function(){if(this.videoPlayer){var e=this.videoPlayer.textTracks;e&&(this.textTracks.push(e),e.addEventListener("addtrack",this.handleAddTrack))}}},{key:"removeMetadataListeners",value:function(){var e=this;this.textTracks.map(function(t){return t.removeEventListener("addtrack",e.handleAddTrack)}),this.addedTracks.map(function(t){return t.removeEventListener("cuechange",e.handleCueChange)})}},{key:"handleAddTrack",value:function(e){var t=e.track;this.addedTracks.push(t),t.addEventListener("cuechange",this.handleCueChange)}},{key:"handleCueChange",value:function(e){var t=e.cue.tag.frames,a={};t.forEach(function(e){a[e.id]=e.text}),this.handleVideoPlayerMetadata({metadata:a})}},{key:"handleVideoPlayerMetadata",value:function(e){e.metadata&&(e.metadata.TKEY||e.metadata.TMED||e.metadata.TMOO?this.processMetadata(e):this.throttledHandleVideoPlayerMetadata(e))}},{key:"updateVideoSource",value:function(){this.videoPlayer&&(this.videoPlayer.src=this.props.url)}},{key:"getOrientation",value:function(){return this.props.orientation||this.state.orientation}},{key:"getRotation",value:function(){switch(this.getOrientation()){case 0:case 360:return 0;case 90:return 90;case 180:return 180;case 270:return-90;default:return 0}}},{key:"setPlayerDimensions",value:function(e){var t=e.playerWidth,a=e.playerHeight;this.setState({playerWidth:t,playerHeight:a}),this.props.onDimensions({width:t,height:a})}},{key:"ensurePlayerDimensions",
value:function(){var e=this.props,t=this.state,a=e.playerWidth||t.playerWidth,s=e.playerHeight||t.playerHeight;if(!a||!s){var i=document.querySelector("#"+this.instanceId()+" video");a=i&&i.videoWidth,s=i&&i.videoHeight,this.setPlayerDimensions({playerWidth:a,playerHeight:s})}}},{key:"rotateVideo",value:function(e,t){var a=".Video > #"+this.instanceId(),s=document.querySelector(a),i=this.getRotation();if(s){s.style.left="50%",s.style.top="50%";var n=this.props.fillMode===P["default"].CONTAIN,r=90===Math.abs(i),o=r?t>e:e>t;if(n&&o){var l=void 0;l=r?(this.props.windowHeight-e)/4:(this.props.windowHeight-t)/4,s.style.top="calc(50% - "+l+"px)"}}TweenLite.to(a,0,{x:"-50%",y:"-50%",rotation:i})}},{key:"resizeVideo",value:function(){if(this.videoPlayer){var e=this.props,t=this.state,a=this.videoPlayer,s=568,i=320,n=e.playerWidth||t.playerWidth||i,o=e.playerHeight||t.playerHeight||s,l=void 0,u=void 0;switch(e.fillMode){case P["default"].COVER:u=Math.max;break;case P["default"].CONTAIN:default:u=Math.min}var d=90===Math.abs(this.getRotation());l=d?u(e.windowWidth/o,e.windowHeight/n):u(e.windowWidth/n,e.windowHeight/o);var c=n*l,p=o*l,h=(0,r["default"])(c)?s:c,f=(0,r["default"])(p)?i:p;a.width=h,a.height=f,this.rotateVideo(h,f)}}},{key:"controlVolume",value:function(e){this.videoPlayer&&(this.videoPlayer.muted=!!e.muted)}},{key:"controlPlayback",value:function(e){e.paused!==this.props.paused&&(e.paused?this.pause():this.play())}},{key:"render",value:function(){var e=this.props.fillMode===P["default"].CONTAIN,t=["Video"];return e&&t.push("Video--isContain"),g["default"].createElement("div",{ref:"video",className:t.join(" ")})}},{key:"play",value:function(){var e=this.videoPlayer;this.videoPlayer&&e&&e.play()}},{key:"pause",value:function(){var e=this.videoPlayer;this.videoPlayer&&e&&e.pause()}},{key:"setTime",value:function(e){var t=this.videoPlayer;t&&this.props.isReplay&&(t.currentTime=e)}},{key:"getPlayerState",value:function(){return this.playerState}},{key:"getVideoPlayer",value:function(){return this.videoPlayer}}]),t}(g["default"].Component);L.Instances=0,L.defaultProps={isReplay:!1,autoplay:!0,muted:!1,paused:!1,orientation:0,fillMode:P["default"].CONTAIN,onCreate:function(){},onMount:function(){},onUnmount:function(){},onNTP:function(){},onOrientation:function(){},onDimensions:function(){},onSetupCapture:function(){},onInitialized:function(){},onCanPlay:function(){},onPlaying:function(){},onPlay:function(){},onPause:function(){},onSeeking:function(){},onSeeked:function(){},onStalled:function(){},onTimeUpdate:function(){},onEnded:function(){},onError:function(){}},L.propTypes={url:g["default"].PropTypes.string.isRequired,playerWidth:g["default"].PropTypes.number,playerHeight:g["default"].PropTypes.number,windowWidth:g["default"].PropTypes.number.isRequired,windowHeight:g["default"].PropTypes.number.isRequired,id:g["default"].PropTypes.string,isReplay:g["default"].PropTypes.bool,autoplay:g["default"].PropTypes.bool,muted:g["default"].PropTypes.bool,paused:g["default"].PropTypes.bool,orientation:g["default"].PropTypes.number,fillMode:g["default"].PropTypes.oneOf(E.fillModeValues),onCreate:g["default"].PropTypes.func,onMount:g["default"].PropTypes.func,onUnmount:g["default"].PropTypes.func,onNTP:g["default"].PropTypes.func,onOrientation:g["default"].PropTypes.func,onDimensions:g["default"].PropTypes.func,requestedTimecode:g["default"].PropTypes.number,onSetupCapture:g["default"].PropTypes.func,onInitialized:g["default"].PropTypes.func,onCanPlay:g["default"].PropTypes.func,onPlaying:g["default"].PropTypes.func,onPlay:g["default"].PropTypes.func,onPause:g["default"].PropTypes.func,onSeeking:g["default"].PropTypes.func,onSeeked:g["default"].PropTypes.func,onStalled:g["default"].PropTypes.func,onTimeUpdate:g["default"].PropTypes.func,onEnded:g["default"].PropTypes.func,onError:g["default"].PropTypes.func},t["default"]=L},742:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.content=t.metaTitle=t.metaDescription=void 0;var s=a(243),i=(0,s.defineMessages)({metaDescription:{id:"vanity.tos.META_DESCRIPTION",defaultMessage:"The Terms of Service for Periscope."},metaTitle:{id:"vanity.tos.META_TITLE",defaultMessage:"Periscope Terms of Service"},content:{id:"vanity.tos.content",defaultMessage:"<section class='info' id='tos-current'>\n  <table class='c26'>\n     <tbody>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <p class='c14'><span class='c1 c11'>If you live in the United States</span><span class='c1'>, the Periscope User Agreement comprises these </span><span class='c12'><a class='c2' href='#h.n7eykj9k1yfa'>Terms of Service</a></span><span class='c1'>, the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //twitter.com/privacy&amp;sa=D&amp;ust=1478725517047000&amp;usg=AFQjCNFJ7-k9iIzs0hBqnwi9XWQNTLzVeQ'>Twitter Privacy Policy</a></span><span class='c1'>, the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/privacy&amp;sa=D&amp;ust=1478725517047000&amp;usg=AFQjCNFyutjR63kA6GDVYPzjItkK_FkO6A'>Periscope Privacy Statement</a></span><span class='c1'>, the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517048000&amp;usg=AFQjCNHDmwePCmUMReJ2HKC60E2g2K_Jqg'>Periscope Community Guidelines</a></span><span class='c4 c1'>&nbsp;and all incorporated policies.</span></p>\n              <p class='c14 c18'><span class='c4 c1'></span></p>\n              <p class='c14'><span class='c1 c11'>If you live in the European Union or otherwise outside the United States</span><span class='c1'>, the Periscope User Agreement comprises these </span><span class='c12'><a class='c2' href='#h.89bzlovxhdgb'>Terms of Service</a></span><span class='c1'>, the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //twitter.com/privacy&amp;sa=D&amp;ust=1478725517050000&amp;usg=AFQjCNHbHJ7T5u8esXP-l8DkA2AdL2rZkA'>Twitter Privacy Policy</a></span><span class='c1'>, the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/privacy&amp;sa=D&amp;ust=1478725517051000&amp;usg=AFQjCNFjcogqGUbvulPI9o6wao5mrUnyNQ'>Periscope Privacy Statement</a></span><span class='c1'>, the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517051000&amp;usg=AFQjCNHfrCNT7FyJ4JavCqmgKNC1LD5Utw'>Periscope Community Guidelines</a></span><span class='c4 c1'>&nbsp;and all incorporated policies.</span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <p class='c27 c18 c29'><span class='c4 c23'></span></p>\n              <a id='t.08a6c811de8c8522234b2c580e7475f0fb062759'></a><a id='t.1'></a>\n              <table class='c26'>\n                 <tbody>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h2 class='c24' id='h.n7eykj9k1yfa'><span class='c19 c21 c11'>Terms of Service</span></h2>\n                          <p class='c5'><span class='c1 c11'>(if you live in the United States)</span></p>\n                          <p class='c5'><span class='c4 c1'>These Terms of Service (&ldquo;Terms&rdquo;) govern your access to and use of Periscope, operated and provided by Twitter, Inc. and Twitter International Company (collectively, &ldquo;Twitter&rdquo;) (collectively, the &ldquo;Services&rdquo;), and any videos, information, text, links, graphics, photos, or other materials or arrangements of materials uploaded, downloaded or appearing on the Services (collectively referred to as &ldquo;Content&rdquo;). By using the Services you agree to be bound by these Terms.</span></p>\n                          <p class='c5'><span class='c1'>1. </span><span class='c9'><a class='c2' href='#h.z4gex0lznfxz'>Who May Use the Services</a></span></p>\n                          <p class='c5'><span class='c1'>2. </span><span class='c9'><a class='c2' href='#h.k4max68jztsb'>Privacy</a></span></p>\n                          <p class='c5'><span class='c1'>3. </span><span class='c9'><a class='c2' href='#h.bly0e68kwwvs'>Content on the Services</a></span></p>\n                          <p class='c5'><span class='c1'>4. </span><span class='c9'><a class='c2' href='#h.klq27h3j6pv8'>Using the Services</a></span></p>\n                          <p class='c5'><span class='c1'>5. </span><span class='c9'><a class='c2' href='#h.s2wdkstp4ki'>Disclaimers and Limitations of Liability</a></span></p>\n                          <p class='c5'><span class='c1'>6. </span><span class='c9'><a class='c2' href='#h.paze34291vwi'>General</a></span></p>\n                          <p class='c5 c18'><span class='c4 c13'></span></p>\n                       </td>\n                    </tr>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h3 class='c16' id='h.z4gex0lznfxz'><span class='c8'>1. Who May Use the Services</span></h3>\n                          <p class='c5'><span class='c1'>You may use the Services only if you agree to form a binding contract with Twitter and are not a person barred from receiving services under the laws of the applicable jurisdiction. In any case, you must be at least 13 years old to use the Services. If you are accepting these Terms and using the Services on behalf of a company, organization, government, or other legal entity, you represent and warrant that you are authorized to do so.</span></p>\n                       </td>\n                    </tr>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h3 class='c16' id='h.k4max68jztsb'><span class='c8'>2. Privacy</span></h3>\n                          <p class='c5'><span class='c1'>Our </span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //twitter.com/privacy&amp;sa=D&amp;ust=1478725517062000&amp;usg=AFQjCNFqGQHQevZvAQTT7sEjXIyecmLuMw'>Privacy Policy</a></span><span class='c1'>&nbsp;(</span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //www.twitter.com/privacy&amp;sa=D&amp;ust=1478725517062000&amp;usg=AFQjCNFukSxJf8xaiGNv68-fBbqu-CTZ9Q'>https: //www.twitter.com/privacy</a></span><span class='c1'>) and the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/privacy&amp;sa=D&amp;ust=1478725517063000&amp;usg=AFQjCNEP6aGAyfQ8Vqcpudmdk40nfOVp2A'>Periscope Privacy Statement (https: //www.periscope.tv/privacy)</a></span><span class='c1'>&nbsp;describe how we handle the information you provide to us when you use our Services. You understand that through your use of the Services you consent to the collection and use (as set forth in the Privacy Policy) of this information, including the transfer of this information to the United States, Ireland, and/or other countries for storage, processing and use by Twitter and its affiliates.</span></p>\n                       </td>\n                    </tr>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h3 class='c16' id='h.bly0e68kwwvs'><span class='c8'>3. Content on the Services</span></h3>\n                          <p class='c5'><span class='c4 c1'>You are responsible for your use of the Services and for any Content you provide, including compliance with applicable laws, rules, and regulations. You should only provide Content that you are comfortable sharing with others.</span></p>\n                          <p class='c5'><span class='c4 c1'>Any use or reliance on any Content or materials posted via the Services or obtained by you through the Services is at your own risk. We do not endorse, support, represent or guarantee the completeness, truthfulness, accuracy, or reliability of any Content or communications posted via the Services or endorse any opinions expressed via the Services. You understand that by using the Services, you may be exposed to Content that might be offensive, harmful, inaccurate or otherwise inappropriate, or in some cases, postings that have been mislabeled or are otherwise deceptive. All Content is the sole responsibility of the person who originated such Content. We may not monitor or control the Content posted via the Services and, we cannot take responsibility for such Content.</span></p>\n                          <p class='c5'><span class='c1'>We respect the intellectual property rights of others and expect users of the Services to do the same. We reserve the right to remove Content alleged to be infringing without prior notice, at our sole discretion, and without liability to you. We will respond to notices of alleged copyright infringement that comply with applicable law and are properly provided to us, as described in our </span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/articles/15795&amp;sa=D&amp;ust=1478725517066000&amp;usg=AFQjCNEgG5KB-lr9RATt3rLGMZbxPyzPww'>Copyright policy</a></span><span class='c1'>&nbsp;(</span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/articles/15795&amp;sa=D&amp;ust=1478725517066000&amp;usg=AFQjCNEgG5KB-lr9RATt3rLGMZbxPyzPww'>https: //support.twitter.com/articles/15795</a></span><span class='c1'>). If you believe that your Content has been copied in a way that constitutes copyright infringement, please report this by visiting our </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms/dmca&amp;sa=D&amp;ust=1478725517067000&amp;usg=AFQjCNHsRhQiVMN-ogGnslSdnKZhB5QOcA'>Copyright reporting form</a></span><span class='c1'>&nbsp;(</span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms/dmca&amp;sa=D&amp;ust=1478725517067000&amp;usg=AFQjCNHsRhQiVMN-ogGnslSdnKZhB5QOcA'>https: //support.twitter.com/forms/dmca</a></span><span class='c4 c1'>) or contacting our designated copyright agent at: </span></p>\n                          <p class='c17'><span class='c4 c1'>Twitter, Inc.</span></p>\n                          <p class='c17'><span class='c4 c1'>Attn:  Copyright Agent - Periscope</span></p>\n                          <p class='c17'><span class='c4 c1'>1355 Market Street, Suite 900</span></p>\n                          <p class='c17'><span class='c4 c1'>San Francisco, CA 94103</span></p>\n                          <p class='c17'><span class='c1'>Reports:  </span><span class='c4 c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms/dmca&amp;sa=D&amp;ust=1478725517070000&amp;usg=AFQjCNHctZ-2drsPmqHBEz-N8QdwR0lEjA'>https: //support.twitter.com/forms/dmca</a></span></p>\n                          <p class='c5'><span class='c1'>Email:  copyright@periscope.tv </span></p>\n                          <h4 class='c7' id='h.idsyq4lpw092'><span class='c1 c11'>Your Rights</span></h4>\n                          <p class='c5'><span class='c4 c1'>You retain your rights to any Content you submit, post or display on or through the Services. What&rsquo;s yours is yours &mdash; you own your Content (and your videos are part of the Content).</span></p>\n                          <p class='c5'><span class='c4 c1'>By submitting, posting or displaying Content on or through the Services, you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, copy, reproduce, process, adapt, modify, publish, transmit, display and distribute such Content in any and all media or distribution methods (now known or later developed). This license authorizes us to make your Content available to the rest of the world and to let others do the same. You agree that this license includes the right for Twitter to provide, promote, and improve the Services and to make Content submitted to or through the Services available to other companies, organizations or individuals for the syndication, broadcast, distribution, promotion or publication of such Content on other media and services, subject to our terms and conditions for such Content use. Such additional uses by Twitter, or other companies, organizations or individuals, may be made with no compensation paid to you with respect to the Content that you submit, post, transmit or otherwise make available through the Services.</span></p>\n                          <p class='c5'><span class='c4 c1'>Twitter has an evolving set of rules for how ecosystem partners can interact with your Content on the Services. These rules exist to enable an open ecosystem with your rights in mind. You understand that we may modify or adapt your Content as it is distributed, syndicated, published, or broadcast by us and our partners and/or make changes to your Content in order to adapt the Content to different media. You represent and warrant that you have all the rights, power and authority necessary to grant the rights granted herein to any Content that you submit.</span></p>\n                          <p class='c14 c18'><span class='c4 c13'></span></p>\n                       </td>\n                    </tr>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h3 class='c16' id='h.klq27h3j6pv8'><span class='c8'>4. Using the Services</span></h3>\n                          <p class='c5'><span class='c1'>Please review the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517075000&amp;usg=AFQjCNFnFkQmq7M3gr8Xz-Cinx1Zp8P8ew'>Periscope Community Guidelines</a></span><span class='c4 c1'>&nbsp;(https: //www.periscope.tv/content) which are part of the User Agreement and outline what is prohibited on the Services. You may use the Services only in compliance with these Terms and all applicable laws, rules and regulations.</span></p>\n                          <p class='c5'><span class='c4 c1'>Our Services evolve constantly. As such, the Services may change from time to time, at our discretion. We may stop (permanently or temporarily) providing the Services or any features within the Services to you or to users generally. We also retain the right to create limits on use and storage at our sole discretion at any time. We may also remove or refuse to distribute any Content on the Services, suspend or terminate users, and reclaim usernames without liability to you.</span></p>\n                          <p class='c5'><span class='c4 c1'>In consideration for Twitter granting you access to and use of the Services, you agree that Twitter and its third-party providers and partners may place advertising on the Services or in connection with the display of Content or information from the Services whether submitted by you or others. You also agree not to misuse our Services, for example, by interfering with them or accessing them using a method other than the interface and the instructions that we provide. You may not do any of the following while accessing or using the Services:  (i) access, tamper with, or use non-public areas of the Services, Twitter&rsquo;s computer systems, or the technical delivery systems of Twitter&rsquo;s providers; (ii) probe, scan, or test the vulnerability of any system or network or breach or circumvent any security or authentication measures; (iii) access or search or attempt to access or search the Services by any means (automated or otherwise) other than through our currently available, published interfaces that are provided by Twitter (and only pursuant to the applicable terms and conditions), unless you have been specifically allowed to do so in a separate agreement with Twitter (NOTE:  crawling the Services is permissible if done in accordance with the provisions of the robots.txt file, however, scraping the Services without the prior consent of Twitter is expressly prohibited); (iv) forge any TCP/IP packet header or any part of the header information in any email or posting, or in any way use the Services to send altered, deceptive or false source-identifying information; or (v) interfere with, or disrupt, (or attempt to do so), the access of any user, host or network, including, without limitation, sending a virus, overloading, flooding, spamming, mail-bombing the Services, or by scripting the creation of Content in such a manner as to interfere with or create an undue burden on the Services. We also reserve the right to access, read, preserve, and disclose any information as we reasonably believe is necessary to (i) satisfy any applicable law, regulation, legal process or governmental request, (ii) enforce the Terms, including investigation of potential violations hereof, (iii) detect, prevent, or otherwise address fraud, security or technical issues, (iv) respond to user support requests, or (v) protect the rights, property or safety of Twitter, its users and the public. Twitter does not disclose personally-identifying information to third parties except in accordance with our Privacy Policy.</span></p>\n                          <h4 class='c7' id='h.tnedrnhneop2'><span class='c1 c11'>Your Account</span></h4>\n                          <p class='c5'><span class='c4 c1'>You may need to create an account to use some of our Services. You are responsible for safeguarding your account, so use a strong password and limit its use to this account. We cannot and will not be liable for any loss or damage arising from your failure to comply with the above.</span></p>\n                          <p class='c5'><span class='c4 c1'>You can control most communications from the Services. We may need to provide you with certain communications, such as service announcements and administrative messages. These communications are considered part of the Services and your account, and you may not be able to opt-out from receiving them. If you added your phone number to your account and you later change or deactivate that phone number, you must update your account information to help prevent us from communicating with anyone who acquires your old number.</span></p>\n                          <h4 class='c7' id='h.9fu0dlic2jq'><span class='c1 c11'>Your License to Use the Services</span></h4>\n                          <p class='c5'><span class='c4 c1'>Twitter gives you a personal, worldwide, royalty-free, non-assignable and non-exclusive license to use the software provided to you as part of the Services. This license has the sole purpose of enabling you to use and enjoy the benefit of the Services as provided by Twitter, in the manner permitted by these Terms.</span></p>\n                          <p class='c5'><span class='c4 c1'>The Services are protected by copyright, trademark, and other laws of both the United States and foreign countries. Nothing in the Terms gives you a right to use the Twitter name or any of the Twitter trademarks, logos, domain names, and other distinctive brand features. All right, title, and interest in and to the Services (excluding Content provided by users) are and will remain the exclusive property of Twitter and its licensors. Any feedback, comments, or suggestions you may provide regarding Twitter, or the Services is entirely voluntary and we will be free to use such feedback, comments or suggestions as we see fit and without any obligation to you.</span></p>\n                          <h4 class='c7' id='h.m6382hp9y08o'><span class='c1 c11'>Ending These Terms</span></h4>\n                          <p class='c5'><span class='c1'>You may end your legal agreement with Twitter at any time by deactivating your accounts and discontinuing your use of the Services. See </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //help.periscope.tv/customer/portal/articles/2460220&amp;sa=D&amp;ust=1478725517082000&amp;usg=AFQjCNEpi2Aj1uh20lpzsQg7-vi3B-z-Pw'>https: //help.periscope.tv/customer/portal/articles/2460220</a></span><span class='c4 c1'>&nbsp;for instructions on how to deactivate your account and the Privacy Policy for more information on what happens to your information.</span></p>\n                          <p class='c5'><span class='c1'>We may suspend or terminate your account or cease providing you with all or part of the Services at any time for any or no reason, including, but not limited to, if we reasonably believe:  (i) you have violated these Terms or the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517083000&amp;usg=AFQjCNF37FgDdC5IFRmk5UmgDzeArgE16Q'>Periscope Community </a></span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517084000&amp;usg=AFQjCNG8xMCboVD5hTt8c9gcMXM2eSi2Tw'>Guidelines</a></span><span class='c1'>, (ii) you create risk or possible legal exposure for us; (iii) your account should be removed due to prolonged inactivity; or (iv) our provision of the Services to you is no longer commercially viable. We will make reasonable efforts to notify you by the email address associated with your account or the next time you attempt to access your account, depending on the circumstances. In all such cases, the Terms shall terminate, including, without limitation, your license to use the Services, except that the following sections shall continue to apply:  2, 3, 5, and 6</span><span class='c1'>.</span></p>\n                       </td>\n                    </tr>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h3 class='c16' id='h.s2wdkstp4ki'><span class='c8'>5. Disclaimers and Limitations of Liability</span></h3>\n                          <h4 class='c7' id='h.wy2iz6cqpw9e'><span class='c1 c11'>The Services are Available &ldquo;AS-IS&rdquo;</span></h4>\n                          <p class='c5'><span class='c4 c1'>Your access to and use of the Services or any Content are at your own risk. You understand and agree that the Services are provided to you on an &ldquo;AS IS&rdquo; and &ldquo;AS AVAILABLE&rdquo; basis. The &ldquo;Twitter Entities&rdquo; refers to Twitter, its parents, affiliates, related companies, officers, directors, employees, agents, representatives, partners, and licensors. Without limiting the foregoing, to the maximum extent permitted under applicable law, THE TWITTER ENTITIES DISCLAIM ALL WARRANTIES AND CONDITIONS, WHETHER EXPRESS OR IMPLIED, OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. The Twitter Entities make no warranty or representation and disclaim all responsibility and liability for:  (i) the completeness, accuracy, availability, timeliness, security or reliability of the Services or any Content; (ii) any harm to your computer system, loss of data, or other harm that results from your access to or use of the Services or any Content; (iii) the deletion of, or the failure to store or to transmit, any Content and other communications maintained by the Services; and (iv) whether the Services will meet your requirements or be available on an uninterrupted, secure, or error-free basis. No advice or information, whether oral or written, obtained from the Twitter Entities or through the Services, will create any warranty or representation not expressly made herein.</span></p>\n                          <h4 class='c7' id='h.b1tadko1fbnp'><span class='c1 c11'>Limitation of Liability</span></h4>\n                          <p class='c5'><span class='c1'>TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE TWITTER ENTITIES SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOOD-WILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM (i) YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICES; (ii) ANY CONDUCT OR CONTENT OF ANY THIRD PARTY ON THE SERVICES, INCLUDING WITHOUT LIMITATION, ANY DEFAMATORY, OFFENSIVE OR ILLEGAL CONDUCT OF OTHER USERS OR THIRD PARTIES; (iii) ANY CONTENT OBTAINED FROM THE SERVICES; OR (iv) UNAUTHORIZED ACCESS, USE OR ALTERATION OF YOUR TRANSMISSIONS OR CONTENT. IN NO EVENT SHALL THE AGGREGATE LIABILITY OF THE TWITTER ENTITIES EXCEED THE GREATER OF ONE HUNDRED U.S. DOLLARS (U.S. $100.00) OR THE AMOUNT YOU PAID TWITTER, IF ANY, IN THE PAST SIX MONTHS FOR THE SERVICES GIVING RISE TO THE CLAIM. THE LIMITATIONS OF THIS SUBSECTION SHALL APPLY TO ANY THEORY OF LIABILITY, WHETHER BASED ON WARRANTY, CONTRACT, STATUTE, TORT (INCLUDING NEGLIGENCE) OR OTHERWISE, AND WHETHER OR NOT THE TWITTER ENTITIES HAVE BEEN INFORMED OF THE POSSIBILITY OF ANY SUCH DAMAGE, AND EVEN IF A REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE.</span></p>\n                       </td>\n                    </tr>\n                    <tr class='c0'>\n                       <td class='c15' colspan='1' rowspan='1'>\n                          <h3 class='c16' id='h.paze34291vwi'><span class='c8 c3'>6. General</span></h3>\n                          <p class='c5'><span class='c1 c3'>We may revise these Terms from time to time. The changes will not be retroactive, and the most current version of the Terms, which will always be at </span><span class='c1'>periscope.tv/tos</span><span class='c4 c1 c3'>, will govern our relationship with you. We will try to notify you of material revisions, for example via a service notification or an email to the email associated with your account. By continuing to access or use the Services after those revisions become effective, you agree to be bound by the revised Terms.</span></p>\n                          <p class='c5'><span class='c4 c1 c3'>The laws of the State of California, excluding its choice of law provisions, will govern these Terms and any dispute that arises between you and Twitter. All disputes related to these Terms or the Services will be brought solely in the federal or state courts located in San Francisco County, California, United States, and you consent to personal jurisdiction and waive any objection as to inconvenient forum.</span></p>\n                          <p class='c5'><span class='c4 c1 c3'>If you are a federal, state, or local government entity in the United States using the Services in your official capacity and legally unable to accept the controlling law, jurisdiction or venue clauses above, then those clauses do not apply to you. For such U.S. federal government entities, these Terms and any action related thereto will be governed by the laws of the United States of America (without reference to conflict of laws) and, in the absence of federal law and to the extent permitted under federal law, the laws of the State of California (excluding choice of law).</span></p>\n                          <p class='c5'><span class='c4 c1 c3'>In the event that any provision of these Terms is held to be invalid or unenforceable, then that provision will be limited or eliminated to the minimum extent necessary, and the remaining provisions of these Terms will remain in full force and effect. Twitter&rsquo;s failure to enforce any right or provision of these Terms will not be deemed a waiver of such right or provision.</span></p>\n                          <p class='c5'><span class='c1 c3'>These Terms are an agreement between you and Twitter, Inc., 1355 Market Street, Suite 900, San Francisco, CA 94103 U.S.A. If you have any questions about these Terms, please contact </span><span class='c12 c3'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms&amp;sa=D&amp;ust=1478725517092000&amp;usg=AFQjCNEODnR41sEU2vK1f8H2RxHjDJxf1Q'>us</a></span><span class='c4 c1 c3'>.</span></p>\n                          <p class='c5'><span class='c1 c11 c3'>Effective</span><span class='c1 c3'>:  </span><span class='c1'>November 15</span><span class='c1 c3'>, 2016</span></p>\n                       </td>\n                    </tr>\n                 </tbody>\n              </table>\n              <h2 class='c24 c25' id='h.89bzlovxhdgb'><span class='c19 c21 c11'></span></h2>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h2 class='c24' id='h.89bzlovxhdgb-1'><span class='c19 c21 c11'>Terms of Service</span></h2>\n              <p class='c5'><span class='c1 c11'>(if you live outside of the US)</span></p>\n              <p class='c5'><span class='c4 c1'>These Terms of Service (&ldquo;Terms&rdquo;) govern your access to and use of Periscope, operated and provided by Twitter, Inc. and Twitter International Company (collectively, &ldquo;Twitter&rdquo;) (collectively, the &ldquo;Services&rdquo;), and any videos, information, text, links, graphics, photos, or other materials or arrangements of materials uploaded, downloaded or appearing on the Services (collectively referred to as &ldquo;Content&rdquo;). By using the Services you agree to be bound by these Terms.</span></p>\n              <p class='c5'><span class='c1'>1. </span><span class='c9'><a class='c2' href='#h.cha3bwqaxrhe'>Who May Use the Services</a></span></p>\n              <p class='c5'><span class='c1'>2. </span><span class='c9'><a class='c2' href='#h.3s7rlznkxcki'>Privacy</a></span></p>\n              <p class='c5'><span class='c1'>3. </span><span class='c9'><a class='c2' href='#h.omf9jee9s3t4'>Content on the Services</a></span></p>\n              <p class='c5'><span class='c1'>4. </span><span class='c9'><a class='c2' href='#h.t876aonu1irv'>Using the Services</a></span></p>\n              <p class='c5'><span class='c1'>5. </span><span class='c9'><a class='c2' href='#h.377kun6d3mrc'>Disclaimers and Limitations of Liability</a></span></p>\n              <p class='c5'><span class='c1'>6. </span><span class='c9'><a class='c2' href='#h.vz9kd6pqjqfl'>General</a></span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h3 class='c16' id='h.cha3bwqaxrhe'><span class='c8'>1. Who May Use the Services</span></h3>\n              <p class='c5'><span class='c1'>You may use the Services only if you agree to form a binding contract with Twitter and are not a person barred from receiving services under the laws of the applicable jurisdiction. If you are accepting these Terms and using the Services on behalf of a company, organization, government, or other legal entity, you represent and warrant that you are authorized to do so.</span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h3 class='c16' id='h.3s7rlznkxcki'><span class='c8'>2. Privacy</span></h3>\n              <p class='c5'><span class='c1'>Our </span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //twitter.com/privacy&amp;sa=D&amp;ust=1478725517103000&amp;usg=AFQjCNGReobna3Tkle-bLpW4MY_Axaf7lA'>Privacy Policy</a></span><span class='c1'>&nbsp;(</span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //www.twitter.com/privacy&amp;sa=D&amp;ust=1478725517103000&amp;usg=AFQjCNFxR7vDEGvhlgyyzajM8itHpikdIQ'>https: //www.twitter.com/privacy</a></span><span class='c1'>) and the Periscope Privacy Statement (https: //www.periscope.tv/privacy) describe how we handle the information you provide to us when you use our Services. You understand that through your use of the Services you consent to the collection and use (as set forth in the Privacy Policy) of this information, including the transfer of this information to the United States, Ireland, and/or other countries for storage, processing and use by Twitter and its affiliates.</span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h3 class='c16' id='h.omf9jee9s3t4'><span class='c8'>3. Content on the Services</span></h3>\n              <p class='c5'><span class='c4 c1'>You are responsible for your use of the Services and for any Content you provide, including compliance with applicable laws, rules, and regulations. You should only provide Content that you are comfortable sharing with others.</span></p>\n              <p class='c5'><span class='c4 c1'>Any use or reliance on any Content or materials posted via the Services or obtained by you through the Services is at your own risk. We do not endorse, support, represent or guarantee the completeness, truthfulness, accuracy, or reliability of any Content or communications posted via the Services or endorse any opinions expressed via the Services. You understand that by using the Services, you may be exposed to Content that might be offensive, harmful, inaccurate or otherwise inappropriate, or in some cases, postings that have been mislabeled or are otherwise deceptive. All Content is the sole responsibility of the person who originated such Content. We may not monitor or control the Content posted via the Services and, we cannot take responsibility for such Content.</span></p>\n              <p class='c5'><span class='c1'>We respect the intellectual property rights of others and expect users of the Services to do the same. We reserve the right to remove Content alleged to be infringing without prior notice, at our sole discretion, and without liability to you. We will respond to notices of alleged copyright infringement that comply with applicable law and are properly provided to us, as described in our </span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/articles/15795&amp;sa=D&amp;ust=1478725517106000&amp;usg=AFQjCNEbnp9I5nKsY9uo7-naSTNwCn0czg'>Copyright policy</a></span><span class='c1'>&nbsp;(</span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/articles/15795&amp;sa=D&amp;ust=1478725517107000&amp;usg=AFQjCNEryhy84Umq-PkcgRGayAk7OXwFMg'>https: //support.twitter.com/articles/15795</a></span><span class='c1'>). If you believe that your Content has been copied in a way that constitutes copyright infringement, please report this by visiting our </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms/dmca&amp;sa=D&amp;ust=1478725517107000&amp;usg=AFQjCNHSc1RYHFLiP7_LMltjAZxwspuoxw'>Copyright reporting form</a></span><span class='c1'>&nbsp;(</span><span class='c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms/dmca&amp;sa=D&amp;ust=1478725517107000&amp;usg=AFQjCNHSc1RYHFLiP7_LMltjAZxwspuoxw'>https: //support.twitter.com/forms/dmca</a></span><span class='c4 c1'>) or contacting our designated copyright agent at: </span></p>\n              <p class='c17'><span class='c4 c1'>Twitter, Inc.</span></p>\n              <p class='c17'><span class='c4 c1'>Attn:  Copyright Agent - Periscope</span></p>\n              <p class='c17'><span class='c4 c1'>1355 Market Street, Suite 900</span></p>\n              <p class='c17'><span class='c4 c1'>San Francisco, CA 94103</span></p>\n              <p class='c17'><span class='c1'>Reports:  </span><span class='c4 c12'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms/dmca&amp;sa=D&amp;ust=1478725517109000&amp;usg=AFQjCNECyljMuD51DWEJd8EdtkaLqpxoUA'>https: //support.twitter.com/forms/dmca</a></span></p>\n              <p class='c5'><span class='c1'>Email:  copyright@periscope.tv </span></p>\n              <h4 class='c7' id='h.19c4ruoh9igz'><span class='c1 c11 c19'>Your Rights</span></h4>\n              <p class='c5'><span class='c4 c1'>You retain your rights to any Content you submit, post or display on or through the Services. What&rsquo;s yours is yours &mdash; you own your Content (and your videos are part of the Content).</span></p>\n              <p class='c5'><span class='c1 c4'>By submitting, posting or displaying Content on or through the Services, you grant us a worldwide, non-exclusive, royalty-free license (with the right to sublicense) to use, copy, reproduce, process, adapt, modify, publish, transmit, display and distribute such Content in any and all media or distribution methods (now known or later developed). This license authorizes us to make your Content available to the rest of the world and to let others do the same. You agree that this license includes the right for Twitter to provide, promote, and improve the Services and to make Content submitted to or through the Services available to other companies, organizations or individuals for the syndication, broadcast, distribution, promotion or publication of such Content on other media and services, subject to our terms and conditions for such Content use. Such additional uses by Twitter, or other companies, organizations or individuals, may be made with no compensation paid to you with respect to the Content that you submit, post, transmit or otherwise make available through the Services.</span></p>\n              <p class='c5'><span class='c4 c1'>Twitter has an evolving set of rules for how ecosystem partners can interact with your Content on the Services. These rules exist to enable an open ecosystem with your rights in mind. You understand that we may modify or adapt your Content as it is distributed, syndicated, published, or broadcast by us and our partners and/or make changes to your Content in order to adapt the Content to different media. You represent and warrant that you have all the rights, power and authority necessary to grant the rights granted herein to any Content that you submit.</span></p>\n              <p class='c14 c18'><span class='c4 c13'></span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h3 class='c16' id='h.t876aonu1irv'><span class='c8'>4. Using the Services</span></h3>\n              <p class='c5'><span class='c1'>Please review the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517113000&amp;usg=AFQjCNEVzpqqTfWYfkVz8r92aeP3_KZKDA'>Periscope Community Guidelines</a></span><span class='c4 c1'>&nbsp;(https: //www.periscope.tv/content) which are part of the User Agreement and outline what is prohibited on the Services. You may use the Services only in compliance with these Terms and all applicable laws, rules and regulations.</span></p>\n              <p class='c5'><span class='c4 c1'>Our Services evolve constantly. As such, the Services may change from time to time, at our discretion. We may stop (permanently or temporarily) providing the Services or any features within the Services to you or to users generally. We also retain the right to create limits on use and storage at our sole discretion at any time. We may also remove or refuse to distribute any Content on the Services, suspend or terminate users, and reclaim usernames without liability to you.</span></p>\n              <p class='c5'><span class='c4 c1'>In consideration for Twitter granting you access to and use of the Services, you agree that Twitter and its third-party providers and partners may place advertising on the Services or in connection with the display of Content or information from the Services whether submitted by you or others. </span></p>\n              <p class='c5'><span class='c4 c1'>You also agree not to misuse our Services, for example, by interfering with them or accessing them using a method other than the interface and the instructions that we provide. You may not do any of the following while accessing or using the Services:  (i) access, tamper with, or use non-public areas of the Services, Twitter&rsquo;s computer systems, or the technical delivery systems of Twitter&rsquo;s providers; (ii) probe, scan, or test the vulnerability of any system or network or breach or circumvent any security or authentication measures; (iii) access or search or attempt to access or search the Services by any means (automated or otherwise) other than through our currently available, published interfaces that are provided by Twitter (and only pursuant to the applicable terms and conditions), unless you have been specifically allowed to do so in a separate agreement with Twitter (NOTE:  crawling the Services is permissible if done in accordance with the provisions of the robots.txt file, however, scraping the Services without the prior consent of Twitter is expressly prohibited); (iv) forge any TCP/IP packet header or any part of the header information in any email or posting, or in any way use the Services to send altered, deceptive or false source-identifying information; or (v) interfere with, or disrupt, (or attempt to do so), the access of any user, host or network, including, without limitation, sending a virus, overloading, flooding, spamming, mail-bombing the Services, or by scripting the creation of Content in such a manner as to interfere with or create an undue burden on the Services. We also reserve the right to access, read, preserve, and disclose any information as we reasonably believe is necessary to (i) satisfy any applicable law, regulation, legal process or governmental request, (ii) enforce the Terms, including investigation of potential violations hereof, (iii) detect, prevent, or otherwise address fraud, security or technical issues, (iv) respond to user support requests, or (v) protect the rights, property or safety of Twitter, its users and the public. Twitter does not disclose personally-identifying information to third parties except in accordance with our Privacy Policy.</span></p>\n              <h4 class='c7' id='h.j5lcpd3et2qr'><span class='c1 c11'>Your Account</span></h4>\n              <p class='c5'><span class='c4 c1'>You may need to create an account to use some of our Services. You are responsible for safeguarding your account, so use a strong password and limit its use to this account. We cannot and will not be liable for any loss or damage arising from your failure to comply with the above.</span></p>\n              <p class='c5'><span class='c4 c1'>You can control most communications from the Services. We may need to provide you with certain communications, such as service announcements and administrative messages. These communications are considered part of the Services and your account, and you may not be able to opt-out from receiving them. If you added your phone number to your account and you later change or deactivate that phone number, you must update your account information to help prevent us from communicating with anyone who acquires your old number.</span></p>\n              <h4 class='c7' id='h.i9chc3f09ivs'><span class='c1 c11'>Your License to Use the Services</span></h4>\n              <p class='c5'><span class='c4 c1'>Twitter gives you a personal, worldwide, royalty-free, non-assignable and non-exclusive license to use the software provided to you as part of the Services. This license has the sole purpose of enabling you to use and enjoy the benefit of the Services as provided by Twitter, in the manner permitted by these Terms.</span></p>\n              <p class='c5'><span class='c4 c1'>The Services are protected by copyright, trademark, and other laws of both the United States and foreign countries. Nothing in the Terms gives you a right to use the Twitter name or any of the Twitter trademarks, logos, domain names, and other distinctive brand features. All right, title, and interest in and to the Services (excluding Content provided by users) are and will remain the exclusive property of Twitter and its licensors. Any feedback, comments, or suggestions you may provide regarding Twitter, or the Services is entirely voluntary and we will be free to use such feedback, comments or suggestions as we see fit and without any obligation to you.</span></p>\n              <h4 class='c7' id='h.n47keqwn56rj'><span class='c1 c11'>Ending These Terms</span></h4>\n              <p class='c5'><span class='c1'>You may end your legal agreement with Twitter at any time by deactivating your accounts and discontinuing your use of the Services. See </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //help.periscope.tv/customer/portal/articles/2460220&amp;sa=D&amp;ust=1478725517119000&amp;usg=AFQjCNH_DMCKnmrLym4ruXs86BUcReDH0g'>https: //help.periscope.tv/customer/portal/articles/2460220</a></span><span class='c4 c1'>&nbsp;for instructions on how to deactivate your account and the Privacy Policy for more information on what happens to your information.</span></p>\n              <p class='c5'><span class='c1'>We may suspend or terminate your account or cease providing you with all or part of the Services at any time for any or no reason, including, but not limited to, if we reasonably believe:  (i) you have violated these Terms or the </span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517119000&amp;usg=AFQjCNFf2VUpqFsd9gpBCOcL8A_v3_zjWw'>Periscope Community </a></span><span class='c9'><a class='c2' href='https: //www.google.com/url?q=https: //www.periscope.tv/content&amp;sa=D&amp;ust=1478725517120000&amp;usg=AFQjCNGAcAY6d2aR1huHo_w3PB79j1TuVA'>Guidelines</a></span><span class='c1'>, (ii) you create risk or possible legal exposure for us; (iii) your account should be removed due to prolonged inactivity; or (iv) our provision of the Services to you is no longer commercially viable. We will make reasonable efforts to notify you by the email address associated with your account or the next time you attempt to access your account, depending on the circumstances. In all such cases, the Terms shall terminate, including, without limitation, your license to use the Services, except that the following sections shall continue to apply:  2, 3, 5, and 6</span><span class='c1'>.</span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h3 class='c16' id='h.377kun6d3mrc'><span class='c8'>5. Disclaimers and Limitations of Liability</span></h3>\n              <h4 class='c7' id='h.c2m24gl57m5u'><span class='c1 c11'>The Services are Available &ldquo;AS-IS&rdquo;</span></h4>\n              <p class='c5'><span class='c4 c1'>Your access to and use of the Services or any Content are at your own risk. You understand and agree that the Services are provided to you on an &ldquo;AS IS&rdquo; and &ldquo;AS AVAILABLE&rdquo; basis. The &ldquo;Twitter Entities&rdquo; refers to Twitter, its parents, affiliates, related companies, officers, directors, employees, agents, representatives, partners, and licensors. Without limiting the foregoing, to the maximum extent permitted under applicable law, THE TWITTER ENTITIES DISCLAIM ALL WARRANTIES AND CONDITIONS, WHETHER EXPRESS OR IMPLIED, OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE, OR NON-INFRINGEMENT. The Twitter Entities make no warranty or representation and disclaim all responsibility and liability for:  (i) the completeness, accuracy, availability, timeliness, security or reliability of the Services or any Content; (ii) any harm to your computer system, loss of data, or other harm that results from your access to or use of the Services or any Content; (iii) the deletion of, or the failure to store or to transmit, any Content and other communications maintained by the Services; and (iv) whether the Services will meet your requirements or be available on an uninterrupted, secure, or error-free basis. No advice or information, whether oral or written, obtained from the Twitter Entities or through the Services, will create any warranty or representation not expressly made herein.</span></p>\n              <h4 class='c7' id='h.2v4kv09gdlry'><span class='c1 c11'>Limitation of Liability</span></h4>\n              <p class='c5'><span class='c4 c1'>THE TWITTER ENTITIES SHALL NOT BE LIABLE FOR ANY INDIRECT, INCIDENTAL, SPECIAL, CONSEQUENTIAL OR PUNITIVE DAMAGES, OR ANY LOSS OF PROFITS OR REVENUES, WHETHER INCURRED DIRECTLY OR INDIRECTLY, OR ANY LOSS OF DATA, USE, GOOD-WILL, OR OTHER INTANGIBLE LOSSES, RESULTING FROM (i) YOUR ACCESS TO OR USE OF OR INABILITY TO ACCESS OR USE THE SERVICES; (ii) ANY CONDUCT OR CONTENT OF ANY THIRD PARTY ON THE SERVICES, INCLUDING WITHOUT LIMITATION, ANY DEFAMATORY, OFFENSIVE OR ILLEGAL CONDUCT OF OTHER USERS OR THIRD PARTIES; (iii) ANY CONTENT OBTAINED FROM THE SERVICES; OR (iv) UNAUTHORIZED ACCESS, USE OR ALTERATION OF YOUR TRANSMISSIONS OR CONTENT. THE LIMITATIONS OF THIS SUBSECTION SHALL APPLY TO ANY THEORY OF LIABILITY, WHETHER BASED ON WARRANTY, CONTRACT, STATUTE, TORT (INCLUDING NEGLIGENCE) OR OTHERWISE, AND WHETHER OR NOT THE TWITTER ENTITIES HAVE BEEN INFORMED OF THE POSSIBILITY OF ANY SUCH DAMAGE, AND EVEN IF A REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE.</span></p>\n              <p class='c5'><span class='c1'>SOME JURISDICTIONS DO NOT ALLOW EXCLUSION OF IMPLIED WARRANTIES OR LIMITATIONS ON THE DURATION OF IMPLIED WARRANTIES, SO THE ABOVE DISCLAIMERS MAY NOT APPLY TO YOU IN THEIR ENTIRETIES, BUT WILL APPLY TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW.</span></p>\n           </td>\n        </tr>\n        <tr class='c0'>\n           <td class='c10' colspan='1' rowspan='1'>\n              <h3 class='c16' id='h.vz9kd6pqjqfl'><span class='c8 c3'>6. General</span></h3>\n              <p class='c5'><span class='c1 c3'>We may revise these Terms from time to time. The changes will not be retroactive, and the most current version of the Terms, which will always be at </span><span class='c1'>periscope.tv/tos</span><span class='c4 c1 c3'>, will govern our relationship with you. We will try to notify you of material revisions, for example via a service notification or an email to the email associated with your account. By continuing to access or use the Services after those revisions become effective, you agree to be bound by the revised Terms.</span></p>\n              <p class='c5'><span class='c4 c1 c3'>In the event that any provision of these Terms is held to be invalid or unenforceable, then that provision will be limited or eliminated to the minimum extent necessary, and the remaining provisions of these Terms will remain in full force and effect. Twitter&rsquo;s failure to enforce any right or provision of these Terms will not be deemed a waiver of such right or provision.</span></p>\n              <p class='c5'><span class='c1 c3'>These Terms are an agreement between you and Twitter International Company, an Irish company with its registered office at The Academy, 42 Pearse Street, Dublin 2, Ireland. If you have any questions about these Terms, please contact </span><span class='c12 c3'><a class='c2' href='https: //www.google.com/url?q=https: //support.twitter.com/forms&amp;sa=D&amp;ust=1478725517126000&amp;usg=AFQjCNEDIpfZzalEAfpXwQe8PXn61JGFUg'>us</a></span><span class='c4 c1 c3'>.</span></p>\n              <p class='c5'><span class='c1 c3 c11'>Effective</span><span class='c1 c3'>:  </span><span class='c1'>November 15</span><span class='c1 c3'>, 2016</span></p>\n           </td>\n        </tr>\n     </tbody>\n  </table>\n</section>\n"
}}),n=i.metaDescription,r=i.metaTitle,o=i.content;t["default"]={metaDescription:n,metaTitle:r,content:o},t.metaDescription=n,t.metaTitle=r,t.content=o},744:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.welcome3=t.welcome2=t.welcome1=t.unlockBadgesDescription=t.unlockBadges=t.silverTier=t.silverRequirements2=t.silverRequirements1=t.silverBenefits6=t.silverBenefits5=t.silverBenefits4=t.silverBenefits3=t.silverBenefits2=t.silverBenefits1=t.requirements=t.newToPeriscopeRequirements2=t.newToPeriscopeRequirements1=t.newToPeriscopeContent2=t.newToPeriscopeContent1=t.newToPeriscope=t.metaTitle=t.metaDescription=t.levels=t.goldTier=t.goldRequirements2=t.goldRequirements1=t.goldBenefits4=t.goldBenefits3=t.goldBenefits2=t.goldBenefits1=t.getDiscoveredDescription=t.getDiscovered=t.findCommunityDescription=t.findCommunity=t.dontMeetRequirementsContent2=t.dontMeetRequirementsContent1=t.dontMeetRequirements=t.contentRequirement=t.comingSoon=t.bronzeTier=t.bronzeRequirements2=t.bronzeRequirements1=t.bronzeBenefits4=t.bronzeBenefits3=t.bronzeBenefits2=t.bronzeBenefits1=t.broadcastRequirement=t.benefits=t.applyNow=void 0;var s=a(243),i=(0,s.defineMessages)({applyNow:{id:"vanity.vip.APPLY_NOW",defaultMessage:"APPLY NOW"},benefits:{id:"vanity.vip.BENEFITS",defaultMessage:"Benefits"},broadcastRequirement:{id:"vanity.vip.BROADCAST_REQUIREMENT",defaultMessage:"Broadcast at least twice a week on average"},bronzeBenefits1:{id:"vanity.vip.BRONZE_BENEFITS_1",defaultMessage:"Bronze badge on your Periscope profile"},bronzeBenefits2:{id:"vanity.vip.BRONZE_BENEFITS_2",defaultMessage:"Care packages to ensure you look on point while broadcasting"},bronzeBenefits3:{id:"vanity.vip.BRONZE_BENEFITS_3",defaultMessage:"Prioritization in people search results, so people can find you more easily"},bronzeBenefits4:{id:"vanity.vip.BRONZE_BENEFITS_4",defaultMessage:"Access to the latest best practices and materials to help you create great broadcasts"},bronzeRequirements1:{id:"vanity.vip.BRONZE_REQUIREMENTS_1",defaultMessage:"10,000+ followers on Periscope"},bronzeRequirements2:{id:"vanity.vip.BRONZE_REQUIREMENTS_2",defaultMessage:"Average 200+ total live viewers per broadcast"},bronzeTier:{id:"vanity.vip.BRONZE_TIER",defaultMessage:"Bronze Tier"},comingSoon:{id:"vanity.vip.COMING_SOON",defaultMessage:"The Periscope VIP program is open for applications starting now and we plan to roll out the benefits in the coming weeks. VIP membership is subject to Periscope discretion after meeting the minimum requirements above."},contentRequirement:{id:"vanity.vip.CONTENT_REQUIREMENT",defaultMessage:"Content and behavior meets our {tosLink} and {contentLink}"},dontMeetRequirements:{id:"vanity.vip.DONT_MEET_REQUIREMENTS",defaultMessage:"Don't Meet the Requirements Above?"},dontMeetRequirementsContent1:{id:"vanity.vip.DONT_MEET_REQUIREMENTS_CONTENT_1",defaultMessage:"If you create amazing broadcasts but don't meet the requirements above - don't worry!"},dontMeetRequirementsContent2:{id:"vanity.vip.DONT_MEET_REQUIREMENTS_CONTENT_2",defaultMessage:"Our team is committed to helping everyone find their audience in the Periscope community and we're constantly on the lookout for new and creative broadcasters. Make sure you tag {periscopeTVLink} on Periscope and Twitter so we can discover and watch your live experiences."},findCommunity:{id:"vanity.vip.FIND_COMMUNITY",defaultMessage:"Find your community"},findCommunityDescription:{id:"vanity.vip.FIND_COMMUNITY_DESCRIPTION",defaultMessage:"Collaborate with other broadcasters who share similar interests."},getDiscovered:{id:"vanity.vip.GET_DISCOVERED",defaultMessage:"Get discovered"},getDiscoveredDescription:{id:"vanity.vip.GET_DISCOVERED_DESCRIPTION",defaultMessage:"Get a chance to be included in a rotating list of broadcasters for people to follow."},goldBenefits1:{id:"vanity.vip.GOLD_BENEFITS_1",defaultMessage:"Includes all Bronze and Silver benefits"},goldBenefits2:{id:"vanity.vip.GOLD_BENEFITS_2",defaultMessage:"Gold badge on your Periscope profile"},goldBenefits3:{id:"vanity.vip.GOLD_BENEFITS_3",defaultMessage:"Elevated access to collaborate with the Periscope team"},goldBenefits4:{id:"vanity.vip.GOLD_BENEFITS_4",defaultMessage:"Promoted ad spend when available for your broadcasts on Twitter"},goldRequirements1:{id:"vanity.vip.GOLD_REQUIREMENTS_1",defaultMessage:"100,000+ followers on Periscope"},goldRequirements2:{id:"vanity.vip.GOLD_REQUIREMENTS_2",defaultMessage:"Average 2,000+ total live viewers per broadcast"},goldTier:{id:"vanity.vip.GOLD_TIER",defaultMessage:"Gold Tier"},levels:{id:"vanity.vip.LEVELS",defaultMessage:"VIP Levels"},metaDescription:{id:"vanity.vip.META_DESCRIPTION",defaultMessage:"The VIP Program was designed for broadcasters who've invested in our platform and continue to share great live experiences on Periscope. As a member of the program, you'll have the opportunity to get recognized in the community, reach new viewers, and collaborate with other great broadcasters. As your community grows, you'll unlock even more benefits."},metaTitle:{id:"vanity.vip.META_TITLE",defaultMessage:"Periscope VIP Program"},newToPeriscope:{id:"vanity.vip.NEW_TO_PERISCOPE",defaultMessage:"New To Periscope?"},newToPeriscopeContent1:{id:"vanity.vip.NEW_TO_PERISCOPE_CONTENT_1",defaultMessage:"If you create awesome content elsewhere (e.g. YouTube, Instagram, or another live streaming app) and are interested in kickstarting your Periscope profile, you should still apply!"},newToPeriscopeContent2:{id:"vanity.vip.NEW_TO_PERISCOPE_CONTENT_2",defaultMessage:"Here are a few things we are looking for: "},newToPeriscopeRequirements1:{id:"vanity.vip.NEW_TO_PERISCOPE_REQUIREMENTS_1",defaultMessage:"10,000+ average views per video"},newToPeriscopeRequirements2:{id:"vanity.vip.NEW_TO_PERISCOPE_REQUIREMENTS_2",defaultMessage:"20,000+ followers"},requirements:{id:"vanity.vip.REQUIREMENTS",defaultMessage:"Minimum Requirements"},silverBenefits1:{id:"vanity.vip.SILVER_BENEFITS_1",defaultMessage:"Includes all Bronze benefits"},silverBenefits2:{id:"vanity.vip.SILVER_BENEFITS_2",defaultMessage:"Silver badge on your Periscope Profile"},silverBenefits3:{id:"vanity.vip.SILVER_BENEFITS_3",defaultMessage:"Be included in future discovery products"},silverBenefits4:{id:"vanity.vip.SILVER_BENEFITS_4",defaultMessage:"Prioritized support - we'll strive to respond to your questions within 12 hours"},silverBenefits5:{id:"vanity.vip.SILVER_BENEFITS_5",defaultMessage:"Private broadcasts from the Periscope team for an inside look at what we are up to"},silverBenefits6:{id:"vanity.vip.SILVER_BENEFITS_6",defaultMessage:"A Slack channel with other VIPs to collaborate and build your Periscope network"},silverRequirements1:{id:"vanity.vip.SILVER_REQUIREMENTS_1",defaultMessage:"30,000+ followers on Periscope"},silverRequirements2:{id:"vanity.vip.SILVER_REQUIREMENTS_2",defaultMessage:"Average 750+ total live viewers per broadcast"},silverTier:{id:"vanity.vip.SILVER_TIER",defaultMessage:"Silver Tier"},unlockBadges:{id:"vanity.vip.UNLOCK_BADGES",defaultMessage:"Unlock VIP Badges"},unlockBadgesDescription:{id:"vanity.vip.UNLOCK_BADGES_DESCRIPTION",defaultMessage:"Get a special badge on your Profile and elsewhere in Periscope."},welcome1:{id:"vanity.vip.WELCOME_1",defaultMessage:"The VIP Program is designed for broadcasters who've invested in our platform and continue to share live experiences on Periscope. As a member of the program, you'll have the opportunity to get recognized in the community, reach new viewers, and collaborate with other great broadcasters. As your community grows, you'll unlock even more benefits."},welcome2:{id:"vanity.vip.WELCOME_2",defaultMessage:"If you're new to Periscope or just starting out, our community is always changing and growing, and we encourage you to try a different format, share a new adventure and find your niche with likeminded broadcasters. Every broadcaster adds a unique perspective to Periscope, and we're always on the lookout for new members to join the program."},welcome3:{id:"vanity.vip.WELCOME_3",defaultMessage:"See below for the benefits and eligibility requirements for the program. Happy scoping!"}}),n=i.applyNow,r=i.benefits,o=i.broadcastRequirement,l=i.bronzeBenefits1,u=i.bronzeBenefits2,d=i.bronzeBenefits3,c=i.bronzeBenefits4,p=i.bronzeRequirements1,h=i.bronzeRequirements2,f=i.bronzeTier,m=i.comingSoon,y=i.contentRequirement,v=i.dontMeetRequirements,g=i.dontMeetRequirementsContent1,b=i.dontMeetRequirementsContent2,T=i.findCommunity,E=i.findCommunityDescription,P=i.getDiscovered,w=i.getDiscoveredDescription,C=i.goldBenefits1,S=i.goldBenefits2,_=i.goldBenefits3,M=i.goldBenefits4,k=i.goldRequirements1,R=i.goldRequirements2,I=i.goldTier,N=i.levels,A=i.metaDescription,O=i.metaTitle,D=i.newToPeriscope,L=i.newToPeriscopeContent1,U=i.newToPeriscopeContent2,B=i.newToPeriscopeRequirements1,F=i.newToPeriscopeRequirements2,H=i.requirements,q=i.silverBenefits1,j=i.silverBenefits2,x=i.silverBenefits3,V=i.silverBenefits4,W=i.silverBenefits5,Y=i.silverBenefits6,G=i.silverRequirements1,z=i.silverRequirements2,K=i.silverTier,Q=i.unlockBadges,X=i.unlockBadgesDescription,J=i.welcome1,Z=i.welcome2,$=i.welcome3;t["default"]={applyNow:n,benefits:r,broadcastRequirement:o,bronzeBenefits1:l,bronzeBenefits2:u,bronzeBenefits3:d,bronzeBenefits4:c,bronzeRequirements1:p,bronzeRequirements2:h,bronzeTier:f,comingSoon:m,contentRequirement:y,dontMeetRequirements:v,dontMeetRequirementsContent1:g,dontMeetRequirementsContent2:b,findCommunity:T,findCommunityDescription:E,getDiscovered:P,getDiscoveredDescription:w,goldBenefits1:C,goldBenefits2:S,goldBenefits3:_,goldBenefits4:M,goldRequirements1:k,goldRequirements2:R,goldTier:I,levels:N,metaDescription:A,metaTitle:O,newToPeriscope:D,newToPeriscopeContent1:L,newToPeriscopeContent2:U,newToPeriscopeRequirements1:B,newToPeriscopeRequirements2:F,requirements:H,silverBenefits1:q,silverBenefits2:j,silverBenefits3:x,silverBenefits4:V,silverBenefits5:W,silverBenefits6:Y,silverRequirements1:G,silverRequirements2:z,silverTier:K,unlockBadges:Q,unlockBadgesDescription:X,welcome1:J,welcome2:Z,welcome3:$},t.applyNow=n,t.benefits=r,t.broadcastRequirement=o,t.bronzeBenefits1=l,t.bronzeBenefits2=u,t.bronzeBenefits3=d,t.bronzeBenefits4=c,t.bronzeRequirements1=p,t.bronzeRequirements2=h,t.bronzeTier=f,t.comingSoon=m,t.contentRequirement=y,t.dontMeetRequirements=v,t.dontMeetRequirementsContent1=g,t.dontMeetRequirementsContent2=b,t.findCommunity=T,t.findCommunityDescription=E,t.getDiscovered=P,t.getDiscoveredDescription=w,t.goldBenefits1=C,t.goldBenefits2=S,t.goldBenefits3=_,t.goldBenefits4=M,t.goldRequirements1=k,t.goldRequirements2=R,t.goldTier=I,t.levels=N,t.metaDescription=A,t.metaTitle=O,t.newToPeriscope=D,t.newToPeriscopeContent1=L,t.newToPeriscopeContent2=U,t.newToPeriscopeRequirements1=B,t.newToPeriscopeRequirements2=F,t.requirements=H,t.silverBenefits1=q,t.silverBenefits2=j,t.silverBenefits3=x,t.silverBenefits4=V,t.silverBenefits5=W,t.silverBenefits6=Y,t.silverRequirements1=G,t.silverRequirements2=z,t.silverTier=K,t.unlockBadges=Q,t.unlockBadgesDescription=X,t.welcome1=J,t.welcome2=Z,t.welcome3=$},751:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.placeholderShort=t.placeholder=void 0;var s=a(243),i=(0,s.defineMessages)({placeholder:{id:"search.input.PLACEHOLDER",defaultMessage:"Explore what the world is seeing…"},placeholderShort:{id:"search.input.PLACEHOLDER_SHORT",defaultMessage:"Explore…"}}),n=i.placeholder,r=i.placeholderShort;t["default"]={placeholder:n,placeholderShort:r},t.placeholder=n,t.placeholderShort=r},760:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.myStats=t.myProfile=t.logout=void 0;var s=a(243),i=(0,s.defineMessages)({logout:{id:"authMenu.LOGOUT",defaultMessage:"Log Out"},myProfile:{id:"authMenu.MY_PROFILE",defaultMessage:"My Profile"},myStats:{id:"authMenu.MY_STATS",defaultMessage:"My Stats"}}),n=i.logout,r=i.myProfile,o=i.myStats;t["default"]={logout:n,myProfile:r,myStats:o},t.logout=n,t.myProfile=r,t.myStats=o},907:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t={};return e.isVertical||(t.transform="rotate(90deg)"),r["default"].createElement("svg",{className:"Ellipsis",style:t,width:"4px",height:"20px",viewBox:"0 0 4 20"},r["default"].createElement("g",{stroke:"none",strokeWidth:"1",fill:"none"},r["default"].createElement("g",{transform:"translate(-868.000000, -37.000000)",fill:"#40A4C4"},r["default"].createElement("g",{transform:"translate(868.000000, 37.000000)"},r["default"].createElement("circle",{cx:"2",cy:"2",r:"2"}),r["default"].createElement("circle",{cx:"2",cy:"10",r:"2"}),r["default"].createElement("circle",{cx:"2",cy:"18",r:"2"})))))}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=s(n);i.propTypes={isVertical:r["default"].PropTypes.bool},i.defaultProps={isVertical:!0},t["default"]=i},911:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={path:"/w/:broadcastId/card",getComponent:function(e,t){a.e(1,function(e){t(null,a(912)["default"])})}}},912:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(355),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(225),b=a(913),T=s(b),E=a(919),P=s(E),w=a(866),C=a(549),S=a(699),_=a(654),M=s(_),k=a(586),R=s(k),I=a(920),N=s(I),A=a(688),O=a(921),D=a(582),L=s(D),U=a(922),B=s(U),F=a(265),H=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"componentDidMount",value:function(){this.windowMessageAPI=new T["default"](this.props.api,this.props.dispatchAutoPlayStart,this.props.dispatchStopPlaying,this.props.params.broadcastId)}},{key:"componentWillUnmount",value:function(){this.windowMessageAPI&&this.windowMessageAPI.destroy()}},{key:"render",value:function(){return v["default"].createElement("div",{className:"App u-fullHeight u-flexParent"},v["default"].createElement(P["default"],{dispatch:this.props.dispatch,broadcastError:this.props.broadcastError,player:this.props.player,user:this.props.user,userCache:this.props.userCache,usersPending:this.props.usersPending,usersFailed:this.props.usersFailed,video:this.props.video}),v["default"].createElement(B["default"],this.props))}}]),t}(v["default"].Component);H.propTypes={dispatch:v["default"].PropTypes.func.isRequired,dispatchAutoPlayStart:v["default"].PropTypes.func.isRequired,dispatchStopPlaying:v["default"].PropTypes.func.isRequired,broadcastError:v["default"].PropTypes.object,params:v["default"].PropTypes.object,player:v["default"].PropTypes.object,replay:w.replayPropType,user:C.userPropType,userCache:v["default"].PropTypes.object,usersPending:v["default"].PropTypes.array,usersFailed:v["default"].PropTypes.array,video:S.videoPropType,api:F.wrappedApiShape.isRequired};var q=function(e,t){return(0,n["default"])({},(0,R["default"])(e,t),(0,M["default"])(e,t),(0,O.replayFullMapper)(e,t),(0,N["default"])(e,t),(0,A.videoPlayerStateMapper)(e,t),(0,L["default"])(["dimensions","userCache"])(e,t))};t["default"]=(0,g.connect)(q,A.videoPlayerDispatchMapper)((0,F.injectApi)(H))},913:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postMessage=void 0;var i=a(293),n=s(i),r=a(341),o=s(r),l=a(391),u=s(l),d=a(647),c=a(648),p=a(559),h=a(601),f=a(702),m=a(914),y=a(915),v=s(y),g=a(646),b=s(g),T=a(916),E=a(917),P=s(E),w=a(517),C=void 0,S=!1,_=void 0,M=function(){function e(t,a,s,i){(0,n["default"])(this,e),this.api=t,this.dispatch=t.store.dispatch,this.dispatchAutoPlayStart=a,this.dispatchStopPlaying=s,this.broadcastId=i,this.lifecycleToken=null,this.useExternalData=u["default"]._isProd()||(0,w.isIframe)(),this.initWindow=this.initWindow.bind(this),this.initAdapter=this.initAdapter.bind(this),this.handleMessage=this.handleMessage.bind(this),this.deinitWindow=this.deinitWindow.bind(this),this.deinitAdapter=this.deinitAdapter.bind(this),this.postMessage=(0,T.postMessage)(window.parent),window.addEventListener("message",this.handleMessage),u["default"].log("Twitter Card: Send init message"),this.handleApiAction(this.initWindow,this.initAdapter)}return(0,o["default"])(e,[{key:"destroy",value:function(){this.lifecycleToken=null,window.removeEventListener("message",this.handleMessage)}},{key:"handleApiAction",value:function(e,t){this.useExternalData?e():t()}},{key:"initWindow",value:function(){this.lifecycleToken=null,this.postMessage.init()}},{key:"deinitWindow",value:function(){this.lifecycleToken=null,this.postMessage.stopPolling()}},{key:"initAdapter",value:function(){this.lifecycleToken=null,_=new P["default"](this.api,this.broadcastId)}},{key:"deinitAdapter",value:function(){this.lifecycleToken=null,_&&_.destroy()}},{key:"handleMessage",value:function(e){var t=e.origin||e.originalEvent.origin;if(!this.useExternalData||t===y.ORIGIN){u["default"].log("Twitter Card: Received message",e.data);var a=e.data;if(a.type)switch(a.type){case v["default"].INIT:this.handleInitMessage(a.cardData);break;case v["default"].UPDATE:this.handleUpdateMessage(a.cardData);break;case v["default"].UPDATE_ERROR:this.handleMissingBroadcast();break;case v["default"].START_PLAYING:this.queueAutoPlayAction(this.dispatchAutoPlayStart);break;case v["default"].STOP_PLAYING:this.queueAutoPlayAction(this.dispatchStopPlaying)}}}},{key:"queueAutoPlayAction",value:function(e){return S?e():void(C=e)}},{key:"triggerPendingAutoPlayAction",value:function(){C&&(C(),C=null)}},{key:"handleInitMessage",value:function(e){this.broadcasterUsername=e.broadcaster_username,this.is_360=e.is_360,this.timecode=e.timecode;var t={n_watching:e.total_participants,n_watched:e.total_participants,broadcast:{username:e.broadcaster_username,image_url:e.full_size_thumbnail_url,id:e.id,is_360:e.is_360}};this.dispatch((0,c.broadcastCacheSet)(t)),this.dispatch((0,d.broadcastReceive)(t));var a={id:e.broadcaster_id,username:e.broadcaster_username,display_name:e.broadcaster_display_name};this.dispatch((0,p.userCacheSet)(a))}},{key:"handleUpdateMessage",value:function(e){var t={n_watching:e.total_participants,n_watched:e.total_participants,broadcast:{username:this.broadcasterUsername,available_for_replay:e.available_for_replay,is_360:this.is_360,image_url:e.full_size_thumbnail_url,state:e.state,id:e.id,start:e.start_date,ended:e.end_date,status:e.status,featured:e.featured}};this.dispatch((0,c.broadcastCacheSet)(t)),this.dispatch((0,d.broadcastReceive)(t)),this.timecode&&!isNaN(this.timecode)&&(this.dispatch((0,h.playerRequestedTimecode)(Number(this.timecode))),this.timecode=null);var a=!!e.https_hls_url,s=!!e.replay_url,i=e.replay_url&&e.replay_url.replace("replay_redirect=true","replay_redirect=false"),n=e.life_cycle_token||"",r=e.state===b["default"].ENDED||e.state===b["default"].TIMED_OUT;return!a&&!r||!s&&r?void this.handleMissingBroadcast():(!this.lifecycleToken&&n&&""!==n&&(this.lifecycleToken=n,this.dispatch((0,f.videoLifeCycleToken)(n))),this.dispatch((0,f.videoLiveUrl)(e.https_hls_url)),this.dispatch((0,f.videoCardReplayUrl)(i)),this.dispatch((0,m.replayAvailable)(s)),S=!0,void this.triggerPendingAutoPlayAction())}},{key:"handleMissingBroadcast",value:function(){this.handleApiAction(this.deinitWindow,this.deinitAdapter),this.dispatch((0,d.broadcastFailure)(this.broadcastId,{status:404}))}}]),e}();t.postMessage=T.postMessage,t["default"]=M},915:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={INIT:"init",UPDATE:"update",UPDATE_ERROR:"update_error",OPEN_LINK:"open_link",START_PLAYING:"start_playing",STOP_PLAYING:"stop_playing",STOP_POLLING:"stop_polling"},s="https://twitter.com";t.ORIGIN=s,t["default"]=a},916:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.postMessage=void 0;var i=a(355),n=s(i),r=a(915),o=s(r),l=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.ORIGIN,a=function(a){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=(0,n["default"])({type:a},s);e.postMessage(i,t)};return{init:function(e){return a(o["default"].INIT,e)},update:function(e){return a(o["default"].UPDATE,e)},updateError:function(){return a(o["default"].UPDATE_ERROR)},startPlaying:function(){return a(o["default"].START_PLAYING)},stopPlaying:function(){return a(o["default"].STOP_PLAYING)},stopPolling:function(){return a(o["default"].STOP_POLLING)},openLink:function(e){return a(o["default"].OPEN_LINK,{url:e})}}};t.postMessage=l},917:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(355),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(918),c=a(916),p=a(391),h=s(p),f=a(859),m=a(389),y=s(m),v=20,g=function(){function e(t,a){(0,o["default"])(this,e),this.postMessage=(0,c.postMessage)(window,window.location.protocol+"//"+window.location.host),this.broadcastId=a,this.wrappedApi=t,this.updateData=this.updateData.bind(this),this.initData(),this.intervalId=setInterval(this.updateData,1e3*v),this.handleKeyDownListener=this.handleShortcuts.bind(this),window.addEventListener("keydown",this.handleKeyDownListener)}return(0,u["default"])(e,[{key:"destroy",value:function(){clearInterval(this.intervalId),window.removeEventListener("keydown",this.handleKeyDownListener)}},{key:"initData",value:function(){var e=this,t=function(t){var a=new URLSearchParams(window.location.search),s=(0,f.timecodeStringToNumber)(a.get("t")),i=t.body,r=e.getSharedCardData(i),o={broadcaster_id:i.broadcast.user_id,broadcaster_username:i.broadcast.username,timecode:s,is_360:i.broadcast.is_360||!1,title:"",description:"",image:"",fullSizeImage:"",vanity_url:"",player_width:"",player_height:"",player_url:"",periscope_url:"",api:""};e.postMessage.init({cardData:(0,n["default"])({},r,o)}),e.updateData()};(0,d.getBroadcastCards)(this.wrappedApi,this.broadcastId).then(t,this.postMessage.updateError)}},{key:"updateData",value:function(){var e=this,t=function(t){var a=t.body,s=e.getSharedCardData(a),i=a.broadcast.ended||a.broadcast.timedout||a.broadcast.ping||a.broadcast.start,r={start_date:a.broadcast.start,end_date:i,replay_url:a.video.replay_url,hls_url:a.video.hls_url,https_hls_url:a.video.https_hls_url,life_cycle_token:a.life_cycle_token,card_name:""};e.postMessage.update({cardData:(0,n["default"])({},s,r)})};(0,d.getBroadcastCards)(this.wrappedApi,this.broadcastId).then(t,this.postMessage.updateError)}},{key:"handleShortcuts",value:function(e){if(!h["default"]._isProd())switch(e.keyCode){case y["default"].A:this.postMessage.startPlaying();break;case y["default"].O:this.postMessage.stopPlaying();break;case y["default"].E:this.postMessage.updateError()}}},{key:"getSharedCardData",value:function(e){var t=e.broadcast,a=t.id,s=t.available_for_replay,i=t.featured,n=t.user_display_name,r=t.state,o=t.image_url,l=t.status;return{id:a,available_for_replay:s,featured:i,broadcaster_display_name:n,state:r,full_size_thumbnail_url:o,status:l,total_participants:e.participants_count}}}]),e}();t["default"]=g},918:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e,t){return o["default"].reject("Unauthorized access to card data")}Object.defineProperty(t,"__esModule",{value:!0});var n=a(295),r=(s(n),a(497)),o=s(r);t.getBroadcastCards=i},919:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(391),v=s(y),g=a(265),b=a(602),T=a(699),E=a(549),P=a(702),w=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.shouldFetchReplayUrl(this.props)&&this.fetchReplayUrl(this.props),this.shouldUpdateUser(this.props)&&this.updateUser(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.shouldFetchReplayUrl(e)&&this.fetchReplayUrl(e),this.shouldUpdateUser(e)&&this.updateUser(e)}},{key:"shouldFetchReplayUrl",value:function(e){var t=e.video&&!e.video.replay_url,a=e.video&&e.video.card_replay_url,s=e.player&&e.player.isReplayMode&&!this.props.player.isPlaying&&e.player.isPlaying;return a&&(t||s)}},{key:"fetchReplayUrl",value:function(e){var t=e.video.card_replay_url;(0,T.videoCardReplay)(e.api,t).then(function(t){t.body&&e.dispatch((0,P.videoReplayUrl)(t.body.replay_url))},v["default"].log)}},{key:"shouldUpdateUser",value:function(e){var t=e.broadcastError&&e.broadcastError.isUnavailable,a=e.user&&e.user.username&&!e.user.created_at;return t&&a}},{key:"updateUser",value:function(e){(0,E.fetchUser)(e.api,e.user.username)}},{key:"render",value:function(){return null}}]),t}(m["default"].Component);w.propTypes={dispatch:m["default"].PropTypes.func,broadcastError:m["default"].PropTypes.object,player:b.playerPropType,user:E.userPropType,userCache:m["default"].PropTypes.object,usersPending:m["default"].PropTypes.array,usersFailed:m["default"].PropTypes.array,video:T.videoPropType,api:g.wrappedApiShape.isRequired},t["default"]=(0,g.injectApi)(w)},920:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(e){var t={};return e.Video&&(t.video=e.Video.video,t.videosPending=e.Video.pending,t.videosFailed=e.Video.failed),t}},921:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e.Replay?{replay:(0,l["default"])({},e.Replay)}:{}}function n(e){var t=i(e);return t.replay&&(t.replay.elapsed=0,t.replay.percentage=0),t}function r(e){var t=function(t){var a=t.unix,s=t.ntp,i=t.seconds;e((0,d.chatSeek)(a,s)),e((0,u.replaySeekRequest)(i))};return{dispatchSeekTo:t,dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(354),l=s(o);t.replayFullMapper=i,t.replayMetadataMapper=n,t.replayDispatchMapper=r;var u=a(914),d=a(665)},922:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(642),b=a(866),T=a(549),E=a(699),P=a(387),w=s(P),C=a(923),S=s(C),_=a(1037),M=s(_),k=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"renderContent",value:function(e){var t=this.props,a=t.user,s=t.broadcastError;return s&&(s.isNotFound||s.isUnavailable)?v["default"].createElement(M["default"],{user:a}):v["default"].createElement(S["default"],(0,n["default"])({},this.props,{disableBlur:!0,height:e,width:e,playerFormat:w["default"].EMBED}))}},{key:"render",value:function(){var e=this.props.dimensions,t=e&&e.width||0,a=e&&e.height||0,s=Math.min(t,a),i={width:s,height:s};return v["default"].createElement("div",{className:"u-flexItem u-transition",style:i},this.renderContent(s))}}]),t}(v["default"].Component);k.propTypes={broadcast:g.broadcastPropType,broadcastError:v["default"].PropTypes.object,couchmode:v["default"].PropTypes.bool,dimensions:v["default"].PropTypes.object,dispatch:v["default"].PropTypes.func.isRequired,height:v["default"].PropTypes.number,n_watched:v["default"].PropTypes.number,n_watching:v["default"].PropTypes.number,player:v["default"].PropTypes.object,profileIsVisible:v["default"].PropTypes.bool,replay:b.replayPropType,toggleProfileSidebar:v["default"].PropTypes.func,user:T.userPropType,video:E.videoPropType,width:v["default"].PropTypes.number},t["default"]=k},923:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(383),m=s(f),y=a(1),v=s(y),g=a(225),b=a(603),T=s(b),E=a(387),P=s(E),w=a(694),C=s(w),S=a(363),_=a(517),M=s(_),k=a(642),R=a(549),I=a(699),N=a(866),A=a(924),O=a(818),D=a(927),L=s(D),U=a(935),B=s(U),F=a(936),H=s(F),q=a(940),j=s(q),x=a(994),V=s(x),W=a(1e3),Y=s(W),G=a(1005),z=s(G),K=a(1029),Q=s(K),X=a(1035),J=s(X),Z=a(934),$=a(601),ee=a(914),te=a(688),ae=a(937),se=a(391),ie=s(se),ne=a(587),re=a(265),oe=2e3,le=(0,m["default"])(P["default"]).map(function(e){return P["default"][e]}),ue=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.connectingTimer=null,a.connectingTimerComplete=!1,a.hasStartedCountdown=!1,a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"reset",value:function(){this.connectingTimerComplete=!1,this.hasStartedCountdown=!1,this.connectingTimer&&clearTimeout(this.connectingTimer);var e=this.props.dispatch;e((0,$.playerReset)(!0)),e((0,ee.replayReset)(!0))}},{key:"componentWillReceiveProps",value:function(e){return this.broadcastHasChanged(e)?void this.reset():(this.handleAutoplayQuery(e),this.handleSafari360Drawer(e),void this.handleSafari360DrawerDismissal(e))}},{key:"broadcastHasChanged",value:function(e){return!this.props.broadcast&&e.broadcast||this.props.broadcast&&e.broadcast&&(e.broadcast.id!==this.props.broadcast.id||e.broadcast.state!==this.props.broadcast.state)}},{key:"handleAutoplayQuery",value:function(e){e.isAutoplay&&e.player&&e.player.isStoppedInterstitial&&M["default"].hasInlineAutoplayVideo()?e.dispatchAutoPlayStart():e.isAutoplay&&(0,Z.removeParamFromURL)(e.dispatch,"autoplay")}},{key:"handleSafari360Drawer",value:function(e){M["default"].safari()&&!this.props.player.isExpectingVideo&&e.player.isExpectingVideo&&e.broadcast.has360Video&&e.dispatchShowSafari360Drawer()}},{key:"handleSafari360DrawerDismissal",value:function(e){e.drawer.isSafari360AlertVisible&&e.player.isStopped&&e.dispatchHideDrawer()}},{key:"updateLivePlayback",value:function(){this.hasStartedCountdown||this.beginConnectingCountdown()}},{key:"beginConnectingCountdown",value:function(){var e=this;ie["default"].log("beginConnectingCountdown"),this.hasStartedCountdown=!0,this.connectingTimer=setTimeout(function(){e.connectingTimerComplete=!0,e.possiblyRenderConnectingState()},oe)}},{key:"possiblyRenderConnectingState",value:function(){this.connectingTimer&&this.connectingTimerComplete&&(clearTimeout(this.connectingTimer),this.props.dispatch((0,$.playerState)(T["default"].PLAYING)))}},{key:"getVideoUrl",value:function(){return!!this.props.video&&(this.props.broadcast.isRunning?this.props.video.https_hls_url||this.props.video.hls_url:this.props.video.replay_url)}},{key:"getViewerCount",value:function(){var e=this.props,t=e.broadcast,a=e.n_watching,s=e.n_watched;return t.isRunning?a:s}},{key:"isPlayerFormat",value:function(e){return this.props.playerFormat===e}},{key:"getFillMode",value:function(){switch(this.props.playerFormat){case P["default"].EMBED:return C["default"].COVER;case P["default"].APP:default:return C["default"].CONTAIN}}},{key:"canRenderVideo",value:function(){var e=this.props,t=e.player,a=e.playerFormat;if(!t)return!1;var s=!t.isStoppedInterstitial;return M["default"].hasInlineAutoplayVideo()||(s=!0),(a!==P["default"].APP||!M["default"].shouldUseMobileLayout())&&(s&&this.getVideoUrl())}},{key:"possiblyRenderVideo",value:function(){if(this.canRenderVideo()){var e=this.props,t=e.broadcast,a=e.player,s=e.width,i=e.height,n=t?t.width:0,r=t?t.height:0,o=this.getFillMode(),l=this.getVideoUrl(),u=a.dimensions.width||n,d=a.dimensions.height||r,c=this.isPlayerFormat(P["default"].EMBED),p=a.isAutoplay&&c;return v["default"].createElement("div",null,v["default"].createElement(V["default"],{disableCapture:this.props.disableCapture,api:this.props.api,url:l,video:this.props.video,isVideoPreview:p,isReplay:t.isEnded,
is360:t.has360Video,fillMode:o,playerWidth:u,playerHeight:d,windowWidth:s,windowHeight:i,dispatch:this.props.dispatch,player:this.props.player,couchmode:this.props.couchmode,broadcastId:t.id,playerFormat:this.props.playerFormat,disableStallingRecovery:c}),this.possiblyRenderVideoOverlay())}}},{key:"possiblyRenderVideoOverlay",value:function(){if(this.props.player.includeVideoUI){var e=this.getViewerCount();switch(this.props.playerFormat){case P["default"].EMBED:return v["default"].createElement(Q["default"],{dispatch:this.props.dispatch,broadcast:this.props.broadcast,viewers:e,player:this.props.player});case P["default"].APP:default:return v["default"].createElement(j["default"],{broadcast:this.props.broadcast,viewers:e,user:this.props.user,player:this.props.player,profileIsVisible:this.props.profileIsVisible,toggleProfileSidebar:this.props.toggleProfileSidebar,dispatch:this.props.dispatch,couchmode:this.props.couchmode,nextBroadcastCallback:this.props.nextBroadcastCallback})}}}},{key:"renderInterstitial",value:function(){var e=this.getViewerCount();switch(this.props.playerFormat){case P["default"].EMBED:return v["default"].createElement(J["default"],{dispatch:this.props.dispatch,user:this.props.user,broadcast:this.props.broadcast,viewers:e,player:this.props.player,width:this.props.width,height:this.props.height});case P["default"].APP:default:return v["default"].createElement(z["default"],{broadcast:this.props.broadcast,viewers:e,user:this.props.user,player:this.props.player,replay:this.props.replay,profileIsVisible:this.props.profileIsVisible,width:this.props.width,toggleProfileSidebar:this.props.toggleProfileSidebar,dispatch:this.props.dispatch,broadcastError:this.props.broadcastError})}}},{key:"renderBlur",value:function(){var e=this.props,t=e.disableBlur,a=e.player;return t||!a||a.isStoppedInterstitial?null:v["default"].createElement(Y["default"],{canvasClass:"u-fullScreen",broadcastId:this.props.broadcast.id})}},{key:"render",value:function(){return v["default"].createElement("div",{className:"VideoPlayer u-fullHeight"},v["default"].createElement(L["default"],{broadcast:this.props.broadcast,user:this.props.user}),v["default"].createElement(B["default"],this.props),this.renderBlur(),this.possiblyRenderVideo(),this.renderInterstitial(),v["default"].createElement(H["default"],null))}}]),t}(v["default"].Component);ue.defaultProps={playerFormat:P["default"].APP,disableCapture:!1},ue.propTypes={broadcast:k.broadcastPropType,broadcastError:v["default"].PropTypes.object,couchmode:v["default"].PropTypes.bool,dispatch:v["default"].PropTypes.func.isRequired,dispatchAutoPlayStart:v["default"].PropTypes.func.isRequired,dispatchShowSafari360Drawer:v["default"].PropTypes.func.isRequired,dispatchHideDrawer:v["default"].PropTypes.func.isRequired,drawer:A.drawerPropType.isRequired,isAutoplay:v["default"].PropTypes.bool,playerFormat:v["default"].PropTypes.oneOf(le),height:v["default"].PropTypes.number,n_watched:v["default"].PropTypes.number,n_watching:v["default"].PropTypes.number,nextBroadcastCallback:v["default"].PropTypes.func,player:v["default"].PropTypes.object,profileIsVisible:v["default"].PropTypes.bool,replay:N.replayPropType.isRequired,toggleProfileSidebar:v["default"].PropTypes.func,user:R.userPropType,video:I.videoPropType,width:v["default"].PropTypes.number,disableBlur:v["default"].PropTypes.bool,api:re.wrappedApiShape.isRequired,disableCapture:v["default"].PropTypes.bool};var de=function(e){var t={};return t.isAutoplay=(0,S.hasURLQuery)(e,"autoplay",!0),t};t["default"]=(0,g.connect)((0,ne.compose)(de,ae.drawerStateToProps,te.videoPlayerStateMapper),(0,ne.compose)(ae.drawerDispatchToProps,te.videoPlayerDispatchMapper))((0,re.injectApi)((0,O.purify)(ue)))},924:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){return(0,o.objectAssignWithAccessors)({},e,c)}Object.defineProperty(t,"__esModule",{value:!0}),t.drawerPropType=void 0,t.convertToDrawer=i;var n=a(1),r=s(n),o=a(363),l=a(925),u=s(l),d=r["default"].PropTypes.shape({dismissable:r["default"].PropTypes.bool}),c=(t.drawerPropType=r["default"].PropTypes.shape({visible:r["default"].PropTypes.bool,component:r["default"].PropTypes.func,componentProps:r["default"].PropTypes.object,options:d}),{get isSafari360AlertVisible(){return this.visible&&this.component===u["default"]}})},927:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ChatFunctionalComponent=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(383),m=s(f),y=a(1),v=s(y),g=a(225),b=a(928),T=s(b),E=a(930),P=s(E),w=a(642),C=a(664),S=a(549),_=a(547),M=a(650),k=a(559),R=a(665),I=a(265),N=a(663),A=s(N),O=a(582),D=s(O),L=a(589),U=a(669),B=s(U),F=a(933),H=s(F),q=a(668),j=a(387),x=s(j),V=a(363),W=a(391),Y=s(W),G=a(587),z=(0,m["default"])(x["default"]).map(function(e){return x["default"][e]}),K="safety",Q=new Date("Oct 31 2016 GMT"),X=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.inFlightHearts=[],a.inFlightChats=[],a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.checkChatState(this.props)}},{key:"componentWillUnmount",value:function(){this.chatman&&(this.chatman.endBroadcast(),this.chatman=null)}},{key:"componentWillReceiveProps",value:function(e){this.removeResolvedInflightHearts(e),this.checkChatState(e)}},{key:"checkChatState",value:function(e){this.broadcastDidChange(e)&&this.reset(),e.chat&&e.chat.queuedMessages.hearts.length&&(this.sendUserHearts(e.chat.queuedMessages.hearts,e.broadcast.isEnded),e.dispatch((0,R.chatClearMessageQueue)())),e.chat&&e.chat.queuedMessages.chats.length&&(this.sendUserChats(e.chat.queuedMessages.chats,e.broadcast.isEnded),e.dispatch((0,R.chatClearMessageQueue)())),this.needsToFetchSafetyServiceToken(e)&&this.fetchSafetyServiceToken(e),this.needsToSetupChatman(e)?this.setupChatman(e):e.chat&&e.chat.inited&&!q.eventManager.hasTimer()?this.setUpTimer(e):e.chat&&e.chat.needsMoreMessages&&!e.chat.fetching&&this.chatNeedsMoreMessages(e)}},{key:"needsToFetchSafetyServiceToken",value:function(e){return e.broadcast&&(0,_.isLoggedIn)(e.authUser)&&!e.safetyServiceToken.token&&!e.safetyServiceToken.pending}},{key:"fetchSafetyServiceToken",value:function(e){var t=e.api;(0,M.fetchServiceToken)({api:t,service:K})}},{key:"sendUserHearts",value:function(e,t){var a=this;if(this.chatman){var s=this.inFlightHearts;(0,T["default"])(e,s,"uuid").forEach(function(e){a.inFlightHearts.push(e),t?a.props.dispatch((0,R.chatAddNewReplayHeart)(e)):a.chatman.sendLiveHeart.call(a.chatman,e)})}}},{key:"sendUserChats",value:function(e,t){var a=this;if(this.chatman&&!t){var s=this.inFlightChats;(0,T["default"])(e,s,"uuid").forEach(function(e){a.inFlightChats.push(e),a.chatman.sendLiveChat.call(a.chatman,e)})}}},{key:"removeResolvedInflightHearts",value:function(e){var t=this,a=e.chat.queuedMessages.hearts,s=(0,T["default"])(this.inFlightHearts,a,"uuid");s.forEach(function(e){return(0,P["default"])(t.inFlightHearts,{uuid:e.uuid})})}},{key:"broadcastDidChange",value:function(e){var t=this.props.broadcast,a=e.broadcast,s=!t&&a,i=t&&a,n=i&&a.id!==t.id,r=i&&a.state!==t.state,o=n||r;return s||o}},{key:"chatmanSessionDidChange",value:function(e){var t=this.props.chat.chatSession,a=e.chat.chatSession;return t.endpoint!==a.endpoint||t.access_token!==a.access_token}},{key:"needsToSetupChatman",value:function(e){return(0,V.playerFormatIsApp)(e.playerFormat)&&(!this.chatman||this.chatmanSessionDidChange(e)||this.broadcastDidChange(e))}},{key:"setupChatman",value:function(e){var t={endpoint:e.chat.chatSession.endpoint,access_token:e.chat.chatSession.access_token,broadcastId:e.broadcast.id};if(t.endpoint&&t.access_token&&t.broadcastId){var a=e.broadcast.isEnded;this.chatman&&this.chatman.closeSocket();var s=e.broadcast.created_at&&new Date(e.broadcast.created_at)<Q;this.chatman=new B["default"]({videoData:t,broadcastEnded:a,wrappedApi:e.api,useLegacyJoins:s}),this.chatman.init(a,e.chat.chatSession,e.authUser)}}},{key:"onNewHeartEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.props.broadcast.isEnded||this.props.dispatch((0,k.userCacheAddHearts)(this.props.user,e.length))}},{key:"setUpTimer",value:function(e){var t=e.broadcast.isEnded,a=new H["default"]({mostRecentNTP:e.chat.currentNtp,replay:t,dispatch:e.dispatch,options:{onNewHeartEvents:this.onNewHeartEvents.bind(this)}});q.eventManager.setTimer(a),t&&this.chatman.backfillReplay()}},{key:"reset",value:function(){this.chatman&&(this.chatman.endBroadcast(),this.chatman=null);var e=this.props.dispatch;e((0,R.chatReset)(!0))}},{key:"chatNeedsMoreMessages",value:function(e){var t=e.chat,a=t.config,s=t.backfill;s?(Y["default"].log("--------BACKFILL CASE"),this.chatman.backfillReplay(a)):a.cursor&&this.chatman.getHistory(a)}},{key:"render",value:function(){return null}}]),t}(v["default"].Component);X.defaultProps={playerFormat:x["default"].APP},X.propTypes={api:I.wrappedApiShape.isRequired,authUser:v["default"].PropTypes.object,broadcast:w.broadcastPropType.isRequired,chat:C.chatPropType,dispatch:v["default"].PropTypes.func.isRequired,playerFormat:v["default"].PropTypes.oneOf(z),safetyServiceToken:v["default"].PropTypes.object,user:S.userPropType},t.ChatFunctionalComponent=X,t["default"]=(0,g.connect)((0,G.compose)(A["default"],(0,D["default"])(["safetyServiceToken"]),L.authStateToProps))((0,I.injectApi)(X))},928:function(e,t,a){var s=a(613),i=a(631),n=a(394),r=a(456),o=a(929),l=a(621),u=l(function(e,t){var a=o(t);return r(a)&&(a=void 0),r(e)?s(e,i(t,1,r,!0),n(a)):[]});e.exports=u},929:function(e,t){function a(e){var t=e?e.length:0;return t?e[t-1]:void 0}e.exports=a},930:function(e,t,a){function s(e,t){var a=[];if(!e||!e.length)return a;var s=-1,r=[],o=e.length;for(t=i(t,3);++s<o;){var l=e[s];t(l,s,e)&&(a.push(l),r.push(s))}return n(e,r),a}var i=a(394),n=a(931);e.exports=s},931:function(e,t,a){function s(e,t){for(var a=e?t.length:0,s=a-1;a--;){var d=t[a];if(a==s||d!==p){var p=d;if(n(d))c.call(e,d,1);else if(r(d,e))delete e[u(d)];else{var h=i(d),f=l(e,h);null!=f&&delete f[u(o(h))]}}}return e}var i=a(477),n=a(463),r=a(483),o=a(929),l=a(932),u=a(484),d=Array.prototype,c=d.splice;e.exports=s},932:function(e,t,a){function s(e,t){return 1==t.length?e:i(e,n(t,0,-1))}var i=a(476),n=a(714);e.exports=s},933:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(295),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(383),c=s(d),p=a(666),h=s(p),f=a(667),m=s(f),y=a(668),v=a(665),g=a(934),b=a(391),T=s(b),E=100,P=50,w=[h["default"].USER_CHAT.label,h["default"].CHAT.label,h["default"].HEART.label,h["default"].JOIN.label,h["default"].SYSTEM.label,h["default"].VIDEO.label],C=function(e){var t=void 0;return(0,c["default"])(h["default"]).forEach(function(a){h["default"][a].kind===e&&(t=h["default"][a].label)}),t},S=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=t.mostRecentNTP,s=t.replay,i=t.dispatch,n=t.options,r=void 0===n?{}:n;(0,o["default"])(this,e),this.mostRecentNTP=a,this.replay=s,this.options=r,this.blockMoreMessagesHack=!0,this.dispatch=i,this.EventMemory={UserChatEventStack:[],ChatEventStack:[],ChatEventHeap:[],HeartEventStack:[],HeartEventHeap:[],JoinEventStack:[],JoinEventHeap:[],SystemEventStack:[],VideoEventStack:[],VideoEventHeap:[]},this.reset(),this.start()}return(0,u["default"])(e,[{key:"start",value:function(){var e=this;this.intervalId||(this.intervalId=setInterval(function(){e.processStack.call(e)},E))}},{key:"flush",value:function(){this.EventMemory={UserChatEventStack:[],ChatEventStack:[],ChatEventHeap:[],HeartEventStack:[],HeartEventHeap:[],JoinEventStack:[],JoinEventHeap:[],SystemEventStack:[],VideoEventStack:[],VideoEventHeap:[]}}},{key:"stop",value:function(){clearInterval(this.intervalId),this.intervalId=null}},{key:"processEvent",value:function(t,a){t=e.setEventTime(t,this.replay);var s=C(a);this.EventMemory[s+"Stack"].push(t),this.EventMemory[s+"Stack"].filter(function(e,t,a){return a.indexOf(e)===t}),this.EventMemory[s+"Stack"]=this.EventMemory[s+"Stack"].sort(function(t,a){return e.getEventTime(t)-e.getEventTime(a)})}},{key:"reset",value:function(){this.mostRecentNTP=0,this.timerTick=0,this.previousNtp=this.mostRecentNTP,this.interpolatedTime=this.previousNtp}},{key:"processStack",value:function(){var t=this;this.previousNtp===this.mostRecentNTP?(this.timerTick++,this.interpolatedTime=this.mostRecentNTP+this.timerTick*E/1e3):(this.timerTick=0,this.interpolatedTime=this.previousNtp=this.mostRecentNTP);for(var a=function(a){if(!t.intervalId)return T["default"].log("no interval id, so breaking"),{v:void 0};var s=t.EventMemory[w[a]+"Stack"];if(0===s.length)return"continue";if(w[a]===h["default"].SYSTEM.label)return y.eventManager.publish("newSystemMessages",s),s.forEach(function(e){e.type===m["default"].SENTENCE&&t.dispatch((0,v.chatUpdateModeration)(e))}),t.EventMemory[w[a]+"Stack"]=[],"continue";var i=t.EventMemory[w[a]+"Heap"],n=e.binarySearch(s,function(a){return t.interpolatedTime-.2-e.getEventTime(a,!0)});n>0&&s.splice(0,n);var r=e.binarySearch(s,function(a){return t.interpolatedTime-e.getEventTime(a,!0)});if(r<0)return"continue";var o=s.splice(0,r+1);if(o.forEach(function(e){i.push(e)}),r>=0)switch(w[a]){case h["default"].VIDEO.label:if(!t.EventMemory.VideoEventHeap.length)return{v:void 0};t.EventMemory.VideoEventHeap.forEach(function(e){e.type===m["default"].BROADCAST_ENDED&&(0,g.endLiveBroadcast)(t.dispatch)}),t.EventMemory.VideoEventHeap=[];break;case h["default"].CHAT.label:if(!t.EventMemory.ChatEventHeap.length)return{v:void 0};y.eventManager.publish("newComments",t.EventMemory.ChatEventHeap.slice()),t.EventMemory.ChatEventHeap=[];break;case h["default"].JOIN.label:if(!t.EventMemory.JoinEventHeap.length)return{v:void 0};y.eventManager.publish("newJoins",t.EventMemory.JoinEventHeap.slice()),t.EventMemory.JoinEventHeap=[];break;case h["default"].HEART.label:default:if(!t.EventMemory.HeartEventHeap.length)return{v:void 0};var l=t.EventMemory.HeartEventHeap.slice();y.eventManager.publish("newHearts",l),t.options.onNewHeartEvents&&t.options.onNewHeartEvents(l),t.EventMemory.HeartEventHeap=[]}},s=0;s<w.length;s++){var i=a(s);switch(i){case"continue":continue;default:if("object"===("undefined"==typeof i?"undefined":(0,n["default"])(i)))return i.v}}for(var r=0,o=0;o<w.length;o++){var l=this.EventMemory[w[o]+"Stack"];r+=Number(l.length)}this.replay&&!this.blockMoreMessagesHack&&r<P&&this.dispatch((0,v.chatReplayNeedsMoreMessages)())}}],[{key:"binarySearch",value:function(e,t){for(var a=0,s=e.length-1,i=void 0,n=void 0,r=void 0;a<=s;){if(i=Math.floor((a+s)/2),n=t(e[i]),void 0!==r&&0!==n)return r;n>=0?a=i+1:s=i-1,0===n&&(r=i)}return void 0!==r||n>0?i:i-1}},{key:"setEventTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=t&&!!e.ntpForBroadcasterFrame,s=a?e.ntpForBroadcasterFrame:e.ntpForLiveFrame||0;return e.webClient_ntpInSeconds=parseFloat(s/4294967296),e}},{key:"getEventTime",value:function(e){return e&&e.webClient_ntpInSeconds}},{key:"sendEndBroadcast",value:function(){}}]),e}();t["default"]=S},935:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoPlayerFunctionalComponent=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(688),g=a(363),b=a(517),T=s(b),E=a(582),P=s(E),w=a(642),C=a(600),S=a(601),_=a(934),M=a(605),k=s(M),R=a(606),I=s(R),N=a(387),A=s(N),O=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.updatePlayerMode(this.props),this.updatePlayerAudio()}},{key:"componentWillReceiveProps",value:function(e){this.props.broadcast.id!==e.broadcast.id?((0,_.resetVideoState)(e.dispatch),this.updatePlayerAudio()):this.updatePlayerMode(e)}},{key:"updatePlayerMode",value:function(e){e.broadcast.isRunning&&(0,g.playerFormatIsApp)(e.playerFormat)&&T["default"].hasInlineAutoplayVideo()&&(e.player.isVideoPresentation||e.dispatch((0,S.playerPresentation)(I["default"].VIDEO))),e.broadcast.isRunning?e.player.isLiveMode||e.dispatch((0,S.playerMode)(k["default"].LIVE)):e.player.isReplayMode||e.dispatch((0,S.playerMode)(k["default"].REPLAY))}},{key:"updatePlayerAudio",value:function(){var e=this.props.settings.muted;switch(this.props.playerFormat){case A["default"].EMBED:this.props.dispatchAudioOff();break;case A["default"].APP:default:T["default"].isDesktop()&&!e&&this.props.dispatchAudioOn()}}},{key:"render",value:function(){return null}}]),t}(m["default"].Component);O.defaultProps={playerFormat:A["default"].APP,settings:C.settingsPropDefault},O.propTypes={dispatch:m["default"].PropTypes.func.isRequired,dispatchAudioOn:m["default"].PropTypes.func.isRequired,dispatchAudioOff:m["default"].PropTypes.func.isRequired,playerFormat:m["default"].PropTypes.oneOf(N.playerFormatValues).isRequired,broadcast:w.broadcastPropType.isRequired,player:m["default"].PropTypes.object.isRequired,settings:C.settingsPropType},t.VideoPlayerFunctionalComponent=O,t["default"]=(0,y.connect)((0,P["default"])(["settings"]),v.videoPlayerDispatchMapper)(O)},936:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(1),n=s(i),r=a(225),o=a(937),l=a(939),u=s(l),d=a(924),c=function(e){return n["default"].createElement(u["default"],e)};c.defaultProps={drawer:{visible:!1,component:null,componentProps:null,options:{}}},c.propTypes={dispatch:n["default"].PropTypes.func.isRequired,drawer:d.drawerPropType.isRequired},t["default"]=(0,r.connect)(o.drawerStateToProps,o.drawerDispatchToProps)(c)},937:function(e,t,a){"use strict";function s(e){var t=e.GlobalDrawer;return{drawer:(0,n.convertToDrawer)(t)}}function i(e){return{dispatchShowSafari360Drawer:function(){e(r.showSafari360Alert.apply(void 0,arguments))},dispatchHideDrawer:function(){e(r.hideDrawer.apply(void 0,arguments))},dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.drawerStateToProps=s,t.drawerDispatchToProps=i;var n=a(924),r=a(938)},939:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(543),n=s(i),r=a(354),o=s(r),l=a(267),u=s(l),d=a(293),c=s(d),p=a(341),h=s(p),f=a(294),m=s(f),y=a(345),v=s(y),g=a(1),b=s(g),T=a(716),E=a(924),P={top:-200},w={top:(0,T.spring)(-150)},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{stiffness:190,damping:19};return{top:(0,T.spring)(-20,e)}},S=function(e){function t(e){(0,c["default"])(this,t);var a=(0,m["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.renderInterpolatedStyles=a.renderInterpolatedStyles.bind(a),a}return(0,v["default"])(t,e),(0,h["default"])(t,[{key:"handleDismiss",value:function(e){var t=this;return function(){return t.props.dispatchHideDrawer(e)}}},{key:"getVisibleStyles",value:function(){var e=this.props.drawer;return e.visible?[{key:"drawer",style:C(e.options.springConfig)}]:[]}},{key:"possiblyRenderChild",value:function(){return this.props.drawer.component?b["default"].createElement(this.props.drawer.component,(0,o["default"])({},this.props.drawer.componentProps,{dismiss:this.handleDismiss("drawer-content"),dispatch:this.props.dispatch,isVisible:this.props.drawer.visible})):null}},{key:"renderInterpolatedStyles",value:function(e){var t=(0,n["default"])(e,1),a=t[0];return a?b["default"].createElement("div",{className:"GlobalDrawer",style:{top:Math.round(a.style.top)+"px"}},b["default"].createElement("div",{className:"GlobalDrawer-content"},this.possiblyRenderChild()),b["default"].createElement("img",{className:"GlobalDrawer-close",src:"/v/images/icon_close.svg",onClick:this.props.dispatchHideDrawer})):null}},{key:"render",value:function(){return b["default"].createElement(T.TransitionMotion,{styles:this.getVisibleStyles(),willEnter:function(){return P},willLeave:function(){return w}},this.renderInterpolatedStyles)}}]),t}(b["default"].Component);S.propTypes={dispatch:b["default"].PropTypes.func,dispatchHideDrawer:b["default"].PropTypes.func,drawer:E.drawerPropType.isRequired},t["default"]=S},940:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(818),g=a(941),b=s(g),T=a(942),E=s(T),P=a(945),w=s(P),C=a(956),S=s(C),_=a(966),M=s(_),k=a(825),R=s(k),I=a(686),N=s(I),A=a(971),O=s(A),D=a(973),L=s(D),U=a(974),B=s(U),F=a(978),H=s(F),q=a(979),j=s(q),x=a(662),V=s(x),W=a(687),Y=s(W),G=a(984),z=s(G),K=a(642),Q=a(549),X=a(547),J=a(389),Z=s(J),$=a(517),ee=s($),te=a(519),ae=s(te),se=a(587),ie=a(756),ne=s(ie),re=a(757),oe=s(re),le=a(363),ue=a(947),de=s(ue),ce=a(589),pe=a(582),he=s(pe),fe=4e3,me=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.state={classes:["VideoOverlay-container"],showTitle:null},a.handleKeyDownListener=a.handleKeyDown.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDownListener)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDownListener)}},{key:"handleKeyDown",value:function(e){if((0,le.hasKeyboardMetas)(e,{}))switch(e.keyCode){case Z["default"].I:return this.toggleTitle(e)}}},{key:"shouldRenderReplayElement",value:function(){return ee["default"].isVideoSupported()&&this.props.broadcast.isEnded}},{key:"allowVideoInteractivity",value:function(){return this.props.broadcast&&this.props.broadcast.has360Video}},{key:"possiblyIncludePlaybackControlsOverlay",value:function(){if(this.shouldRenderReplayElement()&&!this.allowVideoInteractivity())return m["default"].createElement(B["default"],{player:this.props.player,broadcast:this.props.broadcast,dispatch:this.props.dispatch})}},{key:"possiblyIncludeVideoSeeker",value:function(){if(this.shouldRenderReplayElement())return m["default"].createElement(b["default"],{videoStartDate:this.props.broadcast.start})}},{key:"possiblyIncludeUsersActivity",value:function(){if(!ae["default"].isDisabled("FriendsWatching")&&!this.shouldRenderReplayElement())return m["default"].createElement(z["default"],null)}},{key:"possiblyIncludePlaybackControls",value:function(){if(this.shouldRenderReplayElement())return m["default"].createElement(H["default"],{player:this.props.player,broadcast:this.props.broadcast,dispatch:this.props.dispatch})}},{key:"toggleTitle",value:function(e){e&&e.preventDefault&&e.preventDefault(),this.setState({showTitle:!this.state.showTitle})}},{key:"possiblyIncludeNextBroadcastButton",value:function(){if(!ee["default"].shouldUseMobileLayout()&&this.props.couchmode)return m["default"].createElement(O["default"],{player:this.props.player,nextBroadcast:this.props.nextBroadcastCallback})}},{key:"render",value:function(){var e=this,t=this.props,a=t.dispatch,s=t.user,i=t.authUser,n=t.broadcast,r=t.player,o=t.profileIsVisible,l=t.toggleProfileSidebar,u=t.viewers,d=this.state.classes;this.shouldRenderReplayElement()&&(d.indexOf("VideoOverlay-container--forPlayback")===-1&&d.push("VideoOverlay-container--forPlayback"),this.playbackAffordanceTimeout||(d.push("VideoOverlay-container--playbackAffordance"),this.playbackAffordanceTimeout=setTimeout(function(){d=d.filter(function(e){return"VideoOverlay-container--playbackAffordance"!==e}),e.setState({classes:d})},fe)));var c=["u-transition-1"],p=n?n.status:"";if(null===n)return m["default"].createElement("div",{className:"VideoOverlay"},m["default"].createElement("div",{className:d.join(" ")}));var h=n.isRunning,f=["VideoOverlay"];return ae["default"].isEnabled("SignIn")&&(f.push("VideoOverlay--signIn"),this.state.showTitle?f.push("VideoOverlay--showTitle"):this.state.showTitle===!1&&f.push("VideoOverlay--hideTitle")),m["default"].createElement("div",{className:f.join(" ")},m["default"].createElement(L["default"],{player:this.props.player}),this.possiblyIncludePlaybackControlsOverlay(),m["default"].createElement("div",{className:d.join(" ")},m["default"].createElement(j["default"],{broadcast:n,viewers:u,isLive:h,dispatch:a,classNames:c,blocked:this.props.blocked}),m["default"].createElement(ne["default"],{feature:"SignIn"},m["default"].createElement(oe["default"],null,m["default"].createElement(w["default"],{broadcast:n,isLive:h,dispatch:a,toggleTitle:this.toggleTitle.bind(this),isActive:this.state.showTitle}))),m["default"].createElement("div",{className:"VideoOverlay-broadcastTitleAndLocation"},m["default"].createElement(E["default"],{dispatch:a,broadcast:n,broadcastTitle:p,classNames:c,canReportBroadcast:(0,X.userNotMe)(i,s)}),m["default"].createElement(N["default"],{className:"BroadcastLocation-container",broadcast:n})),m["default"].createElement("div",{className:"VideoOverlay-footer"},s?m["default"].createElement(R["default"],{ref:"username",displayName:s.display_name,username:s.username,isLink:!0,includeUsername:!1,profileIsVisible:o,toggleProfileSidebar:l,vip:s.vip}):null,m["default"].createElement(M["default"],{dispatch:this.props.dispatch,broadcastTitle:p,broadcast:n}),m["default"].createElement(Y["default"],{muted:r.muted}),this.possiblyIncludePlaybackControls(),this.possiblyIncludeVideoSeeker(),this.possiblyIncludeUsersActivity(),m["default"].createElement(V["default"],{viewers:u,isLive:h})),m["default"].createElement("div",{className:"VideoOverlay-HeartsAndNextBroadcast"},m["default"].createElement(S["default"],{classNames:c,broadcast:n,dispatch:a,player:r}))),this.possiblyIncludeNextBroadcastButton())}}]),t}(m["default"].Component);me.propTypes={broadcast:K.broadcastPropType,blocked:m["default"].PropTypes.object,couchmode:m["default"].PropTypes.bool,dispatch:m["default"].PropTypes.func.isRequired,nextBroadcastCallback:m["default"].PropTypes.func,player:m["default"].PropTypes.object,profileIsVisible:m["default"].PropTypes.bool,toggleProfileSidebar:m["default"].PropTypes.func,user:Q.userPropType,viewers:m["default"].PropTypes.number,authUser:m["default"].PropTypes.object},t["default"]=(0,y.connect)((0,se.compose)(ce.authStateToProps,(0,he["default"])(["blocked"])))((0,de["default"])((0,v.purify)(me)))},941:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(587),g=a(921),b=a(688),T=a(866),E=a(551),P=a(864),w=s(P),C=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.onSeekComplete=a.onSeekComplete.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"onSeekComplete",value:function(e){this.props.dispatchSeekTo(e),this.props.dispatchPlayVideo()}},{key:"render",value:function(){return m["default"].createElement(w["default"],{onSeekComplete:this.onSeekComplete,replay:this.props.replay,videoStartDate:this.props.videoStartDate})}}]),t}(m["default"].Component);C.propTypes={dispatchSeekTo:m["default"].PropTypes.func.isRequired,dispatchPlayVideo:m["default"].PropTypes.func.isRequired,replay:T.replayPropType.isRequired,videoStartDate:E.dateString.isRequired},t["default"]=(0,y.connect)((0,v.compose)(g.replayFullMapper),(0,v.compose)(g.replayDispatchMapper,b.videoPlayerDispatchMapper))(C)},945:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CommentContainer=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(243),g=a(787),b=a(561),T=a(589),E=a(663),P=a(920),w=s(P),C=a(642),S=a(699),_=a(547),M=a(946),k=a(947),R=s(k),I=a(948),N=s(I),A=a(954),O=s(A),D=a(955),L=a(844),U=a(363),B=a(950),F=a(587),H=a(755),q=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.onMouseDown=a.onMouseDown.bind(a),a.state={isCoolDown:!1,isCommentError:!1},a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"isAuthed",value:function(){return(0,_.isLoggedIn)(this.props.authUser)}},{key:"onMouseDown",value:function(e){var t=this;this.isAuthed()?!this.props.commentInputState.isFocused&&e.target.className.indexOf("CommentInput-input")<0&&setTimeout(function(){return t.props.dispatch((0,L.commentInputSetFocus)(!0))}):this.handleSignInCta()}},{key:"handleSignInCta",value:function(){this.props.dispatch((0,g.openSignInModal)({openedFrom:"COMMENT"})),this.props.dispatch((0,b.trackEvent)("SIGN_IN_COMMENT_CLICK"))}},{key:"isDisabled",value:function(){var e=this.props,t=e.chat,a=e.broadcast,s=e.video;return(0,B.isModeratedForBroadcast)(t.moderation,a)||this.isAuthed()&&!s.canChat}},{key:"getChatStreamDisabled",value:function(){var e=this.props,t=e.video,a=e.chat;return t.canChat?!!a.sessionError:t.type}},{key:"getParticipantColorName",value:function(){return(0,U.getParticipantColorName)(this.props.chat.chatSession.participant_index)}},{key:"renderComment",value:function(){var e=["CommentContainer-comment"],t={};return this.isAuthed()&&(t.backgroundImage="url("+this.props.authUser.avatarUrl+")",this.props.chat.chatSession&&this.props.chat.chatSession.participant_index&&e.push("CommentContainer-participant"+this.getParticipantColorName())),m["default"].createElement("div",{className:e.join(" "),onMouseDown:this.onMouseDown},m["default"].createElement("div",{className:"CommentContainer-avatarContainer"},m["default"].createElement("div",{className:"CommentContainer-avatar",style:t}),this.state.isCoolDown?m["default"].createElement("div",{className:"CommentContainer-pieLoaderContainer"},m["default"].createElement("div",{className:"CommentContainer-pieLoader"},m["default"].createElement("span",null))):null),this.renderCommentBody())}},{key:"renderCommentBody",value:function(){if(this.isAuthed())return m["default"].createElement("div",{className:"CommentContainer-body"},m["default"].createElement(N["default"],{authUser:this.props.authUser,broadcast:this.props.broadcast,chatStreamDisabled:this.getChatStreamDisabled(),commentError:this.commentError.bind(this),dispatch:this.props.dispatch,intl:this.props.intl,isCoolDown:this.state.isCoolDown,isFocused:this.props.commentInputState.isFocused,moderation:this.props.chat.moderation,replyUsername:this.props.commentInputState.replyUsername,startCoolDown:this.startCoolDown.bind(this)}));var e=this.getChatStreamDisabled()?m["default"].createElement(v.FormattedMessage,H.loginHeart):m["default"].createElement(v.FormattedMessage,H.loginComment);return m["default"].createElement("div",{className:"CommentContainer-body"},m["default"].createElement("div",{className:"CommentContainer-text"},e))}},{key:"getDisabledCommentsReason",value:function(){return"Broadcast too full"}},{key:"startCoolDown",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5e3;this.setState({isCoolDown:!0}),clearTimeout(this.coolDownTimer),this.coolDownTimer=setTimeout(function(){e.setState({isCoolDown:!1})},t)}},{key:"commentError",value:function(){var e=this;this.setState({isCommentError:!0}),clearTimeout(this.commentErrorTimer),this.commentErrorTimer=setTimeout(function(){e.setState({isCommentError:!1})},500)}},{key:"render",value:function(){var e=["CommentContainer"];return this.props.commentInputState.isFocused&&e.push("CommentContainer--focused"),this.isAuthed()||e.push("CommentContainer--unauthed"),this.state.isCoolDown&&e.push("CommentContainer--isCoolDown"),
this.state.isCommentError&&e.push("CommentContainer--isCommentError"),this.isDisabled()&&e.push("CommentContainer--isDisabled"),m["default"].createElement("div",{className:e.join(" ")},this.props.isLive?this.renderComment():null,m["default"].createElement("a",{className:"CommentContainer-titleToggle",href:"#",onClick:this.props.toggleTitle},m["default"].createElement(O["default"],{isActive:this.props.isActive})))}}]),t}(m["default"].Component);q.defaultProps={commentInputState:{}},q.propTypes={commentInputState:M.commentInputShape,authUser:m["default"].PropTypes.object,broadcast:C.broadcastPropType,chat:E.chatSessionPropType,dispatch:m["default"].PropTypes.func.isRequired,intl:v.intlShape.isRequired,isActive:m["default"].PropTypes.bool,isLive:m["default"].PropTypes.bool,toggleTitle:m["default"].PropTypes.func.isRequired,video:S.videoPropType},t.CommentContainer=q,t["default"]=(0,y.connect)((0,F.compose)(w["default"],D.commentInputStateToProps,T.authStateToProps,E.chatSessionMapper))((0,v.injectIntl)((0,R["default"])(q)))},946:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.commentInputShape=void 0;var i=a(1),n=s(i);t.commentInputShape=n["default"].PropTypes.shape({isFocused:n["default"].PropTypes.bool,replyUsername:n["default"].PropTypes.string})},947:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=function(t){function a(){return(0,l["default"])(this,a),(0,p["default"])(this,(a.__proto__||(0,r["default"])(a)).apply(this,arguments))}return(0,f["default"])(a,t),(0,d["default"])(a,[{key:"render",value:function(){return this.props&&this.props.player&&this.props.player.cinema?null:y["default"].createElement(e,this.props)}}]),a}(y["default"].Component);return t.propTypes={player:E.playerPropType},(0,b["default"])(t,e),t.displayName="WithoutCinemaMode("+(0,P.getDisplayName)(e)+")",t.WrappedComponent=e,(0,v.connect)(T.videoPlayerStateMapper)(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(267),r=s(n),o=a(293),l=s(o),u=a(341),d=s(u),c=a(294),p=s(c),h=a(345),f=s(h),m=a(1),y=s(m),v=a(225),g=a(205),b=s(g),T=a(688),E=a(602),P=a(359);t["default"]=i},948:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(383),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(243),b=a(949),T=s(b),E=a(363),P=a(950),w=a(665),C=a(844),S=a(642),_=a(389),M=s(_),k=a(667),R=s(k),I=a(951),N=s(I),A=a(703),O=s(A),D=a(953),L=100,U=/(?:\r\n|\r|\n)/,B="CommentInput-input",F=function(e){if(e)if(e.focus(),"undefined"!=typeof window.getSelection&&"undefined"!=typeof document.createRange){var t=document.createRange();t.selectNodeContents(e),t.collapse(!1);var a=window.getSelection();a.removeAllRanges(),a.addRange(t)}else if("undefined"!=typeof document.body.createTextRange){var s=document.body.createTextRange();s.moveToElementText(e),s.collapse(!1),s.select()}},H=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));a.state={html:""};var s=e.intl.formatMessage;return a.placeholder=s(D.placeholder),a.checkDisabled(e),a.setInputReference=a.setInputReference.bind(a),a.handleKeyDown=a.handleKeyDown.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a.onBlur=a.onBlur.bind(a),a.onFocus=a.onFocus.bind(a),a.onPaste=a.onPaste.bind(a),a.onChange=a.onChange.bind(a),a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=this.checkDisabled(e);a||(e.replyUsername&&e.replyUsername!==this.props.replyUsername?this.setState({html:"@"+e.replyUsername+"&nbsp;"},function(){return t.focusInput()}):e.isFocused&&!this.props.isFocused&&this.focusInput())}},{key:"checkDisabled",value:function(e){var t=e.broadcast,a=e.chatStreamDisabled,s=e.moderation;return!!this.state.isDisabled||(a||(0,P.isModeratedForBroadcast)(s,t)?(this.setState({isDisabled:!0}),a?this.setState({html:this.getChatStreamDisabledText(a)}):s.sentence_type===N["default"].COMMENTING_SUSPENDED||s.sentence_type===N["default"].GLOBAL_COMMENTING_SUSPENDED?this.setModerationTimer(e):this.setState({html:this.getModerationText()}),!0):void 0)}},{key:"getChatStreamDisabledText",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.chatStreamDisabled,t=this.props.intl,a=t.formatMessage;switch(e){case O["default"].STREAM_TYPE_HLS_TOO_FULL:return a(D.videoStreamDisabledTooFull);case O["default"].STREAM_TYPE_HLS_FRIEND_CHAT:return a(D.videoStreamDisabledFriendOnly);default:return a(D.videoStreamDisabledUnkown)}}},{key:"setModerationTimer",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.moderation;if(a){var s=1e3*a.sentence_duration_sec-(Date.now()-a.timestamp);if(s<=0)return this.props.dispatch((0,w.chatClearModeration)()),void this.setState({isDisabled:!1,html:""});var i=this.getTimeoutUnit(s),n=s%i>0?s%i:i;this.setState({html:this.getModerationText(s)}),setTimeout(function(){return e.setModerationTimer()},n)}}},{key:"getTimeoutUnit",value:function(e){return e<=6e4?1e3:e<=36e5?6e4:e<=864e5?36e5:864e5}},{key:"getModerationText",value:function(e){var t=this.props.intl,a=t.formatRelative,s=t.formatMessage;if(!e)return s(D.disabledForBroadcast);var i=a(Date.now()+e);return s(D.limited,{relativeTime:i})}},{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"setInputReference",value:function(e){this.input=e}},{key:"focusInput",value:function(){this.input&&this.input.focus&&(F(this.input),this.props.dispatch((0,C.commentInputSetFocus)(!0)))}},{key:"blurInput",value:function(){this.input&&this.input.blur&&(this.input.blur(),this.props.dispatch((0,C.commentInputSetFocus)(!1)))}},{key:"handleKeyDown",value:function(e){if(!this.state.isDisabled){var t=e.target;if(e.shiftKey||e.keyCode!==M["default"].ENTER||(e.stopPropagation(),e.preventDefault(),this.props.isFocused?this.handleEnterPress(t):this.focusInput()),!t||t===this.input){e.stopPropagation();var a=(0,E.containsMetaKey)(e);if(this.props.isFocused){if(e.keyCode===M["default"].ESC)return this.blurInput();e.keyCode!==M["default"].SPACE_BAR||a||""!==this.serializeInput(t).trim()||e.preventDefault()}t.innerText&&t.innerText.length>L&&!a&&e.preventDefault()}}}},{key:"handleKeyUp",value:function(e){if(!this.state.isDisabled){e.stopPropagation(),e.preventDefault();var t=e.target,a=(0,E.containsMetaKey)(e);if(e.keyCode===M["default"].SPACE_BAR&&!a&&""===this.serializeInput(t).trim()){var s=this.props,i=s.authUser,n=s.dispatch;n((0,w.chatAddNewUserHeart)({authUser:i,type:R["default"].HEART}))}}}},{key:"handleEnterPress",value:function(e){var t=this,a=this.serializeInput(e).trim();if(0!==a.length)return this.shouldSendComment(a)?(this.sendComment(a),void setTimeout(function(){return t.resetInput()},100)):void this.props.commentError()}},{key:"shouldSendComment",value:function(e){return!(this.lastComment&&this.lastComment===e||this.props.isCoolDown)}},{key:"sendComment",value:function(e){var t=this.props.authUser;this.props.dispatch((0,w.chatNewUserChat)({body:e,authUser:t,type:R["default"].CHAT})),this.lastComment=e,this.props.startCoolDown()}},{key:"resetInput",value:function(){this.setState({html:""})}},{key:"serializeInput",value:function(e){return e.innerText.split(U).filter(function(e){return e.length>0}).join(" ")}},{key:"onBlur",value:function(e){var t=this.state.html;this.props.dispatch((0,C.commentInputSetFocus)(!1)),""===e.target.innerText.trim()&&(t=""),this.setState({html:t})}},{key:"onFocus",value:function(){this.props.dispatch((0,C.commentInputSetFocus)(!0))}},{key:"onChange",value:function(e,t){this.setState({html:t})}},{key:"onPaste",value:function(e){if(!e||!e.clipboardData||!e.clipboardData.getData)return!0;try{var t=e.clipboardData.getData("text/plain");if(window.getSelection){var a=window.getSelection();a.rangeCount&&!function(){var e=a.getRangeAt(0),s=t.split(U);e.deleteContents(),s.forEach(function(t){e.insertNode(document.createTextNode(t)),e.insertNode(document.createElement("br"))})}()}else if(document.selection&&document.selection.createRange){var s=document.selection.createRange();s.text=t}return this.setState({html:e.target.innerHTML}),e.stopPropagation(),e.preventDefault(),!1}catch(i){}}},{key:"render",value:function(){var e=this.props.authUser,t=void 0===e?{}:e;return v["default"].createElement("div",{className:"CommentInput"},t?v["default"].createElement("span",{className:"CommentInput-username"},"@",t.username):null,v["default"].createElement(T["default"],{key:"comment-input",getInputReference:this.setInputReference,className:B,html:this.state.html,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.handleKeyDown,onKeyUp:this.handleKeyUp,onPaste:this.onPaste,onChange:this.onChange,placeholder:this.state.isDisabled?this.state.html:this.placeholder,locked:this.state.isDisabled}))}}]),t}(v["default"].Component);H.defaultProps={startCoolDown:function(){},commentError:function(){}},H.propTypes={authUser:v["default"].PropTypes.object,broadcast:S.broadcastPropType,commentError:v["default"].PropTypes.func,chatStreamDisabled:v["default"].PropTypes.oneOf((0,n["default"])(O["default"]).map(function(e){return O["default"][e]})),dispatch:v["default"].PropTypes.func.isRequired,intl:g.intlShape.isRequired,isCoolDown:v["default"].PropTypes.bool,isFocused:v["default"].PropTypes.bool,moderation:v["default"].PropTypes.object,replyUsername:v["default"].PropTypes.string,startCoolDown:v["default"].PropTypes.func},t["default"]=H},949:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"shouldComponentUpdate",value:function(e){var t=!this.htmlMatchesInnerHtml(e),a=this.props.locked!==e.locked,s=this.props.onChange!==e.onChange,i=this.props.parser!==e.parser,n=this.props.className!==e.className;return t||a||s||i||n}},{key:"componentDidMount",value:function(){this.props.getInputReference(this.refs.input)}},{key:"componentDidUpdate",value:function(){this.htmlMatchesInnerHtml()||(this.refs.input.innerHTML=this.props.html,this.emitChange())}},{key:"htmlMatchesInnerHtml",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return this.refs.input&&e.html===this.refs.input.innerHTML}},{key:"emitChange",value:function(){this.props.parser&&this.props.parser(this.refs.input);var e=this.refs.input.innerHTML;e!==this.lastHtml&&this.props.onChange(this.refs.input,e),this.lastHtml=e}},{key:"render",value:function(){return v["default"].createElement("div",(0,n["default"])({},this.props,{ref:"input",onInput:this.emitChange.bind(this),contentEditable:!this.props.locked}),this.props.html)}}]),t}(v["default"].Component);g.defaultProps={onChange:function(){},getInputReference:function(){}},g.propTypes={html:v["default"].PropTypes.string.isRequired,getInputReference:v["default"].PropTypes.func,className:v["default"].PropTypes.string,onChange:v["default"].PropTypes.func,parser:v["default"].PropTypes.func,locked:v["default"].PropTypes.bool},t["default"]=g},950:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getModerationPrompt=t.isModeratedForBroadcast=void 0;var i=a(951),n=s(i),r=a(894),o=s(r),l=a(952);t.isModeratedForBroadcast=function(e,t){return!!e&&(e.sentence_type!==n["default"].COMMENTING_SUSPENDED&&e.sentence_type!==n["default"].COMMENTING_DISABLED||t.id===e.broadcast_id)},t.getModerationPrompt=function(e,t){var a=t.formatMessage,s=void 0,i=e.report_type,r=e.message_body;if(i)switch(i){case o["default"].ABUSE:s=a(l.reportTypeAbuse);break;case o["default"].SPAM:s=a(l.reportTypeSpam);break;case o["default"].OTHER:default:s=a(l.reportTypeOther)}if(i&&r)switch(r="*"+r+"*",e.sentence_type){case n["default"].COMMENTING_SUSPENDED:return a(l.commentingSuspendedWithReportAndMessage,{messageBody:r,reportTypeString:s});case n["default"].COMMENTING_DISABLED:return a(l.commentingDisabledWithReportAndMessage,{messageBody:r,reportTypeString:s});case n["default"].GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspendedWithReportAndMessage,{messageBody:r,reportTypeString:s});case n["default"].GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabledWithReportAndMessage,{messageBody:r,reportTypeString:s});default:return""}else if(i)switch(e.sentence_type){case n["default"].COMMENTING_SUSPENDED:return a(l.commentingSuspendedWithReport,{reportTypeString:s});case n["default"].COMMENTING_DISABLED:return a(l.commentingDisabledWithReport,{reportTypeString:s});case n["default"].GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspendedWithReport,{reportTypeString:s});case n["default"].GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabledWithReport,{reportTypeString:s});default:return""}else switch(e.sentence_type){case n["default"].COMMENTING_SUSPENDED:return a(l.commentingSuspended);case n["default"].COMMENTING_DISABLED:return a(l.commentingDisabled);case n["default"].GLOBAL_COMMENTING_SUSPENDED:return a(l.globalCommentingSuspended);case n["default"].GLOBAL_COMMENTING_DISABLED:return a(l.globalCommentingDisabled);default:return""}}},951:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t["default"]={COMMENTING_SUSPENDED:1,COMMENTING_DISABLED:2,GLOBAL_COMMENTING_SUSPENDED:3,GLOBAL_COMMENTING_DISABLED:4}},952:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTypeSpam=t.reportTypeOther=t.reportTypeAbuse=t.globalCommentingSuspendedWithReportAndMessage=t.globalCommentingSuspendedWithReport=t.globalCommentingSuspended=t.globalCommentingDisabledWithReportAndMessage=t.globalCommentingDisabledWithReport=t.globalCommentingDisabled=t.commentingSuspendedWithReportAndMessage=t.commentingSuspendedWithReport=t.commentingSuspended=t.commentingDisabledWithReportAndMessage=t.commentingDisabledWithReport=t.commentingDisabled=void 0;var s=a(243),i=(0,s.defineMessages)({commentingDisabled:{id:"moderation.banned.COMMENTING_DISABLED",defaultMessage:"One or more of your comments was hidden. Commenting is disabled for this broadcast."},commentingDisabledWithReport:{id:"moderation.banned.COMMENTING_DISABLED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is disabled for this broadcast."},commentingDisabledWithReportAndMessage:{id:"moderation.banned.COMMENTING_DISABLED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is disabled for this broadcast."},commentingSuspended:{id:"moderation.banned.COMMENTING_SUSPENDED",defaultMessage:"One or more of your comments was hidden. Commenting is temporarily limited for this broadcast"},commentingSuspendedWithReport:{id:"moderation.banned.COMMENTING_SUSPENDED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is temporarily limited for this broadcast"},commentingSuspendedWithReportAndMessage:{id:"moderation.banned.COMMENTING_SUSPENDED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is temporarily limited for this broadcast."},globalCommentingDisabled:{id:"moderation.banned.GLOBAL_COMMENTING_DISABLED",defaultMessage:"One or more of your comments was hidden. Commenting is disabled for all broadcasts."},globalCommentingDisabledWithReport:{id:"moderation.banned.GLOBAL_COMMENTING_DISABLED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is disabled for all broadcasts."},globalCommentingDisabledWithReportAndMessage:{id:"moderation.banned.GLOBAL_COMMENTING_DISABLED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is disabled for all broadcasts."},globalCommentingSuspended:{id:"moderation.banned.GLOBAL_COMMENTING_SUSPENDED",defaultMessage:"One or more of your comments was hidden. Commenting is temporarily limited for all broadcasts."},globalCommentingSuspendedWithReport:{id:"moderation.banned.GLOBAL_COMMENTING_SUSPENDED_WITH_REPORT",defaultMessage:"One or more of your comments was hidden for {reportTypeString}. Commenting is temporarily limited for all broadcasts."},globalCommentingSuspendedWithReportAndMessage:{id:"moderation.banned.GLOBAL_COMMENTING_SUSPENDED_WITH_REPORT_AND_MESSAGE",defaultMessage:"Your comment {messageBody} was hidden for {reportTypeString}. Commenting is temporarily limited for all broadcasts."},reportTypeAbuse:{id:"moderation.banned.REPORT_TYPE_ABUSE",defaultMessage:"abuse"},reportTypeOther:{id:"moderation.banned.REPORT_TYPE_OTHER",defaultMessage:"other"},reportTypeSpam:{id:"moderation.banned.REPORT_TYPE_SPAM",defaultMessage:"spam"}}),n=i.commentingDisabled,r=i.commentingDisabledWithReport,o=i.commentingDisabledWithReportAndMessage,l=i.commentingSuspended,u=i.commentingSuspendedWithReport,d=i.commentingSuspendedWithReportAndMessage,c=i.globalCommentingDisabled,p=i.globalCommentingDisabledWithReport,h=i.globalCommentingDisabledWithReportAndMessage,f=i.globalCommentingSuspended,m=i.globalCommentingSuspendedWithReport,y=i.globalCommentingSuspendedWithReportAndMessage,v=i.reportTypeAbuse,g=i.reportTypeOther,b=i.reportTypeSpam;t["default"]={commentingDisabled:n,commentingDisabledWithReport:r,commentingDisabledWithReportAndMessage:o,commentingSuspended:l,commentingSuspendedWithReport:u,commentingSuspendedWithReportAndMessage:d,globalCommentingDisabled:c,globalCommentingDisabledWithReport:p,globalCommentingDisabledWithReportAndMessage:h,globalCommentingSuspended:f,globalCommentingSuspendedWithReport:m,globalCommentingSuspendedWithReportAndMessage:y,reportTypeAbuse:v,reportTypeOther:g,reportTypeSpam:b},t.commentingDisabled=n,t.commentingDisabledWithReport=r,t.commentingDisabledWithReportAndMessage=o,t.commentingSuspended=l,t.commentingSuspendedWithReport=u,t.commentingSuspendedWithReportAndMessage=d,t.globalCommentingDisabled=c,t.globalCommentingDisabledWithReport=p,t.globalCommentingDisabledWithReportAndMessage=h,t.globalCommentingSuspended=f,t.globalCommentingSuspendedWithReport=m,t.globalCommentingSuspendedWithReportAndMessage=y,t.reportTypeAbuse=v,t.reportTypeOther=g,t.reportTypeSpam=b},953:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.videoStreamDisabledUnkown=t.videoStreamDisabledTooFull=t.videoStreamDisabledFriendOnly=t.placeholder=t.limited=t.disabledForBroadcast=void 0;var s=a(243),i=(0,s.defineMessages)({disabledForBroadcast:{id:"commenting.DISABLED_FOR_BROADCAST",defaultMessage:"disabled for this broadcast"},limited:{id:"commenting.LIMITED",defaultMessage:"chat limited, reactivated {relativeTime}"},placeholder:{id:"commenting.PLACEHOLDER",defaultMessage:"Say something..."},videoStreamDisabledFriendOnly:{id:"commenting.VIDEO_STREAM_DISABLED_FRIEND_ONLY",defaultMessage:"Limited by broadcaster"},videoStreamDisabledTooFull:{id:"commenting.VIDEO_STREAM_DISABLED_TOO_FULL",defaultMessage:"Chatroom too full…"},videoStreamDisabledUnkown:{id:"commenting.VIDEO_STREAM_DISABLED_UNKOWN",defaultMessage:"Unable to connect to chatroom…"}}),n=i.disabledForBroadcast,r=i.limited,o=i.placeholder,l=i.videoStreamDisabledFriendOnly,u=i.videoStreamDisabledTooFull,d=i.videoStreamDisabledUnkown;t["default"]={disabledForBroadcast:n,limited:r,placeholder:o,videoStreamDisabledFriendOnly:l,videoStreamDisabledTooFull:u,videoStreamDisabledUnkown:d},t.disabledForBroadcast=n,t.limited=r,t.placeholder=o,t.videoStreamDisabledFriendOnly=l,t.videoStreamDisabledTooFull=u,t.videoStreamDisabledUnkown=d},954:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=["InfoIcon"];return e.isActive&&t.push("isActive"),r["default"].createElement("svg",{className:t.join(" "),width:"25px",height:"25px",viewBox:"0 0 30 30"},r["default"].createElement("path",{className:"InfoIcon-innerCircle",d:"M15,27.9C7.9,27.9,2.1,22.1,2.1,15S7.9,2.1,15,2.1S27.9,7.9,27.9,15S22.1,27.9,15,27.9z"}),r["default"].createElement("g",null,r["default"].createElement("path",{className:"InfoIcon-i",d:"M13.1,9h3.1V6.2h-3.1V9z M13.1,23.8h3.1V11.2h-3.1V23.8z"})),r["default"].createElement("path",{className:"InfoIcon-outerCircle",d:"M15,0C6.7,0,0,6.7,0,15s6.7,15,15,15s15-6.7,15-15S23.3,0,15,0z M15,27.9C7.9,27.9,2.1,22.1,2.1,15 S7.9,2.1,15,2.1S27.9,7.9,27.9,15S22.1,27.9,15,27.9z"}))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var n=a(1),r=s(n);i.propTypes={isActive:r["default"].PropTypes.bool}},955:function(e,t){"use strict";function a(e){var t=e.CommentInput,a={};return a.commentInputState={},t&&(a.commentInputState.replyUsername=t.replyUsername,a.commentInputState.isFocused=t.isFocused),a}Object.defineProperty(t,"__esModule",{value:!0}),t.commentInputStateToProps=a},956:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HeartsContainer=void 0;var i=a(1),n=s(i),r=a(225),o=a(642),l=a(946),u=a(957),d=s(u),c=a(964),p=s(c),h=a(589),f=a(547),m=a(955),y=a(587),v=a(756),g=s(v),b=a(757),T=s(b),E=function(e){var t=e.authUser,a=e.broadcast,s=e.classNames,i=e.commentInputState,r=e.player,o=r&&r.isReplayMode,l=["HeartsContainer"].concat(s);return n["default"].createElement("div",{className:l.join(" ")},n["default"].createElement(g["default"],{feature:"SignIn"},n["default"].createElement(T["default"],null,n["default"].createElement(p["default"],{commentIsFocused:i&&i.isFocused,isAuthed:(0,f.isLoggedIn)(t),isLive:!o,authUser:t}))),n["default"].createElement(d["default"],{broadcast:a,isLive:!o}))};E.defaultProps={classNames:[]},E.propTypes={authUser:n["default"].PropTypes.object,broadcast:o.broadcastPropType,commentInputState:l.commentInputShape,classNames:n["default"].PropTypes.arrayOf(n["default"].PropTypes.string),dispatch:n["default"].PropTypes.func.isRequired,player:n["default"].PropTypes.object},t.HeartsContainer=E,t["default"]=(0,r.connect)((0,y.compose)(h.authStateToProps,m.commentInputStateToProps))(E)},957:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HeartsClass=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(508),g=s(v),b=a(958),T=s(b),E=a(668),P=a(363),w=a(642),C=a(667),S=s(C),_=a(386),M=a(582),k=s(M),R=a(818),I="FeedbackItem",N=6,A=90,O={HEART:"heart",SCREENSHOT:"screenshot"},D=a(962)(),L=a(963)(),U={heart:D,screenshot:L},B=100,F=2,H=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.state={hearts:[],userHearts:[]},a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.broadcast;t&&t.heart_theme&&t.heart_theme.forEach(function(e){U[e]||g["default"].get("/assets/resources/svg/"+e+".svg").end(function(t,a){t||a.type.indexOf("svg")>=0&&a.text&&a.text.indexOf("<svg")>=0&&(U[e]=a.text)})}),this.currentHeartIntervalCount=0,this.maxHeartIntervalID=setInterval(function(){e.currentHeartIntervalCount=0},B),this.heartsSub=E.eventManager.subscribe("newHearts",function(t){e.setState({hearts:t})}),this.userHeartsSub=E.eventManager.subscribe("newUserHearts",function(t){e.setState({userHearts:t})})}},{key:"componentWillUnmount",value:function(){clearInterval(this.maxHeartIntervalID),this.heartsSub.remove(),this.userHeartsSub.remove()}},{key:"shouldComponentUpdate",value:function(e){return!e.tabHidden}},{key:"getBroadcastThemes",value:function(){var e=this.props.broadcast.heart_theme||[];return e}},{key:"getRandomValueForRange",value:function(e,t){return Math.floor(Math.random()*(t-e))+e}},{key:"getHeartTheme",value:function(){if(this.shouldUseHeartTheme()){var e=this.getBroadcastThemes(),t=this.getRandomValueForRange(0,e.length);return e[t]||O.HEART}return O.HEART}},{key:"shouldUseHeartTheme",value:function(){var e=this.getBroadcastThemes();if(!e||0===e.length)return!1;var t=this.getRandomValueForRange(1,N+1);return t===N}},{key:"generateElement",value:function(e,t){var a=document.createDocumentFragment(),s=document.createElement("body"),i=void 0;for(t?s.innerHTML="<span>"+t+"</span>":s.innerHTML=e;i=s.firstChild;)a.appendChild(i);return a}},{key:"getParticipantColorName",value:function(e){return e.userHeart&&!this.props.isLive?_.REPLAY_COLOR_NAME:(0,P.getParticipantColorName)(e.participant_index)}},{key:"addHeart",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!(t&&!e.userHeart&&this.currentHeartIntervalCount>=F)){var a=this.refs.heartsContainer,s="u-participant"+this.getParticipantColorName(e);this.currentHeartIntervalCount++;var i=void 0;switch(e.type){case S["default"].SCREENSHOT:i=O.SCREENSHOT;break;case S["default"].HEART:i=this.getHeartTheme()}var n="item-"+i+"-"+e.uuid;if(!document.getElementById(n)){var r=this.generateElement(U[i],e.eggmojiOverride),o=r.querySelector("svg")||r.querySelector("span"),l=parseInt(o.getAttribute("width"),10),u=(A-l)/2,d=[I,I+"--"+i,s];e.userHeart&&(d.push(I+"--userHeart"),e.eggmojiOverride&&d.push("isEggmoji")),o.setAttribute("class",d.join(" ")),o.setAttribute("id",n),o.setAttribute("style","right: "+u+"px"),a.appendChild(r),this.animateEl(n)}}}},{key:"appendHearts",value:function(){var e=this;(this.state.hearts.length||this.state.userHearts.length)&&((0,T["default"])(this.state.hearts,"uuid").forEach(function(t){return e.addHeart(t)}),(0,T["default"])(this.state.userHearts,"uuid").forEach(function(t){return e.addHeart(t,!1)}))}},{key:"removeHeart",value:function(e){var t=document.getElementById(e);t&&t.parentNode&&t.parentNode.removeChild(t)}},{key:"flushHearts",value:function(){for(var e=this.refs.heartsContainer;e.firstChild;)e.removeChild(e.firstChild)}},{key:"animateEl",value:function(e){var t=this,a="thru",s=1.5,i=.5,n=80,r=100,o=5,l=this.props.dimensions.height,u=.25,d=100,c=3,p=0,h=.3,f=.6,m=document.getElementsByClassName(I).length,y=m*o+l*u;y=Math.min(y,l),y+=Math.random()*d;var v=Math.random()*i-i/2,g=-(y/2),b=n/2-Math.random()*n,T=-y,E=r/2-Math.random()*r,P="#"+e;TweenLite.to(P,h,{scaleY:f,scaleX:f,ease:Back.easeOut}),TweenLite.to(P,c,{opacity:p,rotation:v+"rad",ease:Linear.easeNone,bezier:{type:a,curviness:s,autoRotate:!1,values:[{x:b,y:g},{x:E,y:T}]},onComplete:function(){t.removeHeart(e)}})}},{key:"componentDidUpdate",value:function(){this.appendHearts()}},{key:"render",value:function(){return m["default"].createElement("ul",{className:"Hearts",ref:"heartsContainer",id:"heartsContainer"})}}]),t}(m["default"].Component);H.defaultProps={dimensions:{height:0,width:0}},H.propTypes={dimensions:m["default"].PropTypes.object,broadcast:w.broadcastPropType,isLive:m["default"].PropTypes.bool,tabHidden:m["default"].PropTypes.bool};t.HeartsClass=H;t["default"]=(0,y.connect)((0,k["default"])(["dimensions","tabHidden"]))((0,R.purify)(H))},958:function(e,t,a){function s(e,t){return e&&e.length?n(e,i(t)):[]}var i=a(394),n=a(959);e.exports=s},959:function(e,t,a){function s(e,t,a){var s=-1,c=n,p=e.length,h=!0,f=[],m=f;if(a)h=!1,c=r;else if(p>=d){var y=t?null:l(e);if(y)return u(y);h=!1,c=o,m=new i}else m=t?[]:f;e:for(;++s<p;){var v=e[s],g=t?t(v):v;if(v=a||0!==v?v:0,h&&g===g){for(var b=m.length;b--;)if(m[b]===g)continue e;t&&m.push(g),f.push(v)}else c(m,g,a)||(m!==f&&m.push(g),f.push(v))}return f}var i=a(440),n=a(614),r=a(617),o=a(620),l=a(960),u=a(448),d=200;e.exports=s},960:function(e,t,a){var s=a(468),i=a(961),n=a(448),r=1/0,o=s&&1/n(new s([,-0]))[1]==r?function(e){return new s(e)}:i;e.exports=o},962:function(e,t){"use strict";e.exports=function(){return'\n    <svg width="59px" height="51px" viewBox="0 0 59 51" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">\n      <path class="shape" d="M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991,1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058,35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501,44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848,49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576,49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533,43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58,6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943,7.65161487 Z"></path>\n      <path class="border" d="M28.8489053,5.43563138 C25.3562996,1.92109055 20.983681,0.00688572968 16.3190991,0.00688572968 C7.42056774,0.00688572968 0,6.9226236 0,17.0265358 C0,22.1855834 2.04040306,26.8994736 5.8050462,31.4472774 C8.51671937,34.7230613 11.1601088,37.0558326 16.6934678,41.4387983 C18.8340729,43.1377656 20.2000846,44.1976641 22.7820008,46.1797754 C25.8185185,48.5066165 26.5846544,49.1319613 27.7067705,50.2547363 C28.1795143,50.7325106 28.8219412,51 29.49943,51 C30.174979,51 30.8149096,50.7343422 31.2928267,50.2551454 C31.3897022,50.1581975 31.4862687,50.0627605 31.5823952,49.9689814 C31.8413936,49.7163076 32.0991169,49.4737977 32.3655459,49.2321313 C33.5909252,48.1206415 34.6153918,47.3131352 38.8276213,44.0985832 L42.2701943,41.4665472 C47.2216019,37.6786259 49.9293458,35.342457 52.7360007,32.0238757 C56.7562017,27.2704007 59,22.282734 59,16.919807 C59,6.87456591 51.5862887,0 42.6991419,0 C37.7334993,0 33.0959278,2.16670511 29.499546,6.12003291 C29.4876099,6.1038208 29.3420814,5.93190494 28.8489053,5.43563138 Z M28.7247217,8.28393371 L29.4993625,9.2330129 L30.2740843,8.28399976 C33.5968976,4.21364357 37.9880426,2 42.6991419,2 C50.5140427,2 57,8.01428071 57,16.919807 C57,21.7505742 54.9485974,26.3105708 51.208916,30.7323601 C48.5231058,33.908055 45.8965364,36.1741887 41.0552127,39.8778937 L37.6135788,42.5092122 C33.3470424,45.7652079 32.307475,46.584617 31.0218502,47.7507529 C30.7374152,48.0087518 30.4620483,48.2678638 30.1857688,48.5373967 C30.0835118,48.6371567 29.9809075,48.7385608 29.877402,48.8421444 C29.7739718,48.9458508 29.6435344,49 29.49943,49 C29.3554589,49 29.2251022,48.945723 29.124911,48.8444694 C27.9147064,47.6335365 27.1074652,46.9746403 23.9991846,44.5928088 C21.4258429,42.6172797 20.0670532,41.5629847 17.9360533,39.8716415 C12.5104884,35.5740588 9.93892334,33.304672 7.34567784,30.1719523 C3.85559722,25.9558284 2,21.6688903 2,17.0265358 C2,8.05990959 8.49487798,2.00688573 16.3190991,2.00688573 C21.0231751,2.00688573 25.4052305,4.21693921 28.7247217,8.28393371 L28.7247217,8.28393371 Z"></path>\n    </svg>\n  '}},963:function(e,t){"use strict";e.exports=function(){return'\n    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="56px" height="47px" viewBox="0 0 56 47" version="1.1">\n      <path d="M40.7493875,8 C39.8625724,4.55001545 36.7257061,2 33.0047247,2 L22.9952753,2 C19.2670618,2 16.1348494,4.54892716 15.2499342,8 L9.99683765,8 C5.58030617,8 2,11.5813344 2,16.005662 L2,36.994338 C2,41.415743 5.57417059,45 9.99683765,45 L46.0031624,45 C50.4196938,45 54,41.4186656 54,36.994338 L54,16.005662 C54,11.584257 50.4258294,8 46.0031624,8 L40.7493875,8 Z" class="camera-fill"/>\n      <path d="M46.0031624,8 L46.0031624,8 L40.7493875,8 C39.8625724,4.55001545 36.7257061,2 33.0047247,2 L22.9952753,2 C19.2670618,2 16.1348494,4.54892716 15.2499342,8 L9.99683765,8 C5.58030617,8 2,11.5813344 2,16.005662 L2,36.994338 C2,41.415743 5.57417059,45 9.99683765,45 L46.0031624,45 C50.4196938,45 54,41.4186656 54,36.994338 L54,16.005662 C54,11.584257 50.4258294,8 46.0031624,8 L46.0031624,8 Z M46.0031624,6 C51.5290116,6 56,10.4782954 56,16.005662 L56,36.994338 C56,42.521845 51.5256529,47 46.0031624,47 L9.99683765,47 C4.47098837,47 0,42.5217046 0,36.994338 L0,16.005662 C0,10.478155 4.47434713,6 9.99683765,6 C9.99683765,6 13.8449707,5.96875 13.8377754,5.97928921 C15.4002867,2.41301236 18.9562991,0 22.9952753,0 L33.0047247,0 C37.5895478,0 40.5981825,2.4158698 42.1618752,5.98217617 C42.1568604,5.984375 46.0031624,6 46.0031624,6 Z" class="camera-outline" fill="#FFFFFF"/>\n      <path d="M28,36 C34.0751322,36 39,31.0751322 39,25 C39,18.9248678 34.0751322,14 28,14 C21.9248678,14 17,18.9248678 17,25 C17,31.0751322 21.9248678,36 28,36 L28,36 Z M28,38 L28,38 C20.8202983,38 15,32.1797017 15,25 C15,17.8202983 20.8202983,12 28,12 C35.1797017,12 41,17.8202983 41,25 C41,32.1797017 35.1797017,38 28,38 L28,38 Z" class="camera-lens" fill="#FFFFFF"/>\n    </svg>\n  ';
}},964:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.UserHeartClass=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(663),g=a(665),b=a(787),T=a(561),E=a(965),P=s(E),w=a(667),C=s(w),S=a(389),_=s(S),M=a(386),k=a(363),R=700,I=200,N=3e4,A=N/I+1,O={INACTIVE:"INACTIVE",ACTIVE_VIA_CLICK:"ACTIVE_VIA_CLICK",ACTIVE_VIA_KEY:"ACTIVE_VIA_KEY"},D=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.state={currentState:O.INACTIVE,eggmoji:!1},a.heartsFromBlast=0,a.sendHeart=a.sendHeart.bind(a),a.handleClick=a.handleClick.bind(a),a.handleKeyPress=a.handleKeyPress.bind(a),a.handleKeyUp=a.handleKeyUp.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyPress),window.addEventListener("keyup",this.handleKeyUp,!0)}},{key:"componentWillUnmount",value:function(){this.setState({currentState:O.INACTIVE,eggmoji:!1}),window.removeEventListener("keydown",this.handleKeyPress),window.removeEventListener("keyup",this.handleKeyUp)}},{key:"handleClick",value:function(){this.state.currentState===O.ACTIVE_VIA_KEY&&this.handleKeyUp(),this.sendHeart()}},{key:"targetIsInput",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.target;return!!t&&("INPUT"===t.tagName||void 0)}},{key:"keyPressIsValid",value:function(e){return(!this.props.chat||!this.props.chat.paused)&&(e.keyCode===_["default"].SPACE_BAR&&(!(this.heartsFromBlast>A)&&(!this.targetIsInput(e)&&!this.props.commentIsFocused)))}},{key:"handleKeyPress",value:function(e){var t=this;this.keyPressIsValid(e)&&this.setState({currentState:O.ACTIVE_VIA_KEY},function(){t.props.isAuthed&&!t.spaceTimer&&(t.spaceTimer=setTimeout(function(){t.state.currentState===O.ACTIVE_VIA_KEY&&t.blastHearts()},R))})}},{key:"handleKeyUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.clearTimeouts(),this.heartsFromBlast=0,this.setState({currentState:O.INACTIVE}),this.keyPressIsValid(e)&&e.keyCode===_["default"].SPACE_BAR&&this.sendHeart()}},{key:"clearTimeouts",value:function(){this.spaceTimer&&(clearTimeout(this.spaceTimer),this.spaceTimer=null),this.eggModeTimer&&(clearTimeout(this.eggModeTimer),this.eggModeTimer=null)}},{key:"blastHearts",value:function(){var e=this;return this.props.commentIsFocused||this.props.chat&&this.props.chat.paused||this.heartBlastTimer||this.state.currentState!==O.ACTIVE_VIA_KEY||this.heartsFromBlast>A?this.clearTimeouts():void(this.heartBlastTimer=setTimeout(function(){e.heartBlastTimer=null,e.props.isLive&&!e.eggModeTimer&&(e.eggModeTimer=setTimeout(function(){return e.eggMode()},N)),e.heartsFromBlast++,e.sendHeart(),setTimeout(function(){return e.blastHearts()})},I))}},{key:"eggMode",value:function(){var e=this.props.chat;return e&&e.paused?this.clearTimeouts():this.state.currentState===O.INACTIVE?this.clearTimeouts():(this.props.dispatch((0,T.trackEvent)("EGGMOJI_MODE"),{color:(0,k.getParticipantColorName)(e.chatSession.participant_index)}),void this.setState({eggmoji:(0,k.getParticipantEggmoji)(e.chatSession.participant_index)}))}},{key:"sendHeart",value:function(){var e=this.props.chat;if(!e||!e.paused){if(!this.props.isAuthed)return void this.props.dispatch((0,b.openSignInModal)({openedFrom:"HEART"}));var t=this.props,a=t.authUser,s=t.dispatch;s((0,g.chatAddNewUserHeart)({authUser:a,eggmojiOverride:this.state.eggmoji,type:C["default"].HEART}))}}},{key:"getParticipantColorName",value:function(){return this.props.isLive?(0,k.getParticipantColorName)(this.props.chat.chatSession.participant_index):M.REPLAY_COLOR_NAME}},{key:"render",value:function(){var e=this.props.isAuthed,t=["UserHeart"];if(e){var a=this.getParticipantColorName();this.state.currentState!==O.INACTIVE&&t.push("UserHeart--active"),a&&t.push("UserHeart--participant"+a),this.state.eggmoji&&t.push("UserHeart-eggmoji")}else t.push("UserHeart--inactive");return m["default"].createElement("div",{className:t.join(" "),onClick:this.handleClick},this.state.eggmoji?this.state.eggmoji:m["default"].createElement(P["default"],null))}}]),t}(m["default"].Component);D.propTypes={authUser:m["default"].PropTypes.object,chat:v.chatSessionPropType,commentIsFocused:m["default"].PropTypes.bool,dispatch:m["default"].PropTypes.func.isRequired,isAuthed:m["default"].PropTypes.bool,isLive:m["default"].PropTypes.bool};t.UserHeartClass=D;t["default"]=(0,y.connect)(v.chatSessionMapper)(D)},965:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return n["default"].createElement("div",{className:"OutlineHeart"},n["default"].createElement("svg",{viewBox:"0 0 59 51"},n["default"].createElement("path",{strokeDasharray:"1,3",className:"shape",strokeLinejoin:"round",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991, 1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058, 35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501, 44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848, 49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576, 49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533, 43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58, 6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943, 7.65161487 Z"}),n["default"].createElement("path",{className:"fill",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991, 1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058, 35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501, 44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848, 49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576, 49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533, 43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58, 6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943, 7.65161487 Z"})))};var i=a(1),n=s(i)},966:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(225),g=a(587),b=a(921),T=a(967),E=s(T),P=a(561),w=a(787),C=a(642),S=a(866),_=a(969),M=s(_),k=a(659),R=s(k),I=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"handleClick",value:function(){var e=this.props,t=e.dispatch,a=e.location,s=e.broadcast,i=e.replay,n=this.getShareComponents();t((0,P.trackEvent)("SHARE_BROADCAST_CLICK",{location:a})),t((0,w.openShareOverlay)({shareComponents:n,broadcast:s,videoStartTime:i.elapsed,videoDuration:i.duration}))}},{key:"generateBroadcastTitle",value:function(){return this.props.broadcastTitle?this.props.broadcastTitle:this.props.intl.formatMessage(R["default"].title)}},{key:"getShareComponents",value:function(){var e=this.props,t=e.intl,a=e.broadcast,s=this.generateBroadcastTitle(),i=a.isRunning?t.formatMessage(M["default"].tweet.liveBroadcast):t.formatMessage(M["default"].tweet.endedBroadcast);a.twitter_username&&""!==a.twitter_username&&(i=".@"+a.twitter_username+" "+i);var n=a.urlWithUsername;return{text:i,title:s,url:n}}},{key:"render",value:function(){var e=this.props.intl;return m["default"].createElement("a",{href:"#",className:"ShareBroadcastButton",title:e.formatMessage(M["default"].button.linkTitle),onClick:this.handleClick},m["default"].createElement(E["default"],null))}}]),t}(m["default"].Component);I.defaultProps={location:"VideoOverlay",broadcast:null},I.propTypes={broadcast:C.broadcastPropType,broadcastTitle:m["default"].PropTypes.string,dispatch:m["default"].PropTypes.func.isRequired,intl:m["default"].PropTypes.object.isRequired,location:m["default"].PropTypes.string,replay:S.replayPropType.isRequired},t["default"]=(0,v.connect)((0,g.compose)(b.replayFullMapper))((0,y.injectIntl)(I))},967:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=e.modal,a=e.active,s=a||t.isShareOverlayVisible;return r["default"].createElement(c["default"],{active:s})}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=s(n),o=a(225),l=a(761),u=a(762),d=a(968),c=s(d);i.propTypes={modal:u.modalPropType.isRequired,active:r["default"].PropTypes.bool},i.defaultProps={modal:u.modalDefaultProps},t["default"]=(0,o.connect)(l.modalStateToProps)(i)},968:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){var e=this.props.active,t=["ShareIconContainer"];return e&&t.push("active"),m["default"].createElement("div",{className:t.join(" ")},m["default"].createElement("svg",{className:"ShareIcon",width:"18px",height:"18px",viewBox:"0 0 18 18",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},m["default"].createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},m["default"].createElement("g",null,m["default"].createElement("path",{d:"M1.9999997,14.0007869 C1.9999999,14.0005246 2,14.0002623 2,14 C2,13.4477153 1.55228475,13 1,13 C0.44771525,13 0,13.4477153 0,14 L0,16 C0,17.1054293 0.893203454,18 2.00087166,18 L15.9991283,18 C17.1047241,18 18,17.1078829 18,16 L18,14 C18,13.4477153 17.5522847,13 17,13 C16.4477153,13 16,13.4477153 16,14 L16,16 C16,16.0017278 2.00087166,16 2.00087166,16 C1.99847802,16 1.99997514,14.0324605 1.9999997,14.0003962 Z"}),m["default"].createElement("g",{transform:"translate(4.000000, 0.400000)"},m["default"].createElement("rect",{x:"4",y:"2",width:"2",height:"10",rx:"1"}),m["default"].createElement("polyline",{strokeWidth:"2",strokeLinecap:"round",points:"-2.83608236e-16 6 5 1 10 6"}))))))}}]),t}(m["default"].Component);y.propTypes={active:m["default"].PropTypes.bool},t["default"]=y},969:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.tweet=t.timecode=t.button=void 0;var i=a(850),n=s(i),r=a(849),o=s(r),l=a(970),u=s(l);t["default"]={button:n["default"],timecode:o["default"],tweet:u["default"]},t.button=n["default"],t.timecode=o["default"],t.tweet=u["default"]},970:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.liveBroadcast=t.endedBroadcast=void 0;var s=a(243),i=(0,s.defineMessages)({endedBroadcast:{id:"share.tweet.ENDED_BROADCAST",defaultMessage:"Watch on #Periscope"},liveBroadcast:{id:"share.tweet.LIVE_BROADCAST",defaultMessage:"LIVE on #Periscope"}}),n=i.endedBroadcast,r=i.liveBroadcast;t["default"]={endedBroadcast:n,liveBroadcast:r},t.endedBroadcast=n,t.liveBroadcast=r},971:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(972),v=s(y),g=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){var e=["BroadcastNextButton","u-transition-1"];return this.props.player.isCinemaPlayer&&e.push("u-opacity-0","u-pointer-events-none"),m["default"].createElement("div",{className:e.join(" "),onClick:this.props.nextBroadcast},m["default"].createElement("button",{className:"BroadcastNextButton-button"},m["default"].createElement(v["default"],null)))}}]),t}(m["default"].Component);t["default"]=g,g.propTypes={player:m["default"].PropTypes.object,nextBroadcast:m["default"].PropTypes.func.isRequired}},972:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(){return r["default"].createElement("svg",{className:"CaretRight",viewBox:"0 0 35 20"},r["default"].createElement("g",{transform:"translate(17.500000, 10.000000) rotate(180.000000) translate(-17.500000, -10.000000)",fill:"#FFFFFF"},r["default"].createElement("path",{d:"M17.337,19.225 C16.831,19.225 16.327,19.033 15.941,18.648 L0.877,3.584 C0.106,2.812 0.106,1.563 0.877,0.793 C1.648,0.021 2.897,0.021 3.668,0.793 L17.337,14.461 L31.006,0.793 C31.777,0.021 33.026,0.021 33.797,0.793 C34.568,1.564 34.568,2.812 33.797,3.584 L18.732,18.648 C18.347,19.033 17.842,19.225 17.337,19.225 L17.337,19.225 Z",transform:"translate(17.337000, 9.719500) rotate(90.000000) translate(-17.337000, -9.719500)"})))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var n=a(1),r=s(n)},973:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y="SeekingOverlay",v="SeekingOverlay--isSeeking",g=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){var e=[y];return this.props.player.isStalled&&e.push(v),m["default"].createElement("div",{className:e.join(" ")})}}]),t}(m["default"].Component);t["default"]=g,g.propTypes={player:m["default"].PropTypes.object.isRequired}},974:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(365),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(225),b=a(688),T=a(975),E=s(T),P=a(976),w=s(P),C=a(977),S=s(C),_=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"render",value:function(){var e=["PlaybackControlsOverlay"].concat((0,n["default"])(E["default"].buildStateClasses(this.props.player)));return v["default"].createElement("div",{className:e.join(" ")},v["default"].createElement("div",{className:"PlaybackControlsOverlay-cover",onClick:E["default"].togglePlayback.bind(E["default"],this.props)},v["default"].createElement("div",{className:"PlaybackControlsOverlay-hud"},v["default"].createElement("div",{className:"PlaybackControlsOverlay-icon PlaybackControlsOverlay-pause"},v["default"].createElement(w["default"],null)),v["default"].createElement("div",{className:"PlaybackControlsOverlay-icon PlaybackControlsOverlay-play"},v["default"].createElement(S["default"],null)))))}}]),t}(v["default"].Component);_.propTypes={dispatch:v["default"].PropTypes.func.isRequired,dispatchPauseVideo:v["default"].PropTypes.func.isRequired,dispatchPlayVideo:v["default"].PropTypes.func.isRequired,player:v["default"].PropTypes.object.isRequired},t["default"]=(0,g.connect)(function(){return{}},b.videoPlayerDispatchMapper)(_)},975:function(e,t,a){"use strict";function s(e){var t=1,a=1,s=2,i=0,n=1,r=new TimelineLite;r.fromTo(e,t/2,{opacity:i},{opacity:n,bezier:{values:[{x:.25,y:.46},{x:.45,y:.94}]}}).to(e,t/2,{opacity:i,bezier:{values:[{x:.25,y:.46},{x:.45,y:.94}]}}).fromTo(e,t,{scale:a},{scale:s,transformOrigin:"center center",bezier:{values:[{x:.19,y:1},{x:.22,y:1}]}},0)}function i(e){var t=[];return e.isExpectingVideo?t.push("is-playing"):t.push("is-paused"),t}function n(e){e.player.isExpectingVideo?(s(l),e.dispatchPauseVideo(),e.dispatch((0,r.trackEvent)("VIDEO_PAUSE"))):(s(o),e.dispatchPlayVideo(),e.dispatch((0,r.trackEvent)("VIDEO_UNPAUSE")))}Object.defineProperty(t,"__esModule",{value:!0});var r=a(561),o=".PlaybackControlsOverlay-hud .PlaybackControlsOverlay-play svg",l=".PlaybackControlsOverlay-hud .PlaybackControlsOverlay-pause svg";t["default"]={buildStateClasses:i,togglePlayback:n}},976:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return n["default"].createElement("svg",{viewBox:"0 0 27 33",className:"PauseIcon"},n["default"].createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n["default"].createElement("g",{transform:"translate(-1371.000000, -954.000000)",fill:"#FFFFFF"},n["default"].createElement("g",{transform:"translate(1371.000000, 954.000000)"},n["default"].createElement("rect",{x:"0",y:"0",width:"9",height:"33"}),n["default"].createElement("rect",{x:"18",y:"0",width:"9",height:"33"})))))};var i=a(1),n=s(i)},977:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return n["default"].createElement("svg",{viewBox:"0 0 34 34",className:"PlayIcon"},n["default"].createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n["default"].createElement("g",{transform:"translate(-1370.000000, -955.000000)",fill:"#FFFFFF"},n["default"].createElement("polygon",{transform:"translate(1387.000000, 972.000000) rotate(90.000000) translate(-1387.000000, -972.000000)",points:"1387 955 1404 989 1370 989"}))))};var i=a(1),n=s(i)},978:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(365),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(225),b=a(688),T=a(975),E=s(T),P=a(976),w=s(P),C=a(977),S=s(C),_=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"render",value:function(){var e=this.props.player,t=["PlaybackControls"].concat((0,n["default"])(E["default"].buildStateClasses(e)));return v["default"].createElement("div",{className:t.join(" ")},v["default"].createElement("div",{className:"PlaybackControls-button",onClick:E["default"].togglePlayback.bind(E["default"],this.props)},v["default"].createElement("div",{className:"PlaybackControls-pause"},v["default"].createElement(w["default"],null)),v["default"].createElement("div",{className:"PlaybackControls-play"},v["default"].createElement(S["default"],null))))}}]),t}(v["default"].Component);_.propTypes={dispatchPauseVideo:v["default"].PropTypes.func.isRequired,dispatchPlayVideo:v["default"].PropTypes.func.isRequired,player:v["default"].PropTypes.object},t["default"]=(0,g.connect)(function(){return{}},b.videoPlayerDispatchMapper)(_)},979:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(355),n=s(i),r=a(365),o=s(r),l=a(267),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(293),m=s(f),y=a(341),v=s(y),g=a(1),b=s(g),T=a(225),E=a(580),P=s(E),w=a(668),C=a(980),S=s(C),_=a(582),M=s(_),k=a(921),R=a(663),I=s(R),N=a(664),A=a(866),O=a(642),D=a(667),L=s(D),U=a(670),B=s(U),F=a(818),H=a(587),q=15,j=4500,x=1e3,V=7e3,W=1e3,Y=500,G=3e3,z=function(){function e(){(0,m["default"])(this,e),this.isDelayed=!1,this.mouseEnter=this.mouseEnter.bind(this),this.mouseLeave=this.mouseLeave.bind(this),this.mouseMove=(0,P["default"])(this.mouseMove.bind(this),200,{maxWait:1e3,leading:!0,trailing:!1})}return(0,v["default"])(e,[{key:"setDelay",value:function(e){e||this.clearTimeouts(),this.isDelayed=e}},{key:"mouseEnter",value:function(){this.isDelayed||this.setDelay(Date.now())}},{key:"mouseLeave",value:function(){this.isDelayed&&this.setDelay(!1)}},{key:"mouseMove",value:function(){this.isDelayed&&this.inactivityTimeout()}},{key:"inactivityTimeout",value:function(){var e=this;this._inactivityTimeout&&clearTimeout(this._inactivityTimeout),this._inactivityTimeout=setTimeout(function(){e.setDelay(!1)},G)}},{key:"clearTimeouts",value:function(){this._inactivityTimeout&&clearTimeout(this._inactivityTimeout),this._maxPauseTimeout&&clearTimeout(this._maxPauseTimeout)}}]),e}(),K=function(e){function t(e){(0,m["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.state={forceUpdate:0},a.lastUpdate=null,a.activeMessages=[],a.flushQueuedMessages(),a.messagePauser=new z,a}return(0,h["default"])(t,e),(0,v["default"])(t,[{key:"componentDidMount",value:function(){this.eventManagerSubscribe()}},{key:"componentWillUnmount",value:function(){this.eventManagerUnsubscribe()}},{key:"eventManagerSubscribe",value:function(){var e=this;this.commentSub=w.eventManager.subscribe("newComments",function(t){e.queuedMessages.comments=e.queuedMessages.comments.concat(t),e.queueForcedUpdate()}),this.userCommentSub=w.eventManager.subscribe("newUserComments",function(t){e.queuedMessages.userComments=e.queuedMessages.userComments.concat(t),e.queueForcedUpdate()}),this.systemMessageSub=w.eventManager.subscribe("newSystemMessages",function(t){e.queuedMessages.systemMessages=e.queuedMessages.systemMessages.concat(t),e.queueForcedUpdate()}),this.joinSub=w.eventManager.subscribe("newJoins",function(t){e.queuedMessages.joins=e.queuedMessages.joins.concat(t),e.queueForcedUpdate()})}},{key:"eventManagerUnsubscribe",value:function(){this.commentSub.remove(),this.userCommentSub.remove(),this.systemMessageSub.remove(),this.joinSub.remove()}},{key:"componentWillReceiveProps",value:function(e){e.chat.shouldFlush&&this.flush(e)}},{key:"isNextTick",value:function(){var e=this.queuedMessages.userComments.length||this.queuedMessages.systemMessages.length;return e||new Date-this.lastUpdate>=Y}},{key:"shouldComponentUpdate",value:function(e){return this.props.tabHidden===e.tabHidden&&!!this.isNextTick()}},{key:"getMessages",value:function(e,t){if(t.chat)switch(e){case L["default"].USER_CHAT:return t.chat.activeUserChatMessages;case L["default"].CHAT:return t.chat.activeChats;case L["default"].SYSTEM:return t.chat.activeSystemMessages;case L["default"].JOIN:return t.chat.activeJoins;default:return[]}return[]}},{key:"flush",value:function(){this.activeMessages.length=0,this.flushQueuedMessages()}},{key:"flushQueuedMessages",value:function(){this.queuedMessages={queue:[],userComments:[],systemMessages:[],comments:[],joins:[]}}},{key:"isImmediateMessage",value:function(e){switch(e.type){case L["default"].USER_CHAT:case L["default"].SYSTEM:return!0;default:return!1}}},{key:"queueForcedUpdate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;clearTimeout(this.forceUpdateTimeout),this.forceUpdateTimeout=setTimeout(function(){var t=e.state.forceUpdate;t++,e.setState({forceUpdate:t})},t)}},{key:"getUsersTimelineTime",value:function(){var e=Date.now(),t=this.messagePauser.isDelayed,a=t||e,s=this.props.tabHidden?e:a;return{usersTimelineTime:s,now:e}}},{key:"updateActiveMessages",value:function(){this.lastUpdate=new Date;var e=this.getUsersTimelineTime(),t=e.usersTimelineTime,a=e.now,s=q+this.queuedMessages.userComments.length+this.queuedMessages.systemMessages.length+this.queuedMessages.queue.length,i=[].concat((0,o["default"])(this.queuedMessages.queue),(0,o["default"])(this.queuedMessages.userComments),(0,o["default"])(this.queuedMessages.systemMessages),(0,o["default"])(this.queuedMessages.comments),(0,o["default"])(this.queuedMessages.joins)).slice(0,s);if(this.messagePauser.isDelayed)return i.length&&this.queueForcedUpdate(200),this.activeMessages;this.flushQueuedMessages();var n=Math.max(Math.floor((this.props.dimensions.height+50)/100)-2,1);this.activeMessages=this.activeMessages.reduce(function(e,a){return a.exiting&&(t>a.exiting+j||a.exitNow&&t>a.exiting+x)?e:(!a.exiting&&t>a.displayDate+W+V&&(a.exiting=t),e.push(a),e)},[]);for(var r=i.shift();r;)this.addMessage(r,t,a),r=i.shift();this.activeMessages.slice(0,-1*n).forEach(function(e){e.exiting||(e.exiting=t)}),(i.length||this.activeMessages.length)&&this.queueForcedUpdate(200)}},{key:"isJoin",value:function(e){return e.isControl?e.type===B["default"].JOIN:e.type===L["default"].JOIN}},{key:"addMessage",value:function(e,t,a){var s=this.activeMessages.length&&this.activeMessages[this.activeMessages.length-1];if(this.isJoin(e)&&s&&this.isJoin(s)){var i=s.usernames?[].concat((0,o["default"])(s.usernames),[e.username]):[s.username,e.username];this.activeMessages[this.activeMessages.length-1]=(0,n["default"])({},this.activeMessages[this.activeMessages.length-1],{displayDate:a,collapsed:!0,usernames:i,exiting:void 0})}else e.displayDate=a,this.activeMessages.push(e)}},{key:"renderMessages",value:function(){var e=this;return this.updateActiveMessages(),this.activeMessages.map(function(t){return b["default"].createElement(S["default"],{key:t.uuid,message:t,isLive:e.props.isLive,broadcast:e.props.broadcast,blocked:e.props.blocked,mutedUsers:e.props.chat.mutedUsers,dispatch:e.props.dispatch})})}},{key:"render",value:function(){var e=["Messages"].concat(this.props.classNames).join(" ");return b["default"].createElement("div",{className:e,onMouseEnter:this.messagePauser.mouseEnter,onMouseLeave:this.messagePauser.mouseLeave,onMouseMove:this.messagePauser.mouseMove},b["default"].createElement("ul",null,this.renderMessages()))}}]),t}(b["default"].Component);K.propTypes={broadcast:O.broadcastPropType,chat:N.chatPropType,blocked:b["default"].PropTypes.object,classNames:b["default"].PropTypes.array,dispatch:b["default"].PropTypes.func,isLive:b["default"].PropTypes.bool,replay:A.replayPropType,viewers:b["default"].PropTypes.number,tabHidden:b["default"].PropTypes.bool,dimensions:b["default"].PropTypes.object},t["default"]=(0,T.connect)((0,H.compose)(I["default"],k.replayFullMapper,(0,M["default"])(["dimensions","tabHidden"])))((0,F.purify)(K))},980:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(243),b=a(787),T=a(838),E=s(T),P=a(981),w=s(P),C=a(983),S=s(C),_=a(363),M=a(671),k=a(667),R=s(k),I=a(670),N=s(I),A=a(642),O=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));return a.messageClick=a.messageClick.bind(a),a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"messageClick",value:function(){var e=this.props.message,t=e.usernames?e.usernames[e.usernames.length-1]:e.username;this.props.dispatch((0,b.openProfileModal)({message:e,username:t,params:{}}))}},{key:"getBaseMessageProps",value:function(){var e=this.props,t=e.broadcast,a=e.intl,s=e.messageDidAnimateOut,i=e.animationTime,n=e.isLive,r=e.message,o=e.timelineTimeOffset,l=e.timeOnScreen;return{broadcast:t,intl:a,messageDidAnimateOut:s,animationTime:i,isLive:n,message:r,timelineTimeOffset:o,timeOnScreen:l}}},{key:"renderChat",value:function(e){var t=this.props,a=t.broadcast,s=t.mutedUsers,i=t.blocked;return v["default"].createElement(E["default"],(0,n["default"])({},this.getBaseMessageProps(),{messageClick:this.messageClick,participantColor:(0,_.getParticipantColorName)(e.participant_index),isMuted:(0,M.isMuted)(e,{mutedUsers:s,broadcast:a,blocked:i})}))}},{key:"renderSystem",value:function(){return v["default"].createElement(w["default"],this.getBaseMessageProps())}},{key:"renderJoin",value:function(e){return v["default"].createElement(S["default"],(0,n["default"])({},this.getBaseMessageProps(),{messageClick:this.messageClick,collapsed:e.collapsed,participantColor:(0,_.getParticipantColorName)(e.participant_index)}))}},{key:"renderChatMessage",value:function(e){switch(e.type){case R["default"].USER_CHAT:case R["default"].CHAT:return this.renderChat(e);case R["default"].SYSTEM:case R["default"].SENTENCE:return this.renderSystem();case R["default"].JOIN:return this.renderJoin(e);default:return null}}},{key:"renderControlMessage",value:function(e){switch(e.type){case N["default"].JOIN:return this.renderJoin(e);default:return null}}},{key:"renderMessage",value:function(e){return e.isControl?this.renderControlMessage(e):this.renderChatMessage(e)}},{key:"render",value:function(){var e=this.props.message;if(e.hidden)return null;var t=this.renderMessage(e),a=["MessageElement","enter"];return e.exiting&&a.push("exit"),e.exitNow&&a.push("exit-now"),v["default"].createElement("div",{className:a.join(" ")},t)}}]),t}(v["default"].Component);O.propTypes={blocked:v["default"].PropTypes.object,broadcast:A.broadcastPropType,intl:g.intlShape.isRequired,timelineTimeOffset:v["default"].PropTypes.number,animationTime:v["default"].PropTypes.number,messageDidAnimateOut:v["default"].PropTypes.func,mutedUsers:v["default"].PropTypes.object,dispatch:v["default"].PropTypes.func,message:v["default"].PropTypes.object,timeOnScreen:v["default"].PropTypes.number,isLive:v["default"].PropTypes.bool},t["default"]=(0,g.injectIntl)(O)},981:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(243),b=a(667),T=s(b),E=a(846),P=s(E),w=a(950),C=a(982),S=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));return a.displayDate=a.props.message.displayDate,a.messageClasses=["SystemMessage"],a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"renderSystemMessageType",value:function(){var e=this.props.message;switch(e.systemMessageType){case P["default"].MUTE:return this.renderMute();case P["default"].COMMENT_REPORTED:return this.renderCommentReported();default:return null}}},{key:"renderMute",value:function(){var e=this.props.message,t=e.data?e.data.username:"";return v["default"].createElement("span",{className:"SystemMessage-message"},v["default"].createElement(g.FormattedMessage,(0,n["default"])({},C.userMuted,{values:{username:v["default"].createElement("strong",null,"@",t)}})))}},{key:"renderCommentReported",value:function(){var e=this.props.message,t=e.data?e.data.username:"";return v["default"].createElement("span",{className:"SystemMessage-message"},v["default"].createElement(g.FormattedMessage,(0,n["default"])({},C.commentReported,{values:{username:v["default"].createElement("strong",null,"@",t)}})))}},{key:"renderSentence",value:function(){return v["default"].createElement("span",{className:"SystemMessage-message"},(0,w.getModerationPrompt)(this.props.message,this.props.intl))}},{key:"renderMessage",value:function(){var e=this.props.message;switch(e.type){case T["default"].SYSTEM:return this.renderSystemMessageType();case T["default"].SENTENCE:return this.renderSentence();default:return null}}},{key:"render",value:function(){return v["default"].createElement("li",{key:this.props.message.uuid,className:this.messageClasses.join(" ")},v["default"].createElement("div",{className:"SystemMessage-message"},this.renderMessage()))}}]),t}(v["default"].Component);t["default"]=S,S.propTypes={intl:g.intlShape.isRequired,message:v["default"].PropTypes.object.isRequired}},982:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userMuted=t.commentReported=void 0;var s=a(243),i=(0,s.defineMessages)({commentReported:{id:"system.COMMENT_REPORTED",defaultMessage:"Thank you. You won't see any more messages from {username} in this broadcast."},userMuted:{id:"system.USER_MUTED",
defaultMessage:"You won't see any more messages from {username}"}}),n=i.commentReported,r=i.userMuted;t["default"]={commentReported:n,userMuted:r},t.commentReported=n,t.userMuted=r},983:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(841),v=s(y),g=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.messageClasses=["JoinMessage","Join-participant"+e.participantColor],a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"shouldComponentUpdate",value:function(e){return!!e.collapsed}},{key:"componentWillReceiveProps",value:function(e){e.collapsed&&!this.props.collapsed&&(this.messageClasses=this.messageClasses.filter(function(t){return t!=="Join-participant"+e.participantColor}),this.messageClasses.push("Join-participantDefault"))}},{key:"render",value:function(){var e=this.props.message,t=e.usernames?e.usernames[e.usernames.length-1]:e.username;return t?m["default"].createElement("li",{className:this.messageClasses.join(" "),onClick:this.props.messageClick},m["default"].createElement("div",{className:"JoinMessage-message"},m["default"].createElement("strong",null,"@",t)," ",m["default"].createElement(v["default"],{message:e,withLeadingIcon:!0})," joined")):null}}]),t}(m["default"].Component);t["default"]=g,g.propTypes={collapsed:m["default"].PropTypes.bool.isRequired,messageClick:m["default"].PropTypes.func.isRequired,participantColor:m["default"].PropTypes.string,message:m["default"].PropTypes.object},g.defaultProps={collapsed:!1,message:{}}},984:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(985),g=s(v),b=a(988),T=s(b),E=a(845),P=a(986),w=a(587),C=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){return m["default"].createElement("div",{className:"UsersActivity-container"},m["default"].createElement(g["default"],null),m["default"].createElement(T["default"],this.props))}}]),t}(m["default"].Component);C.propTypes={dispatch:m["default"].PropTypes.func.isRequired,following:m["default"].PropTypes.arrayOf(m["default"].PropTypes.string),roster:m["default"].PropTypes.arrayOf(m["default"].PropTypes.object)},t["default"]=(0,y.connect)((0,w.compose)(E.followingMapper,P.rosterStateToProps))(C)},985:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(668),g=a(845),b=a(986),T=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){var e=this;this.newRosterSub=v.eventManager.subscribe("newRoster",function(t,a){e.props.dispatchRosterReceive(t,a)}),this.newLeaveSub=v.eventManager.subscribe("newLeave",function(t,a){!a.user_id||e.props.following.indexOf(a.user_id)<0||e.props.dispatchRosterRemoveUser(t,a)}),this.newJoinSub=v.eventManager.subscribe("newJoin",function(t,a){!a.user_id||e.props.following.indexOf(a.user_id)<0||e.props.dispatchRosterAddUser(t,a)})}},{key:"componentWillUnmount",value:function(){this.newRosterSub.remove(),this.newLeaveSub.remove(),this.newJoinSub.remove(),this.newRosterSub=null,this.newLeaveSub=null,this.newJoinSub=null}},{key:"render",value:function(){return null}}]),t}(m["default"].Component);T.propTypes={dispatchRosterReceive:m["default"].PropTypes.func.isRequired,dispatchRosterRemoveUser:m["default"].PropTypes.func.isRequired,dispatchRosterAddUser:m["default"].PropTypes.func.isRequired,following:m["default"].PropTypes.arrayOf(m["default"].PropTypes.string)},t["default"]=(0,y.connect)(g.followingMapper,b.rosterDispatchToProps)(T)},986:function(e,t,a){"use strict";function s(e){var t=e.Chat,a=e.Roster,s={},i=t&&t.chatSession&&t.chatSession.room_id;return i&&a&&a.rooms[i]&&(s.roster=a.rooms[i].roster),s}function i(e){return{dispatchRosterReceive:function(t,a){e((0,n.rosterReceive)(t,a))},dispatchRosterRemoveUser:function(t,a){e((0,n.rosterRemoveUser)(t,a))},dispatchRosterAddUser:function(t,a){e((0,n.rosterAddUser)(t,a))}}}Object.defineProperty(t,"__esModule",{value:!0}),t.rosterStateToProps=s,t.rosterDispatchToProps=i;var n=a(987)},988:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(365),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(580),b=s(g),T=a(989),E=s(T),P=a(990),w=s(P),C=a(907),S=s(C),_=a(595),M=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));return a.showOverflow=a.showOverflow.bind(a),a.tooltipRef=null,a.userActivityRef=null,a.overflowIsOpen=!1,a.debouncedTooltipResize=(0,b["default"])(a.debouncedTooltipResize.bind(a),150),a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"shouldComponentUpdate",value:function(e){return this.getUsers()!==this.getUsers(e)}},{key:"componentDidUpdate",value:function(){this.overflowIsOpen&&this.showOverflow()}},{key:"componentWillUnmount",value:function(){this.props.dispatch((0,_.hideTooltip)())}},{key:"showOverflow",value:function(){var e=this,t=this.props.dispatch,a=this.getOverflowUsers();return a.length?(this.addResizeListener(),this.overflowIsOpen=!0,void t((0,_.showTooltip)({component:E["default"],target:this.tooltipRef,position:"top",componentProps:{users:a},onClose:function(){e.overflowIsOpen=!1}}))):(this.overflowIsOpen=!1,void t((0,_.hideTooltip)()))}},{key:"addResizeListener",value:function(){this.removeEventListener(),this.overflowIsOpen&&window.addEventListener("resize",this.debouncedTooltipResize,!1)}},{key:"removeEventListener",value:function(){window.removeEventListener("resize",this.debouncedTooltipResize,!1)}},{key:"debouncedTooltipResize",value:function(){this.overflowIsOpen&&this.showOverflow()}},{key:"userHasRequiredInformation",value:function(e){return e&&e.username&&e.display_name&&e.participant_index}},{key:"getUsers",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,a=t.following,s=t.roster;return a&&s?s.filter(function(t){return e.userHasRequiredInformation(t)&&a.indexOf(t.user_id)>=0}):[]}},{key:"getOverflowUsers",value:function(){var e=this.getUsers(),t=e.length-Math.floor(this.userActivityRef.clientWidth/34);return t<1?[]:[e[0]].concat((0,n["default"])(e.slice(t*-1).reverse()))}},{key:"render",value:function(){var e=this,t=this.getUsers().map(function(e){return v["default"].createElement(w["default"],{user:e})});return t.length?v["default"].createElement("div",{className:"UsersActivity",ref:function(t){e.userActivityRef=t}},v["default"].createElement("div",{onClick:this.showOverflow,ref:function(t){e.tooltipRef=t},className:"UsersActivity-overflowContainer"},v["default"].createElement("div",{className:"UsersActivity-overflowClickHandler"}),v["default"].createElement("div",{className:"UsersActivity-overflow"},v["default"].createElement(S["default"],{isVertical:!1}))),t):null}}]),t}(v["default"].Component);M.defaultProps={roster:[],following:[]},M.propTypes={dispatch:v["default"].PropTypes.func.isRequired,following:v["default"].PropTypes.arrayOf(v["default"].PropTypes.string),roster:v["default"].PropTypes.arrayOf(v["default"].PropTypes.object)},t["default"]=M},989:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(990),g=s(v),b=a(993),T=s(b),E=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"renderUserListItems",value:function(){return this.props.users.map(function(e){return m["default"].createElement(b.ListViewItem,{key:e.user_id,height:38},m["default"].createElement("div",{className:"UserList-item"},m["default"].createElement(g["default"],{user:e,withDisplayName:!0})))})}},{key:"render",value:function(){var e=["UserList","UserList--"+this.props.users.length+"items"];return m["default"].createElement("div",{className:e.join(" ")},m["default"].createElement(T["default"],{aveCellHeight:38,runwayItems:3,runwayItemsOpposite:3},this.renderUserListItems()))}}]),t}(m["default"].Component);E.defaultProps={users:[]},E.propTypes={dispatch:m["default"].PropTypes.func.isRequired,users:m["default"].PropTypes.array},t["default"]=(0,y.connect)()(E)},990:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(991),g=s(v),b=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){var e=this.props,t=e.dispatch,a=e.user,s=e.withDisplayName;return m["default"].createElement(g["default"],{dispatch:t,user:a,withDisplayName:s})}}]),t}(m["default"].Component);b.propTypes={dispatch:m["default"].PropTypes.func.isRequired,user:m["default"].PropTypes.object.isRequired,withDisplayName:m["default"].PropTypes.bool},t["default"]=(0,y.connect)()(b)},991:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(668),v=a(992),g=s(v),b=a(844),T=a(549),E=a(363),P=3e3,w=200,C=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.handleClick=a.handleClick.bind(a),a.onNewHeart=a.onNewHeart.bind(a),a.isMyHeart=a.isMyHeart.bind(a),a.state={showHeart:!1,isBeating:!1},a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.heartsSub=y.eventManager.subscribe("newHearts",this.onNewHeart,this.isMyHeart)}},{key:"isMyHeart",value:function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0;t<e.length;t++){var a=e[t];if(a.user_id===this.props.user.user_id)return!0}return!1}},{key:"onNewHeart",value:function(){var e=this;this.setState({showHeart:!0,isBeating:!0}),clearTimeout(this.beatTimer),this.beatTimer=setTimeout(function(){return e.setState({isBeating:!1})},w),clearTimeout(this.showHeartTimer),this.showHeartTimer=setTimeout(function(){return e.setState({showHeart:!1})},P)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.beatTimer),clearTimeout(this.showHeartTimer),this.heartsSub.remove(),this.heartsSub=null}},{key:"shouldComponentUpdate",value:function(e,t){return this.props.user!==e.user||this.state.showHeart!==t.showHeart||this.state.isBeating!==t.isBeating}},{key:"handleClick",value:function(){var e=this.props,t=e.dispatch,a=e.user;t((0,b.commentInputSetReply)(a.username))}},{key:"hasUserInformation",value:function(){var e=this.props.user;return e&&e.username&&e.display_name&&e.participant_index}},{key:"render",value:function(){if(!this.hasUserInformation())return null;var e=this.props,t=e.user,a=e.withDisplayName,s=this.state,i=s.showHeart,n=s.isBeating,r=["UsersActivityItem","UsersActivityItem--participant"+(0,E.getParticipantColorName)(t.participant_index)];i&&(r.push("UsersActivityItem--withHeart"),n&&r.push("UsersActivityItem--withBeat"));var o=t.profile_image_url||"https://abs.twimg.com/sticky/default_profile_images/default_profile_0_400x400.png";return m["default"].createElement("div",{className:r.join(" "),onClick:this.handleClick,title:"@"+t.username+" – "+t.display_name},m["default"].createElement("div",{className:"UsersActivityItem-avatarContainer"},m["default"].createElement(g["default"],null),m["default"].createElement("img",{className:"UsersActivityItem-avatar",src:o})),a?m["default"].createElement("div",{className:"UsersActivityItem-displayName"},t.display_name):null)}}]),t}(m["default"].Component);C.propTypes={dispatch:m["default"].PropTypes.func.isRequired,user:T.userPropType,showHeart:m["default"].PropTypes.bool,withDisplayName:m["default"].PropTypes.bool},t["default"]=C},992:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return n["default"].createElement("div",{className:"HeartIcon"},n["default"].createElement("svg",{viewBox:"0 0 59 51"},n["default"].createElement("path",{className:"shape",d:"M29.49943,7.65161487 C25.9971398,3.36065766 21.3354001,1.00688573 16.3190991,1.00688573 C8.89269356,1.00688573 1,6.61990304 1,17.0265358 C1,27.7304026 10.4295058,35.2014193 17.3143789,40.6549172 C19.9228554,42.7252266 21.8347501,44.191887 23.3909435,45.3865611 C25.850071,47.2709558 27.083625,48.216596 28.4140848,49.5478371 C28.7025222,49.839333 29.0890053,50 29.49943,50 C29.9087145,50 30.2940576,49.8404806 30.5847751,49.5489847 C32.3439006,47.7885332 33.9411365,46.569759 38.2209533,43.3036279 L41.6628198,40.6721315 C47.3722823,36.3042837 58,28.1733845 58,16.919807 C58,6.57858866 50.116427,1 42.6991419,1 C37.6760006,1 33.0051403,3.35721479 29.49943,7.65161487 Z"}),n["default"].createElement("path",{fill:"#ffffff",className:"border",d:"M28.8489053,5.43563138 C25.3562996,1.92109055 20.983681, 0.00688572968 16.3190991,0.00688572968 C7.42056774,0.00688572968 0,6.9226236 0,17.0265358 C0,22.1855834 2.04040306,26.8994736 5.8050462,31.4472774 C8.51671937,34.7230613 11.1601088, 37.0558326 16.6934678,41.4387983 C18.8340729,43.1377656 20.2000846,44.1976641 22.7820008, 46.1797754 C25.8185185,48.5066165 26.5846544,49.1319613 27.7067705,50.2547363 C28.1795143, 50.7325106 28.8219412,51 29.49943,51 C30.174979,51 30.8149096,50.7343422 31.2928267, 50.2551454 C31.3897022,50.1581975 31.4862687,50.0627605 31.5823952,49.9689814 C31.8413936, 49.7163076 32.0991169,49.4737977 32.3655459,49.2321313 C33.5909252, 48.1206415 34.6153918, 47.3131352 38.8276213,44.0985832 L42.2701943,41.4665472 C47.2216019,37.6786259 49.9293458, 35.342457 52.7360007,32.0238757 C56.7562017,27.2704007 59,22.282734 59,16.919807 C59, 6.87456591 51.5862887,0 42.6991419,0 C37.7334993,0 33.0959278,2.16670511 29.499546, 6.12003291 C29.4876099,6.1038208 29.3420814,5.93190494 28.8489053,5.43563138 Z M28.7247217,8.28393371 L29.4993625,9.2330129 L30.2740843, 8.28399976 C33.5968976,4.21364357 37.9880426,2 42.6991419,2 C50.5140427,2 57,8.01428071 57,16.919807 C57,21.7505742 54.9485974,26.3105708 51.208916,30.7323601 C48.5231058, 33.908055 45.8965364,36.1741887 41.0552127,39.8778937 L37.6135788,42.5092122 C33.3470424, 45.7652079 32.307475,46.584617 31.0218502,47.7507529 C30.7374152,48.0087518 30.4620483, 48.2678638 30.1857688,48.5373967 C30.0835118,48.6371567 29.9809075,48.7385608 29.877402, 48.8421444 C29.7739718,48.9458508 29.6435344,49 29.49943,49 C29.3554589,49 29.2251022, 48.945723 29.124911,48.8444694 C27.9147064,47.6335365 27.1074652,46.9746403 23.9991846, 44.5928088 C21.4258429,42.6172797 20.0670532,41.5629847 17.9360533,39.8716415 C12.5104884,35.5740588 9.93892334,33.304672 7.34567784,30.1719523 C3.85559722,25.9558284 2,21.6688903 2,17.0265358 C2,8.05990959 8.49487798,2.00688573 16.3190991,2.00688573 C21.0231751,2.00688573 25.4052305,4.21693921 28.7247217,8.28393371 L28.7247217, 8.28393371 Z"})))};var i=a(1),n=s(i)},994:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.VideoClass=void 0;var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(383),m=s(f),y=a(1),v=s(y),g=a(225),b=a(580),T=s(b),E=a(921),P=a(995),w=a(602),C=a(866),S=a(699),_=a(265),M=a(603),k=s(M),R=a(694),I=s(R),N=a(997),A=a(387),O=s(A),D=a(998),L=s(D),U=a(695),B=s(U),F=a(601),H=a(914),q=a(665),j=a(996),x=a(647),V=a(934),W=a(363),Y=s(W),G=a(517),z=s(G),K=a(587),Q=1e3,X=5e3,J=(0,m["default"])(O["default"]).map(function(e){return O["default"][e]}),Z=5,$=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.doCapture=function(){},a.propsHaveChanged=Y["default"].propsHaveChanged(),a.handleNTP=a.handleNTP.bind(a),a.handleOrientation=a.handleOrientation.bind(a),a.handleDimensions=a.handleDimensions.bind(a),a.handleSetupCapture=a.handleSetupCapture.bind(a),a.handleInitialized=a.handleInitialized.bind(a),a.handleCanPlay=a.handleCanPlay.bind(a),a.handlePlaying=a.handlePlaying.bind(a),a.handlePlay=a.handlePlay.bind(a),a.handlePause=a.handlePause.bind(a),a.handleSeeking=a.handleSeeking.bind(a),a.handleSeeked=(0,T["default"])(a.handleSeeked.bind(a),1e3),a.handlePlayerStalled=a.handlePlayerStalled.bind(a),a.handleTimeUpdate=a.handleTimeUpdate.bind(a),a.handleEnded=a.handleEnded.bind(a),a.handleError=a.handleError.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentWillReceiveProps",value:function(e){this.controlSeeking(e),this.controlPlayback(e)}},{key:"shouldComponentUpdate",value:function(e){return this.mutedChanged(e)||this.orientationChanged(e)||this.windowDimensionsChanged(e)||this.videoDimensionsChanged(e)||this.playerModeChanged(e)||this.playerStateChanged(e)||this.srcChanged(e)}},{key:"mutedChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.muted!==e.player.muted}},{key:"orientationChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.orientation!==e.player.orientation}},{key:"playerModeChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.playerMode!==e.player.playerMode}},{key:"playerStateChanged",value:function(e){return!(!this.props||!this.props.player)&&this.props.player.playerState!==e.player.playerState}},{key:"isReplayMode",value:function(){return!(!this.props||!this.props.player)&&this.props.player.isReplayMode}},{key:"windowDimensionsChanged",value:function(e){return this.propsHaveChanged(["windowWidth","windowHeight"],e)}},{key:"videoDimensionsChanged",value:function(e){return this.propsHaveChanged(["playerWidth","playerHeight"],e)}},{key:"srcChanged",value:function(e){return this.propsHaveChanged("url",e)}},{key:"componentWillUnmount",value:function(){this.stalledTimer&&clearTimeout(this.stalledTimer),this.props.dispatch((0,j.clearCapture)(this.props.broadcastId))}},{key:"handleNTP",value:function(e){var t=e.ntp;this.props.dispatch((0,q.currentNtp)(t))}},{key:"handleOrientation",value:function(e){var t=e.orientation;this.props.dispatch((0,F.playerCurrentOrientation)(t))}},{key:"handleDimensions",value:function(e){var t=e.width,a=e.height;this.props.dispatch((0,F.playerCurrentDimensions)(t,a))}},{key:"handleInitialized",value:function(){z["default"].hasInlineAutoplayVideo()&&this.props.dispatch((0,F.playerState)(k["default"].CONNECTING)),this.doCapture()}},{key:"handleCanPlay",value:function(){this.props.dispatch((0,F.playerStarted)(!0))}},{key:"handlePlay",value:function(){this.props.onPlay();var e=this.props,t=e.dispatch,a=e.player;t((0,q.chatResume)()),z["default"].hasInlineVideo()||a.isPlaying||t((0,F.playerState)(k["default"].PLAYING))}},{key:"handlePlaying",value:function(){this.props.onPlaying();var e=this.props,t=e.dispatch,a=e.player;a.isPlaying||(this.isReplayMode()&&t((0,H.replaySeekReset)()),this.props.dispatch((0,F.playerState)(k["default"].PLAYING)))}},{key:"handlePause",value:function(){var e=this.props,t=e.dispatch,a=e.player;t((0,q.chatPause)()),z["default"].hasInlineVideo()||a.isPaused||t((0,F.playerState)(k["default"].PAUSED))}},{key:"handleSeeking",value:function(){this.isReplayMode()&&this.handlePlayerStalled()}},{key:"handleSeeked",value:function(){this.props.onSeeked();var e=this.props,t=e.dispatch,a=e.player;a.isStopped||(t((0,F.playerState)(k["default"].PLAYING)),this.isReplayMode()&&t((0,H.replaySeekReset)()),a.isPaused||this.doCapture())}},{key:"handlePlayerStalled",value:function(){var e=this.props,t=e.dispatch,a=e.player;a.isStopped||a.isStalled||(t((0,F.playerState)(k["default"].STALLED)),t((0,q.chatPause)()),this.startStalledTimer())}},{key:"startStalledTimer",value:function(){var e=this;this.stalledTimer&&clearTimeout(this.stalledTimer),this.props.disableStallingRecovery||this.props.player.isStalled&&(this.stalledTimer=setTimeout(function(){e.props&&e.props.player&&e.props.player.isStalled&&(e.props.dispatch((0,x.broadcastForceRequest)()),e.startStalledTimer())},X))}},{key:"handleTimeUpdate",value:function(e){var t=this.props.dispatch,a=e.currentTime,s=e.duration,i=e.currentMonotonicTime,n=0===this.props.replay.elapsed||a-this.props.replay.elapsed>.5;this.props.player.isPlayback&&n&&t((0,H.replayPlaybackTime)(a,s));var r=this.props,o=r.Stills,l=void 0===o?{}:o,u=r.broadcastId,d=l[u]&&l[u].videoTime;Math.abs(i-d)>Z&&this.doCapture()}},{key:"handleSetupCapture",value:function(e){var t=this;if(!this.props.disableCapture){var a=e.videoUtils,s=e.getCurrentMonotonicTime,i=a.onceVideoReady,n=a.captureFrame;this.doCapture=Y["default"].throttle(function(){return i(function(){var e=t.props,a=e.dispatch,i=e.broadcastId;a((0,j.doCapture)(i,s(),n()))})},Q)}}},{key:"handleEnded",value:function(){this.props.onEnded(),this.props.dispatch((0,F.playerRequestedTimecode)()),(0,V.resetVideoState)(this.props.dispatch)}},{key:"handleError",value:function(){this.props.dispatch((0,F.playerState)(k["default"].UNAVAILABLE))}},{key:"controlSeeking",value:function(e){if(this.videoRef&&e.replay){var t=e.replay.requestedPosition;t&&0!==t&&e.player.isReplayMode&&this.videoRef.setTime(t)}}},{key:"controlPlayback",value:function(e){if(e.player){var t=e.player.playerState;if(this.props.player.playerState!==t)switch(t){case k["default"].PAUSED:this.videoRef&&this.videoRef.pause(),e.dispatch((0,q.chatPause)());break;case k["default"].STALLED:e.dispatch((0,q.chatPause)());break;case k["default"].PLAYING:this.videoRef&&this.videoRef.play(),e.dispatch((0,q.chatResume)())}}}},{key:"render",value:function(){var e=this,t=this.props.player,a=t&&t.playerState===k["default"].PAUSED,s=t&&t.muted,i=t&&t.orientation||0,n=t&&t.isReplayMode,r=t&&t.requestedTimecode;return v["default"].createElement(B["default"],{ref:function(t){e.videoRef=t},url:this.props.url,playerWidth:this.props.playerWidth,playerHeight:this.props.playerHeight,windowWidth:this.props.windowWidth,windowHeight:this.props.windowHeight,id:N.VIDEO_PLAYER_IDENTIFIER,isReplay:n,autoplay:!0,muted:s,paused:a,orientation:i,fillMode:this.props.fillMode,requestedTimecode:r,is360:this.props.is360,touchEnabled:this.props.is360,keyboardEnabled:this.props.is360,onNTP:this.handleNTP,onOrientation:this.handleOrientation,onDimensions:this.handleDimensions,onSetupCapture:this.handleSetupCapture,onInitialized:this.handleInitialized,onCanPlay:this.handleCanPlay,onPlaying:this.handlePlaying,onPlay:this.handlePlay,onPause:this.handlePause,onSeeking:this.handleSeeking,onSeeked:this.handleSeeked,onStalled:this.handlePlayerStalled,onTimeUpdate:this.handleTimeUpdate,onEnded:this.handleEnded,onError:this.handleError})}}]),t}(v["default"].Component);$.defaultProps={disableStallingRecovery:!1,fillMode:I["default"].CONTAIN,onPlay:function(){},onPlaying:function(){},onSeeked:function(){},onEnded:function(){}},$.propTypes={disableCapture:v["default"].PropTypes.bool,disableStallingRecovery:v["default"].PropTypes.bool.isRequired,dispatch:v["default"].PropTypes.func,fillMode:v["default"].PropTypes.oneOf(R.fillModeValues),onPlay:v["default"].PropTypes.func,onPlaying:v["default"].PropTypes.func,onSeeked:v["default"].PropTypes.func,onEnded:v["default"].PropTypes.func,player:w.playerPropType.isRequired,playerHeight:v["default"].PropTypes.number.isRequired,playerFormat:v["default"].PropTypes.oneOf(J),playerWidth:v["default"].PropTypes.number.isRequired,replay:C.replayPropType,url:v["default"].PropTypes.string.isRequired,is360:v["default"].PropTypes.bool,video:S.videoPropType.isRequired,windowHeight:v["default"].PropTypes.number.isRequired,windowWidth:v["default"].PropTypes.number.isRequired,Stills:v["default"].PropTypes.object,broadcastId:v["default"].PropTypes.string.isRequired,api:_.wrappedApiShape.isRequired};t.VideoClass=$;t["default"]=(0,g.connect)((0,K.compose)(E.replayFullMapper,P.stillsStateMapper))((0,L["default"])($))},995:function(e,t,a){"use strict";function s(e){var t={};return e.Stills&&(t.Stills=e.Stills),t}function i(e){var t=function(t,a,s){e((0,n.doCapture)(t,a,s))},a=function(t){e((0,n.clearCapture)(t))};return{dispatchDoCapture:t,dispatchClearCapture:a,dispatch:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.stillsStateMapper=s,t.stillsDispatchMapper=i;var n=a(996)},997:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VIDEO_PLAYER_IDENTIFIER="PeriscopeVideo"},998:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=function(t){function a(e){(0,d["default"])(this,a);var t=(0,f["default"])(this,(a.__proto__||(0,l["default"])(a)).call(this,e));return t.onPlay=t.onPlay.bind(t),t.onPlaying=t.onPlaying.bind(t),t.onSeeked=t.onSeeked.bind(t),t.onEnded=t.onEnded.bind(t),t}return(0,y["default"])(a,t),(0,p["default"])(a,[{key:"handleStartWatching",value:function(){this.props.isVideoPreview?this.videoLifeCycle.startWatchingPreview():this.videoLifeCycle.startWatching()}},{key:"handleStopWatching",value:function(){this.videoLifeCycle.stopWatching()}},{key:"getVideoRef",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;if(!e)return null;var t=e.videoRef||e.getWrappedInstance&&e.getWrappedInstance();return t?t.videoRoot?t:this.getVideoRef(t):null}},{key:"isVideoState",value:function(e){var t=this.getVideoRef();return!!t&&t.getPlayerState()===e}},{key:"onPlay",value:function(){this.props.onPlay(),this.props.isVideoReady&&!this.isVideoState(C["default"].PLAYING)&&this.handleStartWatching()}},{key:"onPlaying",value:function(){this.props.onPlaying(),this.props.isVideoReady&&!this.isVideoState(C["default"].PLAYING)&&this.handleStartWatching()}},{key:"onSeeked",value:function(){this.props.onSeeked(),this.props.isVideoReady&&!this.isVideoState(C["default"].STOPPED)&&this.handleStartWatching()}},{key:"onEnded",value:function(){this.props.onEnded(),this.handleStopWatching()}},{key:"lifeCycleTokenPresent",value:function(e){var t=e.video;return t&&t.life_cycle_token}},{key:"lifeCycleTokenHasChanged",value:function(e){var t=e.video;return!(!this.props.video||!t)&&this.props.video.life_cycle_token!==t.life_cycle_token}},{key:"replayStateHasChanged",value:function(e){var t=e.isReplay;if(this.props.isReplay!==t)return!0}},{key:"lifeCycleHasChanged",value:function(e){var t=e.video,a=e.isReplay;return!!this.lifeCycleTokenHasChanged({video:t})||!!this.replayStateHasChanged({isReplay:a})}},{key:"updateVideoLifeCycle",value:function(e){var t=e.video,a=e.isReplay;this.videoLifeCycle.update({lifeCycleToken:t.life_cycle_token,isReplay:a})}},{key:"componentWillMount",value:function(){this.videoLifeCycle=new _["default"](this.props.api)}},{key:"componentDidMount",value:function(){this.lifeCycleTokenPresent(this.props)&&this.updateVideoLifeCycle(this.props)}},{key:"componentWillReceiveProps",value:function(e){this.lifeCycleHasChanged(e)&&this.updateVideoLifeCycle(e)}},{key:"componentDidUpdate",value:function(e){this.lifeCycleHasChanged(e)&&this.updateVideoLifeCycle(this.props),!e.isVideoReady&&this.props.isVideoReady&&this.isVideoState(C["default"].PLAYING)&&this.handleStartWatching()}},{key:"componentWillUnmount",value:function(){this.videoLifeCycle.destroy(),this.videoLifeCycle=null}},{key:"render",value:function(){var t=this;return g["default"].createElement(e,(0,r["default"])({},this.props,{ref:function(e){t.videoRef=e},onPlay:this.onPlay,onPlaying:this.onPlaying,onSeeked:this.onSeeked,onEnded:this.onEnded}))}}]),a}(g["default"].Component);return(0,T["default"])(t,e),t.displayName="WithWatchingLifecycle("+(0,M.getDisplayName)(e)+")",t.WrappedComponent=e,t.defaultProps={isReplay:!1,isVideoPreview:!1,isVideoReady:!0,onPlay:function(){},onPlaying:function(){},onSeeked:function(){},onEnded:function(){}},t.propTypes={api:E.wrappedApiShape.isRequired,video:P.videoPropType.isRequired,isReplay:g["default"].PropTypes.bool.isRequired,isVideoPreview:g["default"].PropTypes.bool.isRequired,isVideoReady:g["default"].PropTypes.bool.isRequired,onPlay:g["default"].PropTypes.func,onPlaying:g["default"].PropTypes.func,onSeeked:g["default"].PropTypes.func,onEnded:g["default"].PropTypes.func},(0,E.injectApi)(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(354),r=s(n),o=a(267),l=s(o),u=a(293),d=s(u),c=a(341),p=s(c),h=a(294),f=s(h),m=a(345),y=s(m),v=a(1),g=s(v),b=a(205),T=s(b),E=a(265),P=a(699),w=a(603),C=s(w),S=a(999),_=s(S),M=a(359);t["default"]=i},999:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(361),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(699),c=3e4,p=2e3,h=function(){function e(t){(0,o["default"])(this,e),this.wrappedApi=t,this.possiblyNeedStopWatching=this.possiblyNeedStopWatching.bind(this),this.handleStartWatching=this.handleStartWatching.bind(this),this.updateSession=this.updateSession.bind(this),window&&window.addEventListener&&navigator&&navigator.sendBeacon&&window.addEventListener("unload",this.possiblyNeedStopWatching,!1)}return(0,u["default"])(e,[{key:"possiblyNeedStopWatching",value:function(){if(this.isWatching){var e=this.wrappedApi.apiService,t=e.host,a=e.store,s=a.getState(),i=this.isReplay?"videoStopWatchingReplay":"videoStopWatchingLive",r=this.wrappedApi.apiService.getEndpoint(i),o=r.path,l={session:this.session};this.isReplay&&(l.n_hearts=s.Chat.replayHearts),navigator.sendBeacon(t+o,(0,n["default"])(l))}}},{key:"updateLifeCycleToken",value:function(e){this.lifeCycleToken=e,this.isWatching&&(this.stopWatching(),this.handleStartWatching())}},{key:"updateSession",value:function(e){this.session=e}},{key:"updateIsReplay",value:function(e){this.isReplay=e}},{key:"updateWatchTimeDelay",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p;this.watchTimeDelay=e}},{key:"setStartWatchingTimer",value:function(){this.startWatchingTimer=setTimeout(this.handleStartWatching,this.watchTimeDelay)}},{key:"clearStartWatchingTimer",value:function(){this.startWatchingTimer&&clearTimeout(this.startWatchingTimer)}},{key:"handleStartWatching",value:function(){if(!this.isWatching){this.stopPingWatching();var e=(0,d.videoStartWatching)(this.wrappedApi,this.lifeCycleToken,this.isReplay,this.isVideoPreview).then(this.updateSession);return this.startPingWatching(),this.isWatching=!0,e}}},{key:"startPingWatching",value:function(){var e=this;this.stopPingWatching(),this.pingWatchingTimer=setInterval(function(){e.isWatching?(0,d.videoPingWatching)(e.wrappedApi,e.session,e.isReplay):e.stopPingWatching()},c)}},{key:"stopPingWatching",value:function(){clearInterval(this.pingWatchingTimer)}},{key:"startWatching",value:function(){return this.isVideoPreview=!1,this.handleStartWatching()}},{key:"startWatchingPreview",value:function(){this.isVideoPreview=!0,this.clearStartWatchingTimer(),this.setStartWatchingTimer()}},{key:"update",value:function(e){var t=e.lifeCycleToken,a=e.isReplay,s=e.watchTimeDelay;"undefined"!=typeof t&&t!==this.lifeCycleToken&&this.updateLifeCycleToken(t),
"undefined"!=typeof a&&a!==this.isReplay&&this.updateIsReplay(a),this.updateWatchTimeDelay(s)}},{key:"stopWatching",value:function(){this.isWatching&&(this.stopPingWatching(),(0,d.videoStopWatching)(this.wrappedApi,this.session,this.isReplay),this.isWatching=!1)}},{key:"destroy",value:function(){this.stopWatching(),this.clearStartWatchingTimer(),this.isVideoPreview=void 0,this.lifeCycleToken=void 0,this.session=void 0,this.isReplay=void 0,this.isWatching=void 0,this.pingWatchingTimer=void 0,window.removeEventListener("unload",this.possiblyNeedStopWatching,!1)}}]),e}();t["default"]=h},1e3:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.PlaybackBackgroundClass=void 0;var i=a(365),n=s(i),r=a(529),o=s(r),l=a(267),u=s(l),d=a(293),c=s(d),p=a(341),h=s(p),f=a(294),m=s(f),y=a(345),v=s(y),g=a(1),b=s(g),T=a(225),E=a(1001),P=s(E),w=a(995),C=40,S=4500,_=100,M=1,k=["u-fullHeight","PlaybackBackground"],R=function(e){function t(){return(0,c["default"])(this,t),(0,m["default"])(this,(t.__proto__||(0,u["default"])(t)).apply(this,arguments))}return(0,v["default"])(t,e),(0,h["default"])(t,[{key:"render",value:function(){var e=this.props,t=e.className,a=e.canvasClass,s=e.Stills;s=void 0===s?{}:s;var i=s[e.broadcastId];i=void 0===i?{}:i;var r=i.imageData,l=new o["default"](t.split(" ").concat(k));return r?b["default"].createElement(P["default"],{containerClassName:[].concat((0,n["default"])(l)).join(" "),canvasClass:a,blurRadius:C,image:r,fadeDuration:S,fadeResolution:_,maxLayers:M}):null}}]),t}(b["default"].Component);R.propTypes={broadcastId:b["default"].PropTypes.string.isRequired,Stills:b["default"].PropTypes.object.isRequired,canvasClass:b["default"].PropTypes.string,className:b["default"].PropTypes.string},R.defaultProps={className:""};t.PlaybackBackgroundClass=R;t["default"]=(0,T.connect)(w.stillsStateMapper)(R)},1001:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){return e&&"ImageData"===e.constructor.name}function n(e,t){return e.data!==t.data}function r(e){var t=e.image&&["String","ImageData"].indexOf(e.image.constructor.name)!==-1;if(!t)return new Error("image prop must be a String or ImageData")}Object.defineProperty(t,"__esModule",{value:!0});var o=a(383),l=s(o),u=a(354),d=s(u),c=a(267),p=s(c),h=a(293),f=s(h),m=a(341),y=s(m),v=a(294),g=s(v),b=a(345),T=s(b),E=a(1),P=s(E),w=a(1002),C=s(w),S=function(e){function t(){return(0,f["default"])(this,t),(0,g["default"])(this,(t.__proto__||(0,p["default"])(t)).apply(this,arguments))}return(0,T["default"])(t,e),(0,y["default"])(t,[{key:"doFading",value:function(){if(!this._unmounted){var e=this.state,t=this.props,a=this.lastFade&&Date.now()-this.lastFade||t.fadeResolution,s=a/t.fadeDuration,i=(0,d["default"])({},e.animateLayer);i.opacity<1?(i.opacity+=s,this.lastFade=Date.now(),this.currentFading=setTimeout(this.doFading.bind(this),t.fadeResolution)):(i.opacity=1,delete this.lastFade),this.setState({animateLayer:i})}}},{key:"layerLoadCheckpoint",value:function(e){return function(){var t=this.state,a=this.props,s=t.loadedLayers,i=t.staticLayers;s[e]=!0,(0,l["default"])(s).every(function(e){return s[e]})&&(s={},i.length>a.maxLayers&&(i=i.slice(0,a.maxLayers)),this.setState({staticLayers:i,loadedLayers:s,animateLayer:{image:this.nextImage,opacity:0,key:Date.now()}}))}.bind(this)}},{key:"componentWillMount",value:function(){var e=this.props;this.setState({animateLayer:{image:e.image,opacity:1,key:Date.now()},staticLayers:[],loadedLayers:{}})}},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this.state,a=e.image,s=i(t.animateLayer.image)&&i(a),r=s&&n(a,t.animateLayer.image),o=!s&&a!==t.animateLayer.image;if(r||o){var l=t.staticLayers,u=t.loadedLayers,c=Date.now();clearTimeout(this.currentFading),l.unshift((0,d["default"])({},t.animateLayer,{key:c})),u[c]=!1,this.nextImage=a,this.setState({staticLayers:l,loadedLayers:u})}}},{key:"render",value:function(){var e=this,t=this.state,a=this.props,s={zIndex:a.maxLayers+1,opacity:t.animateLayer.opacity||0};return P["default"].createElement("div",{className:a.containerClassName,style:a.containerStyle},P["default"].createElement(C["default"],{className:a.className,img:t.animateLayer.image,onLoadFunction:this.doFading.bind(this),blurRadius:a.blurRadius,canvasStyle:s,canvasClass:a.canvasClass}),t.staticLayers.map(function(t,s){var i={zIndex:a.maxLayers-s,opacity:t.opacity};return P["default"].createElement(C["default"],{key:t.key,className:a.className,img:t.image,onLoadFunction:e.layerLoadCheckpoint(t.key),blurRadius:a.blurRadius,canvasStyle:i,canvasClass:a.canvasClass})}))}}],[{key:"defaultProps",get:function(){return{fadeDuration:5e3,fadeResolution:100,maxLayers:3}}},{key:"propTypes",get:function(){return{image:r,fadeDuration:P["default"].PropTypes.number,fadeResolution:P["default"].PropTypes.number,maxLayers:P["default"].PropTypes.number,canvasClass:P["default"].PropTypes.string}}}]),t}(P["default"].Component);t["default"]=S},1002:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){var t=document.createElement("a");return t.href=e,t.href}function n(e){return e&&"ImageData"===e.constructor.name}function r(e){var t=e.img&&["String","ImageData"].indexOf(e.img.constructor.name)!==-1;if(!t)return new Error("img must be either a String (url) or an ImageData type.")}Object.defineProperty(t,"__esModule",{value:!0});var o=a(497),l=s(o),u=a(267),d=s(u),c=a(293),p=s(c),h=a(341),f=s(h),m=a(294),y=s(m),v=a(345),g=s(v),b=a(1),T=s(b),E=a(30),P=s(E),w=a(225),C=a(582),S=s(C),_=a(1003),M=a(1004),k=function(e){function t(e){(0,p["default"])(this,t);var a=(0,y["default"])(this,(t.__proto__||(0,d["default"])(t)).call(this,e));return a.state={width:0,height:0},a.hasDirty=!1,a.imageChanged=!1,a.sidebarTimeout=null,a}return(0,g["default"])(t,e),(0,f["default"])(t,[{key:"componentDidMount",value:function(){this.syncDimensions()}},{key:"componentWillUnmount",value:function(){this._unmounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;this.props.dimensions&&e.dimensions&&(this.props.dimensions.width!==e.dimensions.width||this.props.dimensions.height!==e.dimensions.height)&&this.syncDimensions(),this.props.broadcastSidebar&&this.props.broadcastSidebar.visible&&!e.broadcastSidebar.visible&&(clearTimeout(this.sidebarTimeout),this.sidebarTimeout=setTimeout(function(){t.syncDimensions()},300))}},{key:"componentWillUpdate",value:function(e,t){var a=this,s=["img","blurRadius"],i=["width","height"];this.hasDirty=s.some(function(t){return a.props[t]!==e[t]})||i.some(function(e){return a.state[e]!==t[e]}),this.imageChanged=this.props.img!==e.img}},{key:"componentDidUpdate",value:function(){var e=this;this.hasDirty&&!function(){e.hasDirty=!1;var t=e.state,a=e.props,s=n(a.img),r=s?a.img:i(a.img),o=s?l["default"].resolve():e.loadImage(r);o.then(function(i){var n=P["default"].findDOMNode(e.refs.canvas);n.height=t.height,n.width=t.width,s?(0,M.microBlur)(a.img,n,a.blurRadius):(0,_.stackBlurImage)(e.img,n,a.blurRadius,t.width,t.height),e.imageChanged&&a.onLoadFunction(i)})}()}},{key:"loadImage",value:function(e){var t=this;return new l["default"](function(a){return t.img&&t.img.src===e?a():(t.img||(t.img=new Image),t.img.crossOrigin="Anonymous",t.img.src=e,t.img.onload=function(e){a(e)},void(t.img.onerror=function(e){t.img.src="",a(e)}))})}},{key:"syncDimensions",value:function(){if(!this._unmounted){var e=P["default"].findDOMNode(this);this.setState({height:e.offsetHeight,width:e.offsetWidth})}}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.canvasClass,s=e.children,i=e.canvasStyle,n="react-blur"+(t?" "+t:""),r="react-blur-canvas"+(a?" "+a:"");return T["default"].createElement("div",{className:n},T["default"].createElement("canvas",{className:r,style:i,ref:"canvas"}),s)}}]),t}(T["default"].Component);k.defaultProps={blurRadius:0,onLoadFunction:function(){}},k.propTypes={dimensions:T["default"].PropTypes.object,broadcastSidebar:T["default"].PropTypes.object,img:r,blurRadius:T["default"].PropTypes.number,className:T["default"].PropTypes.string,canvasStyle:T["default"].PropTypes.object,canvasClass:T["default"].PropTypes.string,children:T["default"].PropTypes.any,onLoadFunction:T["default"].PropTypes.func},t["default"]=(0,w.connect)((0,S["default"])(["dimensions","broadcastSidebar"]))(k)},1003:function(e,t){"use strict";function a(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function s(e,t,s,i,o,l){if(!(isNaN(l)||l<1)){l|=0;for(var u=e.getContext("2d"),d=u.getImageData(t,s,i,o),c=d.data,p=void 0,h=void 0,f=void 0,m=void 0,y=void 0,v=void 0,g=void 0,b=void 0,T=void 0,E=void 0,P=void 0,w=void 0,C=void 0,S=void 0,_=void 0,M=void 0,k=void 0,R=l+l+1,I=i-1,N=o-1,A=l+1,O=A*(A+1)/2,D=new a,L=D,U=void 0,B=1;B<R;B++)L=L.next=new a,B===A&&(U=L);L.next=D;var F=null,H=null;m=f=0;for(var q=n[l],j=r[l],x=0;x<o;x++){P=w=C=y=v=g=0,b=A*(S=c[f]),T=A*(_=c[f+1]),E=A*(M=c[f+2]),y+=O*S,v+=O*_,g+=O*M,L=D;for(var V=0;V<A;V++)L.r=S,L.g=_,L.b=M,L=L.next;for(var W=1;W<A;W++)p=f+((I<W?I:W)<<2),y+=(L.r=S=c[p])*(k=A-W),v+=(L.g=_=c[p+1])*k,g+=(L.b=M=c[p+2])*k,P+=S,w+=_,C+=M,L=L.next;F=D,H=U;for(var Y=0;Y<i;Y++)c[f]=y*q>>j,c[f+1]=v*q>>j,c[f+2]=g*q>>j,y-=b,v-=T,g-=E,b-=F.r,T-=F.g,E-=F.b,p=m+((p=Y+l+1)<I?p:I)<<2,P+=F.r=c[p],w+=F.g=c[p+1],C+=F.b=c[p+2],y+=P,v+=w,g+=C,F=F.next,b+=S=H.r,T+=_=H.g,E+=M=H.b,P-=S,w-=_,C-=M,H=H.next,f+=4;m+=i}for(var G=0;G<i;G++){w=C=P=v=g=y=0,f=G<<2,b=A*(S=c[f]),T=A*(_=c[f+1]),E=A*(M=c[f+2]),y+=O*S,v+=O*_,g+=O*M,L=D;for(var z=0;z<A;z++)L.r=S,L.g=_,L.b=M,L=L.next;h=i;for(var K=1;K<=l;K++)f=h+G<<2,y+=(L.r=S=c[f])*(k=A-K),v+=(L.g=_=c[f+1])*k,g+=(L.b=M=c[f+2])*k,P+=S,w+=_,C+=M,L=L.next,K<N&&(h+=i);f=G,F=D,H=U;for(var Q=0;Q<o;Q++)p=f<<2,c[p]=y*q>>j,c[p+1]=v*q>>j,c[p+2]=g*q>>j,y-=b,v-=T,g-=E,b-=F.r,T-=F.g,E-=F.b,p=G+((p=Q+A)<N?p:N)*i<<2,y+=P+=F.r=c[p],v+=w+=F.g=c[p+1],g+=C+=F.b=c[p+2],F=F.next,b+=S=H.r,T+=_=H.g,E+=M=H.b,P-=S,w-=_,C-=M,H=H.next,f+=i}u.putImageData(d,t,s)}}function i(e,t,a,i,n){var r=e.naturalWidth,o=e.naturalHeight;t.style.width=i+"px",t.style.height=n+"px",t.width=i,t.height=n;var l=t.getContext("2d");l.clearRect(0,0,i,n);var u=1;u=r/i>o/n?o/n:r/i;var d=r/u,c=o/u;l.drawImage(e,Math.floor((d-i)/-2),Math.floor((c-n)/-2),Math.ceil(d),Math.ceil(c)),isNaN(a)||a<1||s(t,0,0,i,n,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.stackBlurCanvasRGB=s,t.stackBlurImage=i;var n=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],r=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24]},1004:function(e,t,a){"use strict";function s(e,t){var a=document.createElement("canvas"),s=a.getContext("2d"),i=a.width=e.width,n=a.height=e.height,r=t.width,o=t.height;s.putImageData(e,0,0);var l=i/r,u=n/o,d=l>u,c=d?u:l,p=i/c,h=n/c,f=Math.floor((p-r)/-2),m=Math.floor((h-o)/-2),y=Math.ceil(p),v=Math.ceil(h),g=t.getContext("2d");g.clearRect(0,0,r,o),g.drawImage(a,f,m,y,v)}function i(e,t,a){t.width=300,t.height=150,s(e,t),(0,n.stackBlurCanvasRGB)(t,0,0,t.width,t.height,a)}Object.defineProperty(t,"__esModule",{value:!0}),t.microBlur=i;var n=a(1003)},1005:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(517),b=s(g),T=a(642),E=a(549),P=a(866),w=a(1006),C=s(w),S=a(1007),_=s(S),M=a(1008),k=s(M),R=a(942),I=s(R),N=a(825),A=s(N),O=a(1009),D=s(O),L=a(1011),U=s(L),B=a(1012),F=s(B),H=a(1013),q=s(H),j=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"possiblyRenderReplayButton",value:function(){if(b["default"].isVideoSupported()){var e=v["default"].createElement(D["default"],{dispatch:this.props.dispatch,player:this.props.player}),t=this.props.broadcast;if(t&&t.isRunning&&!b["default"].hasInlineAutoplayVideo())return e;if(this.props.replay.replayAvailable)return e}}},{key:"shouldRenderData",value:function(){return!this.props.broadcastError.isServerError&&(!this.props.broadcastError.isNotFound&&(!this.props.broadcastError.isUnavailable&&!(!this.props.broadcast||!this.props.user)))}},{key:"possiblyRenderBroadcastTitle",value:function(){if(this.shouldRenderData())return v["default"].createElement(I["default"],{broadcastTitle:this.props.broadcast.status})}},{key:"possiblyRenderBroadcastUser",value:function(){if(this.shouldRenderData())return v["default"].createElement(A["default"],{displayName:this.props.user.display_name,username:this.props.user.username,location:"BroadcastDetails",profileIsVisible:this.props.profileIsVisible,toggleProfileSidebar:this.props.toggleProfileSidebar,isTwitterVerified:this.props.user.is_twitter_verified,vip:this.props.user.vip})}},{key:"possiblyRenderCouchmodeCTA",value:function(){if(this.props.broadcastError.isUnavailable&&b["default"].isVideoSupported())return v["default"].createElement(k["default"],null)}},{key:"possiblyRenderBroadcastBackground",value:function(){if(this.props.broadcast)return v["default"].createElement(_["default"],{broadcast:this.props.broadcast,player:this.props.player,width:this.props.width,dispatch:this.props.dispatch})}},{key:"renderBroadcastStatePreview",value:function(){return b["default"].shouldUseMobileLayout()?v["default"].createElement(F["default"],{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,player:this.props.player,replay:this.props.replay,viewers:this.props.viewers,dispatch:this.props.dispatch}):v["default"].createElement(U["default"],{broadcast:this.props.broadcast,player:this.props.player,replay:this.props.replay,broadcastError:this.props.broadcastError})}},{key:"render",value:function(){return v["default"].createElement(C["default"],(0,n["default"])({baseClass:"BroadcastDetails"},this.props),v["default"].createElement("div",{className:"BroadcastDetails-overlay u-flexItem u-flexParent"},this.possiblyRenderReplayButton(),this.renderBroadcastStatePreview(),this.possiblyRenderCouchmodeCTA(),this.possiblyRenderBroadcastTitle(),this.possiblyRenderBroadcastUser(),v["default"].createElement(q["default"],{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,dispatch:this.props.dispatch})),v["default"].createElement("div",{className:"u-flexItem"},this.possiblyRenderBroadcastBackground()))}}]),t}(v["default"].Component);t["default"]=j,j.propTypes={user:E.userPropType,replay:P.replayPropType,broadcastError:v["default"].PropTypes.object,profileIsVisible:v["default"].PropTypes.bool,width:v["default"].PropTypes.number,toggleProfileSidebar:v["default"].PropTypes.func,player:v["default"].PropTypes.object.isRequired,broadcast:T.broadcastPropType,dispatch:v["default"].PropTypes.func.isRequired,viewers:v["default"].PropTypes.number}},1006:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(642),v={baseClass:"VideoInterstitial",hiddenModifier:"VideoInterstitial--hidden",delayModifier:"VideoInterstitial--delay"},g=1e3,b={flexParent:"u-flexParent",fullHeight:"u-fullHeight"},T=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.state={shouldHide:!1},a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){var e=this,t=this.props.player,a=[v.baseClass,b.fullHeight,b.flexParent];return t.isPlayback&&t.videoHasStarted&&(a=a.concat([v.hiddenModifier,v.delayModifier]),this.state.shouldHide||setTimeout(function(){return e.setState({shouldHide:!0})},g)),!t.isPlayback&&this.props.broadcast.isEnded&&(a=a.filter(function(e){return e!==v.delayModifier||e!==v.hiddenModifier}),this.state.shouldHide&&setTimeout(function(){return e.setState({shouldHide:!1})})),this.props.baseClass&&a.push(this.props.baseClass),this.state.shouldHide?null:m["default"].createElement("div",{className:a.join(" ")},this.props.children)}}]),t}(m["default"].Component);T.propTypes={baseClass:m["default"].PropTypes.string,children:m["default"].PropTypes.node,player:m["default"].PropTypes.object,broadcast:y.broadcastPropType},t["default"]=T},1007:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(1002),v=s(y),g=a(601),b=a(642),T=a(363),E=s(T),P=a(517),w=s(P),C={baseClass:"BroadcastBackground",readyState:"ready",flexClass:"u-flexParent"},S={baseClass:"BackgroundImage",dimOpacity:"u-opacity-50",brightOpacity:"u-opacity-90",transition:"u-transition-1",flexClass:"u-flexItem"},_=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.reset()}},{key:"componentWillReceiveProps",value:function(e){(!this.props.broadcast&&e.broadcast||this.props.broadcast&&e.broadcast&&(e.broadcast.id!==this.props.broadcast.id||e.broadcast.state!==this.props.broadcast.state))&&(this.props.dispatch((0,g.playerBackgroundReady)(!1)),this.reset())}},{key:"reset",value:function(){this.backgroundShown=!1,this.setState({imageFadeOut:!1}),this.broadcastBackgroundReady()}},{key:"broadcastBackgroundReady",value:function(e){this.backgroundShown||(this.backgroundShown=!0,this.props.dispatch((0,g.playerBackgroundReady)(!0)),e&&e.target&&e.target.width>e.target.height&&this.props.player.height>this.props.player.width&&this.props.dispatch((0,g.playerCurrentOrientation)(270)))}},{key:"buildImageClasses",value:function(){var e=this,t=[S.baseClass,S.flexClass],a=!1;return(this.props.player.isPlayback&&this.props.broadcast.isEnded||w["default"].shouldUseMobileLayout())&&(a=!0),a?this.state&&this.state.imageFadeOut?(t.push(S.transition),t.push(S.dimOpacity)):(t.push(S.brightOpacity),setTimeout(function(){e.setState({imageFadeOut:!0})})):t.push(S.brightOpacity),this.props.broadcast.isEnded&&(t=t.filter(function(e){return e!==S.brightOpacity}),t.push(S.dimOpacity)),E["default"].onlyUnique(t).join(" ")}},{key:"possiblyRenderBackgroundImage",value:function(){if(this.props.broadcast.image_url){var e=""!==this.props.broadcast.localThumbnailUrl?this.props.broadcast.localThumbnailUrl:this.props.broadcast.image_url;if(!this.props.shouldBlur){var t={backgroundImage:"url("+e+")"};return m["default"].createElement("div",{className:this.buildImageClasses(),style:t},m["default"].createElement("img",{style:{display:"none"},src:e}))}return m["default"].createElement(v["default"],{className:this.buildImageClasses(),img:e,blurRadius:80})}}},{key:"buildBackgroundClasses",value:function(){var e=[C.baseClass,C.flexClass],t=this.props.player&&this.props.player.playerBackgroundReady;return this.props.player.videoHasStarted&&this.props.player.isPlayback&&!w["default"].mobile()&&(t=!1),t&&e.push(C.readyState),E["default"].onlyUnique(e).join(" ")}},{key:"render",value:function(){return m["default"].createElement("div",{className:this.buildBackgroundClasses()},this.possiblyRenderBackgroundImage())}}]),t}(m["default"].Component);t["default"]=_,_.defaultProps={shouldBlur:!0},_.propTypes={dispatch:m["default"].PropTypes.func.isRequired,player:m["default"].PropTypes.object.isRequired,broadcast:b.broadcastPropType,shouldBlur:m["default"].PropTypes.bool}},1008:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(163),g=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){return m["default"].createElement("div",{className:"CouchmodeCTA"},m["default"].createElement("div",{className:"CouchmodeCTA-prompt"},m["default"].createElement(y.FormattedMessage,{id:"app.COUCHMODE_PROMPT",defaultMessage:"What's happening now?"})),m["default"].createElement(v.Link,{to:"/couchmode",className:"CouchmodeCTA-button"},m["default"].createElement(y.FormattedMessage,{id:"app.COUCHMODE_BUTTON",defaultMessage:"Watch a LIVE broadcast"})))}}]),t}(m["default"].Component);t["default"]=g},1009:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(517),g=s(v),b=a(561),T=a(934),E=a(688),P=a(1010),w=s(P),C=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"togglePlayerMode",value:function(){return this.playbackNotSupported()?void this.props.dispatch((0,b.trackEvent)("REPLAY_UNSUPPORTED_PLAYBACK_CLICK")):void(this.props.player.isInterstitialPresentation?this.props.dispatchManualPlayStart():(0,T.resetVideoState)(this.props.dispatch))}},{key:"playbackNotSupported",value:function(){return!g["default"].isVideoSupported()}},{key:"render",value:function(){var e=["BroadcastReplayButton"],t=this.props.player.isInterstitialPresentation,a=this.props.player.isVideoPresentation,s=this.props.player.isStopped,i=this.props.player.videoHasStarted;return t&&s?e.push("is-stopped"):a&&!i?e.push("is-loading"):i&&e.push("is-playing"),this.playbackNotSupported()&&e.push("BroadcastReplayButton--disabled"),m["default"].createElement("div",{className:e.join(" "),onClick:this.togglePlayerMode.bind(this)},m["default"].createElement("div",{className:"BroadcastReplayButton-loading"}),m["default"].createElement(w["default"],null))}}]),t}(m["default"].Component);C.propTypes={dispatch:m["default"].PropTypes.func,dispatchManualPlayStart:m["default"].PropTypes.func,player:m["default"].PropTypes.object},t["default"]=(0,y.connect)(function(){return{}},E.videoPlayerDispatchMapper)(C)},1010:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=function(){return n["default"].createElement("svg",{width:"180px",height:"180px",viewBox:"0 0 182 180",className:"ReplayIcon"},n["default"].createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n["default"].createElement("g",{transform:"translate(-629, -319)"},n["default"].createElement("g",{transform:"translate(-80.000000, -57.000000)"},n["default"].createElement("g",{className:"replay-button",transform:"translate(710.000000, 376.000000)"},n["default"].createElement("circle",{className:"circle",stroke:"#FFFFFF",strokeWidth:"2",fillOpacity:"0",fill:"#000000",cx:"90",cy:"90",r:"90"}),n["default"].createElement("polygon",{className:"icon-play",fill:"#FFFFFF",transform:"translate(100.000000, 91.000000) rotate(90.000000) translate(-100.000000, -91.000000)",points:"100 62 129 120 71 120"}),n["default"].createElement("path",{className:"icon-pause",d:"M71,61 L71,120 L84,120 L84,61 L71,61 Z M96,61 L96,120 L109,120 L109,61 L96,61 Z",id:"pause",fill:"#FFFFFF"}))))))};var i=a(1),n=s(i)},1011:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(295),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(243),b=a(517),T=s(b),E=a(519),P=s(E),w=a(642),C=a(866),S=9e4,_=function(e){function t(e){(0,u["default"])(this,t);var a=(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).call(this,e));return a.state={endedCounter:0},a}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"componentDidMount",value:function(){var e=this;this.endedTimer||(this.endedTimer=setInterval(function(){e.setState({endedCounter:e.state.endedCounter+1})},S))}},{key:"componentWillUnmount",value:function(){this.endedTimer&&clearInterval(this.endedTimer)}},{key:"possiblyIncludeReplayNotice",value:function(){if(P["default"].isEnabled("replays")&&!this.props.broadcastError.isServerError&&!this.props.broadcastError.isNotFound&&!this.props.broadcastError.isUnavailable&&this.props.broadcast.isEnded&&!this.props.replay.replayAvailable)return v["default"].createElement("p",{className:"BroadcastState-noReplay"},"Replay Unavailable")}},{key:"broadcastState",value:function(){return this.props.broadcastError.isServerError?"ERROR":this.props.broadcastError.isNotFound||this.props.broadcastError.isUnavailable?"NOT_FOUND":!this.props.broadcast.isRunning||!this.props.broadcastError.isUnavailable&&T["default"].isVideoSupported()?this.props.broadcast.isRunning&&this.props.player.isConnecting?"CONNECTING":this.props.player.playerIsUnavailable||this.props.player.isConnected?"CONNECTED":this.props.broadcast.isEnded?"ENDED_AGO":T["default"].hasInlineAutoplayVideo()?"CONNECTING":"CONNECTED":"LIVE"}},{key:"render",value:function(){var e=this,t=this.broadcastState(),a=["BroadcastState"];switch(t){case"ERROR":case"NOT_FOUND":a.push("BroadcastState--error");break;case"ENDED_AGO":}var s="broadcast.state_label."+t;if(this.props.broadcast&&"ENDED_AGO"===t){var i=function(){var t=e.props.broadcast.endTime;return{v:v["default"].createElement("div",{className:a.join(" ")},v["default"].createElement("p",null,v["default"].createElement(g.FormattedRelative,{value:t},function(e){return v["default"].createElement("time",{dateTime:t,title:t},v["default"].createElement(g.FormattedMessage,{id:s,defaultMessage:"Ended",values:{ended_ago:e}}))})),e.possiblyIncludeReplayNotice())}}();if("object"===("undefined"==typeof i?"undefined":(0,n["default"])(i)))return i.v}return v["default"].createElement("div",{className:a.join(" ")},v["default"].createElement("p",null,v["default"].createElement(g.FormattedMessage,{id:s,defaultMessage:"Ended"})))}}]),t}(v["default"].Component);t["default"]=_,_.propTypes={player:v["default"].PropTypes.object,replay:C.replayPropType,broadcast:w.broadcastPropType,broadcastError:v["default"].PropTypes.object}},1012:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(1011),g=s(v),b=a(647),T=a(787),E=a(642),P=a(866),w=a(977),C=s(w),S=5e3,_=(0,y.defineMessages)({tagLabel:{id:"broadcast.state_label.LIVE",defaultMessage:"Live"}}),M=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.state={thumbLoaded:!1},a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"componentDidMount",value:function(){this.possiblyLaunchApp()}},{key:"componentWillUnmount",value:function(){clearInterval(this.thumbnailPreviewInterval)}},{key:"possiblyRenderBroadcastPreview",value:function(){if(this.props.broadcast&&this.props.broadcast.image_url){var e=["BroadcastPreview-imageWrapper"];this.props.broadcast.isRunning&&e.push("BroadcastPreview-imageWrapper--live");var t=this.props.intl;return m["default"].createElement("div",{className:"BroadcastPreview-imageContainer",onClick:this.handleThumbClick()},m["default"].createElement("div",{className:e.join(" "),"data-tag-label":t.formatMessage(_.tagLabel)},m["default"].createElement("img",{className:"BroadcastPreview-image",src:this.props.broadcast.image_url,onLoad:this.handleThumbLoaded()})),m["default"].createElement("span",{className:"BroadcastPreview-playIcon"},m["default"].createElement(C["default"],null)))}}},{key:"handleThumbClick",value:function(){var e=this;return function(){e.props.dispatch((0,T.openAppLinkModal)({broadcast:e.props.broadcast}))}}},{key:"handleThumbLoaded",value:function(){var e=this;return function(){e.state.thumbLoaded||e.setState({thumbLoaded:!0})}}},{key:"possiblyLaunchApp",value:function(){return!1}},{key:"renderSubhead",value:function(){var e=this;return this.props.broadcast.isRunning?(this.thumbnailPreviewInterval||(this.thumbnailPreviewInterval=setInterval(function(){e.props.dispatch((0,b.broadcastForceRequest)(e.props.broadcast.id))},S)),m["default"].createElement("div",{className:"BroadcastPreview-subhead"},this.possiblyRenderWatchingCount())):(clearInterval(this.thumbnailPreviewInterval),m["default"].createElement("div",{className:"BroadcastPreview-subhead"},this.possiblyRenderWatchedCount(),m["default"].createElement(g["default"],{broadcast:this.props.broadcast,broadcastError:this.props.broadcastError,player:this.props.player,replay:this.props.replay})))}},{key:"possiblyRenderWatchingCount",value:function(){if(this.props.viewers)return m["default"].createElement("div",{className:"BroadcastPreview-watching"},m["default"].createElement(y.FormattedMessage,{id:"viewers.WATCHING_LABEL",defaultMessage:"{viewerCount} people are watching",values:{viewerCount:this.props.viewers}}))}},{key:"possiblyRenderWatchedCount",value:function(){if(this.props.viewers)return m["default"].createElement("div",{className:"BroadcastPreview-viewers"},m["default"].createElement(y.FormattedMessage,{id:"viewers.COUNT_LABEL",defaultMessage:"{viewerCount} Viewers",values:{viewerCount:this.props.viewers}}))}},{key:"render",value:function(){var e=["BroadcastPreview"];return this.state.thumbLoaded&&e.push("BroadcastPreview--withImage"),m["default"].createElement("div",{className:e.join(" ")},this.possiblyRenderBroadcastPreview(),this.renderSubhead())}}]),t}(m["default"].Component);M.propTypes={broadcast:E.broadcastPropType,broadcastError:m["default"].PropTypes.object,dispatch:m["default"].PropTypes.func,intl:y.intlShape.isRequired,viewers:m["default"].PropTypes.number,player:m["default"].PropTypes.object,replay:P.replayPropType},t["default"]=(0,y.injectIntl)(M)},1013:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){return r["default"].createElement(u["default"],e)}Object.defineProperty(t,"__esModule",{value:!0});var n=a(1),r=s(n),o=a(225),l=a(1014),u=s(l);t["default"]=(0,
o.connect)()(i)},1014:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(517),v=s(y),g=a(642),b=a(1015),T=s(b),E=a(1016),P=s(E),w=a(1028),C=s(w),S="BroadcastDetails",_=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"render",value:function(){return this.isBroadcastError()?null:v["default"].ios()?this.getMobileCTA("OPEN_IN_APP_CLICK"):v["default"].android()?this.getMobileCTA("OPEN_IN_APP_ANDROID_CLICK"):v["default"].isDevice()?null:this.props.broadcast.isRunning?null:this.defaultCTA()}},{key:"isBroadcastError",value:function(){return this.props.broadcastError.isServerError||this.props.broadcastError.isUnavailable||this.props.broadcastError.isNotFound}},{key:"getMobileCTA",value:function(e){return m["default"].createElement("div",{className:"BroadcastDetails-appCta BroadcastDetails-appCta--deviceWithApp"},m["default"].createElement(P["default"],{href:this.props.broadcast.inAppUrl,dispatch:this.props.dispatch,trackEventName:e,trackEventLocation:S}))}},{key:"defaultCTA",value:function(){return m["default"].createElement("div",{className:"BroadcastDetails-appCta"},m["default"].createElement(T["default"],{dispatch:this.props.dispatch,broadcast:this.props.broadcast,location:S}),m["default"].createElement(C["default"],{dispatch:this.props.dispatch,trackEventLocation:S}))}}]),t}(m["default"].Component);_.propTypes={dispatch:m["default"].PropTypes.func.isRequired,broadcast:g.broadcastPropType.isRequired,broadcastError:m["default"].PropTypes.object.isRequired},t["default"]=_},1015:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(561),g=a(787),b=a(642),T=a(549),E=a(709),P=s(E),w=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.handleOpenGetAppCta=a.handleOpenGetAppCta.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"handleOpenGetAppCta",value:function(){this.props.dispatch((0,g.openGetAppModal)({broadcast:this.props.broadcast,user:this.props.user})),this.props.dispatch((0,v.trackEvent)("GET_APP_CTA_CLICK",{location:this.props.location}))}},{key:"render",value:function(){var e=["AppLink","AppLink--cta"];return this.props.withoutBottomMargin&&e.push("AppLink--withoutBottomMargin"),m["default"].createElement("div",{className:"GetAppCTA"},m["default"].createElement("div",{className:e.join(" "),onClick:this.handleOpenGetAppCta},m["default"].createElement(y.FormattedMessage,P["default"].get)))}}]),t}(m["default"].Component);w.propTypes={dispatch:m["default"].PropTypes.func.isRequired,broadcast:b.broadcastPropType,user:T.userPropType,location:m["default"].PropTypes.oneOf(["Header","BroadcastDetails"]),withoutBottomMargin:m["default"].PropTypes.bool},w.defaultProps={location:"Header"},t["default"]=w},1016:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(561),g=a(1017),b=a(1018),T=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.trackClick=a.trackClick.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"trackClick",value:function(){this.props.dispatch((0,v.trackEvent)(this.props.trackEventName,{location:this.props.trackEventLocation}))}},{key:"possiblyRenderIcon",value:function(){switch(this.props.platform){case g.PLATFORM_TYPE_ANDROID:return m["default"].createElement("span",{className:"AppLink-icon AppLink-icon--playstore"},m["default"].createElement("img",{src:"/v/images/logo_playstore.svg"}));case g.PLATFORM_TYPE_IOS:return m["default"].createElement("span",{className:"AppLink-icon AppLink-icon--apple"},m["default"].createElement("img",{src:"/v/images/logo_apple.svg"}));default:return null}}},{key:"render",value:function(){var e=["AppLink","AppLink--cta"];return this.props.platform&&e.push("AppLink--withIcon"),m["default"].createElement("a",{className:e.join(" "),href:this.props.href,onClick:this.trackClick},this.possiblyRenderIcon(),this.props.children)}}]),t}(m["default"].Component);t["default"]=T,T.propTypes={children:m["default"].PropTypes.node,href:m["default"].PropTypes.string.isRequired,platform:m["default"].PropTypes.oneOf([g.PLATFORM_TYPE_ANDROID,g.PLATFORM_TYPE_IOS]),dispatch:m["default"].PropTypes.func.isRequired,trackEventName:m["default"].PropTypes.string,trackEventLocation:m["default"].PropTypes.string},T.defaultProps={children:m["default"].createElement(y.FormattedMessage,b.app.open),trackEventLocation:"",platform:null}},1017:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a="BROADCAST",s="USER",i="ANDROID",n="IOS";t.CONTENT_TYPE_BROADCAST=a,t.CONTENT_TYPE_USER=s,t.PLATFORM_TYPE_ANDROID=i,t.PLATFORM_TYPE_IOS=n},1018:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.vip=t.viewers=t.vanity=t.validators=t.user=t.textLink=t.system=t.signup=t.signin=t.share=t.search=t.report=t.moderation=t.help=t.errors=t.download=t.commenting=t.channels=t.broadcast=t.banned=t.authmenu=t.app=t.alert=void 0;var i=a(926),n=s(i),r=a(709),o=s(r),l=a(760),u=s(l),d=a(1019),c=s(d),p=a(657),h=s(p),f=a(873),m=s(f),y=a(953),v=s(y),g=a(776),b=s(g),T=a(573),E=s(T),P=a(879),w=s(P),C=a(1020),S=s(C),_=a(884),M=s(_),k=a(1021),R=s(k),I=a(969),N=s(I),A=a(1023),O=s(A),D=a(795),L=s(D),U=a(982),B=s(U),F=a(1024),H=s(F),q=a(837),j=s(q),x=a(798),V=s(x),W=a(1026),Y=s(W),G=a(673),z=s(G),K=a(1027),Q=s(K);t["default"]={alert:n["default"],app:o["default"],authmenu:u["default"],banned:c["default"],broadcast:h["default"],channels:m["default"],commenting:v["default"],download:b["default"],errors:E["default"],help:w["default"],moderation:S["default"],report:M["default"],search:R["default"],share:N["default"],signin:O["default"],signup:L["default"],system:B["default"],textLink:H["default"],user:j["default"],validators:V["default"],vanity:Y["default"],viewers:z["default"],vip:Q["default"]},t.alert=n["default"],t.app=o["default"],t.authmenu=u["default"],t.banned=c["default"],t.broadcast=h["default"],t.channels=m["default"],t.commenting=v["default"],t.download=b["default"],t.errors=E["default"],t.help=w["default"],t.moderation=S["default"],t.report=M["default"],t.search=R["default"],t.share=N["default"],t.signin=O["default"],t.signup=L["default"],t.system=B["default"],t.textLink=H["default"],t.user=j["default"],t.validators=V["default"],t.vanity=Y["default"],t.viewers=z["default"],t.vip=Q["default"]},1019:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.prompt=void 0;var i=a(897),n=s(i);t["default"]={prompt:n["default"]},t.prompt=n["default"]},1020:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.banned=void 0;var i=a(952),n=s(i);t["default"]={banned:n["default"]},t.banned=n["default"]},1021:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.results=t.input=void 0;var i=a(751),n=s(i),r=a(1022),o=s(r);t["default"]={input:n["default"],results:o["default"]},t.input=n["default"],t.results=o["default"]},1023:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.prompt=t.logout=void 0;var i=a(786),n=s(i),r=a(755),o=s(r);t["default"]={logout:n["default"],prompt:o["default"]},t.logout=n["default"],t.prompt=o["default"]},1024:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.success=t.prompt=t.error=void 0;var i=a(1025),n=s(i),r=a(780),o=s(r),l=a(852),u=s(l);t["default"]={error:n["default"],prompt:o["default"],success:u["default"]},t.error=n["default"],t.prompt=o["default"],t.success=u["default"]},1025:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.tryAgain=t.title=t.message=t.done=void 0;var s=a(243),i=(0,s.defineMessages)({done:{id:"text_link.error.DONE",defaultMessage:"Done"},message:{id:"text_link.error.MESSAGE",defaultMessage:"Something went wrong."},title:{id:"text_link.error.TITLE",defaultMessage:"Oops!"},tryAgain:{id:"text_link.error.TRY_AGAIN",defaultMessage:"Try again."}}),n=i.done,r=i.message,o=i.title,l=i.tryAgain;t["default"]={done:n,message:r,title:o,tryAgain:l},t.done=n,t.message=r,t.title=o,t.tryAgain=l},1026:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.vip=t.tos=t.nav=void 0;var i=a(882),n=s(i),r=a(742),o=s(r),l=a(744),u=s(l);t["default"]={nav:n["default"],tos:o["default"],vip:u["default"]},t.nav=n["default"],t.tos=o["default"],t.vip=u["default"]},1027:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.icon=void 0;var i=a(685),n=s(i);t["default"]={icon:n["default"]},t.icon=n["default"]},1028:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}function i(e){return r["default"].createElement("div",{className:"AppLinks"},r["default"].createElement(h["default"],{href:d["default"].APP_WEB,platform:c.PLATFORM_TYPE_IOS,dispatch:e.dispatch,trackEventName:"GET_APP_SPLIT_CLICK",trackEventLocation:e.trackEventLocation},r["default"].createElement(o.FormattedMessage,l.app.ios)),r["default"].createElement(h["default"],{href:d["default"].PLAY_STORE,platform:c.PLATFORM_TYPE_ANDROID,dispatch:e.dispatch,trackEventName:"GET_APP_SPLIT_ANDROID_CLICK",trackEventLocation:e.trackEventLocation},r["default"].createElement(o.FormattedMessage,l.app.android)))}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i;var n=a(1),r=s(n),o=a(243),l=a(1018),u=a(765),d=s(u),c=a(1017),p=a(1016),h=s(p);i.propTypes={dispatch:r["default"].PropTypes.func.isRequired,trackEventLocation:r["default"].PropTypes.string}},1029:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(517),v=s(y),g=a(642),b=a(602),T=a(1030),E=s(T),P=a(1031),w=s(P),C=a(1033),S=s(C),_=a(1034),M=s(_),k=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"hideCTA",value:function(){var e=this.props.player;return!!e&&(v["default"].isDevice()&&e.isExpectingVideo)}},{key:"allowVideoInteractivity",value:function(){return this.props.broadcast&&this.props.broadcast.has360Video}},{key:"possiblyIncludeCTA",value:function(e){return this.allowVideoInteractivity()?e:m["default"].createElement(w["default"],{broadcast:this.props.broadcast,player:this.props.player},e)}},{key:"render",value:function(){var e=["EmbedOverlay"];return v["default"].isDevice()&&e.push("EmbedOverlay--isForced"),this.allowVideoInteractivity()&&e.push("EmbedOverlay--withInteractivity"),m["default"].createElement("div",{className:e.join(" ")},m["default"].createElement("div",{className:"EmbedOverlay-alpha"}),m["default"].createElement(E["default"],{player:this.props.player}),this.possiblyIncludeCTA(m["default"].createElement(S["default"],{includeCTA:!0,hideCTA:this.hideCTA(),broadcast:this.props.broadcast})),m["default"].createElement(M["default"],this.props))}}]),t}(m["default"].Component);k.propTypes={broadcast:g.broadcastPropType,dispatch:m["default"].PropTypes.func.isRequired,player:b.playerPropType.isRequired,viewers:m["default"].PropTypes.number.isRequired},t["default"]=k},1030:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(661),g="LoadingOverlay--isLoading",b=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"possiblyRenderMessage",value:function(){if(!this.props.player.videoHasStarted&&this.props.player.isLoadingVideo){var e=this.props.player.isLiveMode?v.connecting:v.loading;return m["default"].createElement(y.FormattedMessage,e,function(e){return m["default"].createElement("span",{className:"LoadingOverlay-text"},e)})}}},{key:"render",value:function(){var e=["LoadingOverlay"];return this.props.player.isLoadingVideo&&e.push(g),m["default"].createElement("div",{className:e.join(" ")},this.possiblyRenderMessage())}}]),t}(m["default"].Component);b.propTypes={player:m["default"].PropTypes.object},t["default"]=b},1031:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(517),g=s(v),b=a(1032),T=s(b),E=a(642),P=a(549),w=a(602),C=a(586),S=s(C),_=a(688),M=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.clickHandler=a.clickHandler.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"clickHandler",value:function(){g["default"].isDevice()?this.clickHandlerDevice():this.clickHandlerDesktop()}},{key:"clickHandlerDesktop",value:function(){var e=this.props.player;e.isLiveMode?this.props.dispatchAudioOff():this.props.dispatchPauseVideo()}},{key:"togglePlayback",value:function(){var e=this.props.player;e.isExpectingVideo?this.props.dispatchPauseVideo():this.props.dispatchPlayVideo()}},{key:"toggleAudio",value:function(){var e=this.props.player;e.muted?this.props.dispatchAudioOn():this.props.dispatchAudioOff()}},{key:"clickHandlerDevice",value:function(){var e=this.props.player;return e.isReplayMode?void this.togglePlayback():void(g["default"].hasInlineVideo()&&g["default"].hasAudioControl()?this.toggleAudio():this.togglePlayback())}},{key:"render",value:function(){return m["default"].createElement(T["default"],{className:"EmbedCTA",onClick:this.clickHandler,broadcast:this.props.broadcast,user:this.props.user,disabled:g["default"].isDevice()},this.props.children)}}]),t}(m["default"].Component);M.defaultProps={dispatch:function(){},dispatchAudioOff:function(){},dispatchAudioOn:function(){},dispatchPauseVideo:function(){},dispatchPlayVideo:function(){}},M.propTypes={broadcast:E.broadcastPropType,children:m["default"].PropTypes.node,dispatch:m["default"].PropTypes.func,dispatchAudioOff:m["default"].PropTypes.func,dispatchAudioOn:m["default"].PropTypes.func,dispatchPauseVideo:m["default"].PropTypes.func,dispatchPlayVideo:m["default"].PropTypes.func,link:m["default"].PropTypes.string,trackClick:m["default"].PropTypes.func,player:w.playerPropType,user:P.userPropType},t["default"]=(0,y.connect)(S["default"],_.videoPlayerDispatchMapper)(M)},1032:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(295),o=s(r),l=a(267),u=s(l),d=a(293),c=s(d),p=a(341),h=s(p),f=a(294),m=s(f),y=a(345),v=s(y),g=a(1),b=s(g),T=a(225),E=a(921),P=a(642),w=a(866),C=a(549),S=a(561),_=a(913),M=a(388),k=a(707),R=function(e){function t(e){(0,c["default"])(this,t);var a=(0,m["default"])(this,(t.__proto__||(0,u["default"])(t)).call(this,e));return a.href=null,a.postMessage=function(){},a.setProperties(e),a.trackClick=a.trackClick.bind(a),a}return(0,v["default"])(t,e),(0,h["default"])(t,[{key:"componentWillMount",value:function(){"object"===("undefined"==typeof window?"undefined":(0,o["default"])(window))&&(this.postMessage=(0,_.postMessage)(window.parent))}},{key:"componentWillReceiveProps",value:function(e){this.setProperties(e)}},{key:"setProperties",value:function(e){var t=e.broadcast,a=e.user,s=e.disabled;s?this.href=null:t&&t.id?this.href=this.buildLinkWithParams(e,t.urlWithUsername):a&&a.username?this.href=a.url:this.href="#"}},{key:"buildLinkWithParams",value:function(e,t){var a=e.broadcast,s=e.replay;if(a.isRunning||!s)return t;var i=Math.round(s.elapsed),r=(0,n["default"])({},(0,M.withAutoplay)(),(0,M.withTime)(i));return(0,k.withQuery)(t,r)}},{key:"trackClick",value:function(e){var t=this.props,a=t.user,s=t.broadcast,i=t.disabled;if(this.triggerOnClick(e),!i){var n=a&&a.username?"user":"missing",r=s&&s.id?"broadcast":n;this.props.dispatch((0,S.trackEvent)("VIEW_ON_PERISCOPE",{contentType:r})),this.postMessage.openLink(this.href)}}},{key:"triggerOnClick",value:function(e){var t=this.props.onClick;t&&t(e)}},{key:"render",value:function(){return b["default"].createElement("a",(0,n["default"])({className:"EmbedLink"},this.props,{href:this.href,onClick:this.trackClick,target:"_blank"}),this.props.children)}}]),t}(b["default"].Component);R.defaultProps={dispatch:function(){}},R.propTypes={broadcast:P.broadcastPropType,replay:w.replayPropType.isRequired,user:C.userPropType,disabled:b["default"].PropTypes.bool,onClick:b["default"].PropTypes.func,dispatch:b["default"].PropTypes.func,children:b["default"].PropTypes.oneOfType([b["default"].PropTypes.element,b["default"].PropTypes.arrayOf(b["default"].PropTypes.element)])},t["default"]=(0,T.connect)(E.replayFullMapper)(R)},1033:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(243),v=a(517),g=s(v),b=a(709),T=s(b),E=a(837),P=s(E),w=a(642),C=a(549),S=a(768),_=s(S),M=a(1032),k=s(M),R=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.clickHandler=a.clickHandler.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"hasCTA",value:function(){return this.props.includeCTA||this.props.includeUserCTA}},{key:"possiblyIncludeCTA",value:function(){if(this.hasCTA()){var e=this.props.includeUserCTA?P["default"].periscopeLink:T["default"].external;return m["default"].createElement(y.FormattedMessage,e,function(e){return m["default"].createElement("span",{className:"EmbedHeader-cta u-pullRight"},e)})}}},{key:"clickHandler",value:function(e){e.stopPropagation()}},{key:"shouldDisableLink",value:function(){return(!this.props.broadcast||!this.props.broadcast.has360Video)&&!g["default"].isDevice()}},{key:"render",value:function(){var e=["EmbedHeader"];return this.hasCTA()&&e.push("EmbedHeader--isCTA"),this.props.hideCTA&&e.push("EmbedHeader--isHidden"),m["default"].createElement(k["default"],{onClick:this.clickHandler,broadcast:this.props.broadcast,user:this.props.user,disabled:this.shouldDisableLink()},m["default"].createElement("div",{className:e.join(" ")},m["default"].createElement("span",{className:"EmbedHeader-logo u-pullRight"},m["default"].createElement(_["default"],null)),this.possiblyIncludeCTA()))}}]),t}(m["default"].Component);R.defaultProps={includeCTA:!1,includeUserCTA:!1},R.propTypes={hideCTA:m["default"].PropTypes.bool,includeCTA:m["default"].PropTypes.bool,includeUserCTA:m["default"].PropTypes.bool,broadcast:w.broadcastPropType,user:C.userPropType},t["default"]=R},1034:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(642),v=a(602),g=a(941),b=s(g),T=a(978),E=s(T),P=a(662),w=s(P),C=a(687),S=s(C),_=a(517),M=s(_),k=function(e){function t(){return(0,o["default"])(this,t),(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).apply(this,arguments))}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"possiblyRenderRightButton",value:function(){return M["default"].hasAudioControl()?m["default"].createElement("div",{className:"EmbedFooter-fixed"},m["default"].createElement(S["default"],{muted:this.props.player.muted})):null}},{key:"renderLiveFooter",value:function(){return m["default"].createElement("div",{className:"EmbedFooter"},m["default"].createElement(w["default"],{viewers:this.props.viewers,isLive:!0,isConjoined:!0,includeEndedLabel:!0}),this.possiblyRenderRightButton())}},{key:"renderReplayFooter",value:function(){var e=this.possiblyRenderRightButton(),t=["EmbedFooter"];return e||t.push("EmbedFooter--noRightButton"),m["default"].createElement("div",{className:t.join(" ")},m["default"].createElement("div",{className:"EmbedFooter-dynamic"},m["default"].createElement(w["default"],{viewers:this.props.viewers,isConjoined:!0,includeEndedLabel:!0}),m["default"].createElement("div",{className:"EmbedFooter-playback"},m["default"].createElement(E["default"],{player:this.props.player,broadcast:this.props.broadcast}),m["default"].createElement(b["default"],{videoStartDate:this.props.broadcast.start}))),this.possiblyRenderRightButton())}},{key:"render",value:function(){return this.props.player.isLiveMode?this.renderLiveFooter():this.renderReplayFooter()}}]),t}(m["default"].Component);k.propTypes={broadcast:y.broadcastPropType.isRequired,viewers:m["default"].PropTypes.number.isRequired,player:v.playerPropType.isRequired},t["default"]=k},1035:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(354),n=s(i),r=a(267),o=s(r),l=a(293),u=s(l),d=a(341),c=s(d),p=a(294),h=s(p),f=a(345),m=s(f),y=a(1),v=s(y),g=a(642),b=a(549),T=a(1007),E=s(T),P=a(1006),w=s(P),C=a(662),S=s(C),_=a(1030),M=s(_),k=a(1033),R=s(k),I=a(1036),N=s(I),A=a(540),O=s(A),D=function(e){function t(){return(0,u["default"])(this,t),(0,h["default"])(this,(t.__proto__||(0,o["default"])(t)).apply(this,arguments))}return(0,m["default"])(t,e),(0,c["default"])(t,[{key:"getBroadcastUrl",value:function(){var e=this.props,t=e.broadcast,a=e.user;return t?a?O["default"].HOST_DOMAIN+"/"+a.username+"/"+t.id:O["default"].HOST_DOMAIN+"/w/"+t.id:"#"}},{key:"render",value:function(){return v["default"].createElement(w["default"],(0,n["default"])({baseClass:"EmbedInterstitial"},this.props),v["default"].createElement(E["default"],{dispatch:this.props.dispatch,broadcast:this.props.broadcast,player:this.props.player,width:this.props.width,height:this.props.height,shouldBlur:!1}),v["default"].createElement(M["default"],{player:this.props.player}),v["default"].createElement(R["default"],null),v["default"].createElement(S["default"],{viewers:this.props.viewers,isLive:this.props.player.isLiveMode,isHidden:this.props.player.isUnknownMode,isConjoined:!0,includeEndedLabel:!0}),v["default"].createElement(N["default"],{player:this.props.player,url:this.getBroadcastUrl()}))}}]),t}(v["default"].Component);D.propTypes={dispatch:v["default"].PropTypes.func.isRequired,broadcast:g.broadcastPropType,user:b.userPropType,viewers:v["default"].PropTypes.number,player:v["default"].PropTypes.object,width:v["default"].PropTypes.number,height:v["default"].PropTypes.number},t["default"]=D},1036:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(225),v=a(688),g=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.onClickHandler=a.onClickHandler.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"onClickHandler",value:function(e){e.preventDefault(),this.props.dispatchManualPlayStart()}},{key:"render",value:function(){var e=["EmbedPlayButton"];return this.props.player.isStopped&&!this.props.player.isUnknownMode||e.push("EmbedPlayButton--hidden"),this.props.player.isLiveMode&&e.push("EmbedPlayButton--isLive"),this.props.player.isReplayMode&&e.push("EmbedPlayButton--isReplay"),m["default"].createElement("a",{className:e.join(" "),href:this.props.url,onClick:this.onClickHandler},m["default"].createElement("div",{className:"EmbedPlayButton-liveButton"}),m["default"].createElement("div",{className:"EmbedPlayButton-replayButton"}))}}]),t}(m["default"].Component);g.propTypes={dispatchManualPlayStart:m["default"].PropTypes.func.isRequired,player:m["default"].PropTypes.object,url:m["default"].PropTypes.string.isRequired},t["default"]=(0,y.connect)(function(){return{}},v.videoPlayerDispatchMapper)(g)},1037:function(e,t,a){"use strict";function s(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var i=a(267),n=s(i),r=a(293),o=s(r),l=a(341),u=s(l),d=a(294),c=s(d),p=a(345),h=s(p),f=a(1),m=s(f),y=a(1002),v=s(y),g=a(243),b=a(661),T=a(549),E=a(824),P=s(E),w=a(1031),C=s(w),S=a(1033),_=s(S),M=function(e){function t(e){(0,o["default"])(this,t);var a=(0,c["default"])(this,(t.__proto__||(0,n["default"])(t)).call(this,e));return a.state={backgroundReady:!1},a.backgroundReady=a.backgroundReady.bind(a),a}return(0,h["default"])(t,e),(0,u["default"])(t,[{key:"backgroundReady",value:function(){this.state.backgroundReady||this.setState({backgroundReady:!0})}},{key:"possiblyRenderUserLink",value:function(){return this.props.user.username?m["default"].createElement(C["default"],{user:this.props.user,username:this.props.user.username},m["default"].createElement(_["default"],{includeUserCTA:!0,user:this.props.user})):m["default"].createElement(_["default"],null)}},{key:"render",value:function(){var e=["MissingBroadcast","u-fullHeight"],t=["MissingBroadcast-image","u-flexItem","u-opacity-70","u-transition-1"];return this.state.backgroundReady&&e.push("MissingBroadcast--ready"),m["default"].createElement("div",{className:e.join(" ")},m["default"].createElement(v["default"],{className:t.join(" "),img:this.props.user.avatarUrl,blurRadius:80,onLoadFunction:this.backgroundReady}),m["default"].createElement("div",{className:"MissingBroadcast-info"},m["default"].createElement(P["default"],{user:this.props.user,isLink:!1,location:"MissingBroadcast"}),m["default"].createElement(g.FormattedMessage,b.unavailable,function(e){return m["default"].createElement("div",{className:"MissingBroadcast-broadcastState"},e)})),this.possiblyRenderUserLink())}}]),t}(m["default"].Component);M.defaultProps={user:{}},M.propTypes={user:T.userPropType},t["default"]=M}});